query getMessagesQuery(
  $filter: MessageFilter,
  $after: String,
  $before: String,
  $first: Int,
  $last: Int,
) {
  viewer {
    allMessages(
      filter: $filter,
      after: $after,
      before: $before,
      first: $first,
      last: $last,
      orderBy: createdAt_DESC
    ) {
      edges {
        cursor

        node {
          ...MessageFragment
        }
      }

      count
      pageInfo {
        hasNextPage
        hasPreviousPage
        startCursor
        endCursor
      }
    }
  }
}

fragment MessageFragment on Message {
	__typename
  id
  public
  timestamp: createdAt

  entity {
    ...EntityFragment
  }

  author: user {
    ...UserFragment
  }

  stickers {
    edges {
      node {
        ...StickerFragment
      }
    }
  }
}

fragment EntityFragment on Entity {
  __typename
  id
  uri
  name
  image
}

fragment UserFragment on User {
  __typename
  id
  uid
  firstname
  lastname
}

fragment StickerFragment on Sticker {
  __typename
  id
  type
  text
  position
  quaternion
  scale
}
