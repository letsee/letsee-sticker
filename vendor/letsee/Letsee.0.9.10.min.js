!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Letsee",[],e):"object"==typeof exports?exports.Letsee=e():t.Letsee=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="./",i(i.s=4)}([function(t,e,i){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.events={}}return function(t,e,i){e&&a(t.prototype,e),i&&a(t,i)}(t,[{key:"addEventListener",value:function(t,e){return"function"!=typeof e?(console.error("The listener callback must be a function, the given type is ".concat(n(e))),!1):"string"!=typeof t?(console.error("The event name must be a string, the given type is ".concat(n(t))),!1):(void 0===this.events[t]&&(this.events[t]={listeners:[]}),void this.events[t].listeners.push(e))}},{key:"removeEventListener",value:function(t,e){if(void 0===this.events[t])return console.error("This event: ".concat(t," does not exist")),!1;this.events[t].listeners=this.events[t].listeners.filter(function(t){return t.toString()!==e.toString()})}},{key:"dispatch",value:function(t,e){void 0!==this.events[t]&&this.events[t].listeners.forEach(function(t){t(e)})}}]),t}();e.default=r,t.exports=e.default},function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,i){e&&n(t.prototype,e),i&&n(t,i)}(t,null,[{key:"LoadImage",value:function(t){var e=new Image;return e.src=t,new Promise(function(t){e.onload=function(){var i=document.createElement("canvas"),n=i.getContext("2d");i.width=e.naturalWidth,i.height=e.naturalHeight,n.drawImage(e,0,0);var a=n.getImageData(0,0,i.width,i.height),r=a.width,s=a.height,o=a.data;t({img:{width:r,height:s,data:o}})}})}},{key:"UUID",get:function(){var t=(new Date).getTime();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(t+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var i=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?i:3&i|8).toString(16)})}}]),t}();e.default=a,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STATE_RECOGNIZE=e.STATE_TRACK_END=e.STATE_TRACK_MOVE=e.STATE_TRACK_START=e.EVENT_APP_STATUS=e.EVENT_TRACKER_INIT_COMPLETE=e.EVENT_VIDEO_INIT_COMPLETE=e.WORKER_UPDATE_REFERENCE_IMAGE=e.WORKER_UPDATE_FRAME=e.WORKER_UPDATE_INFORMATION=e.WORKER_DRAW_PROCESSED_FRAME=e.WORKER_POST_NULL=e.WORKER_TRACK_MARKER_SUCCESS=e.WORKER_TRACK_SUCCESS=e.WORKER_SUCCESS_SET_REFERENCE=e.WORKER_AUTH_RESULT=e.WORKER_ON_RUNTIME_INITIALIZED=e.WORKER_TEST=e.WORKER_AUTH=e.WORKER_PROCESS_FRAME=e.WORKER_SET_REFERENCE_IMAGE=e.WORKER_SET_DEBUG_FLAG=void 0;e.WORKER_SET_DEBUG_FLAG="set_debug_flag";e.WORKER_SET_REFERENCE_IMAGE="set_reference_image";e.WORKER_PROCESS_FRAME="process_frame";e.WORKER_AUTH="auth";e.WORKER_TEST="test";e.WORKER_ON_RUNTIME_INITIALIZED="on_runtime_initilized";e.WORKER_AUTH_RESULT="auth_result";e.WORKER_SUCCESS_SET_REFERENCE="success_set_reference";e.WORKER_TRACK_SUCCESS="track_success";e.WORKER_TRACK_MARKER_SUCCESS="track_marker_success";e.WORKER_POST_NULL="post_null";e.WORKER_DRAW_PROCESSED_FRAME="draw_processed_frame";e.WORKER_UPDATE_INFORMATION="update_information";e.WORKER_UPDATE_FRAME="update_frame";e.WORKER_UPDATE_REFERENCE_IMAGE="Update_reference_image";e.EVENT_VIDEO_INIT_COMPLETE="video_init_complete";e.EVENT_TRACKER_INIT_COMPLETE="tracker_init_complete";e.EVENT_APP_STATUS="app_status";e.STATE_TRACK_START="trackstart";e.STATE_TRACK_MOVE="trackmove";e.STATE_TRACK_END="trackend";e.STATE_RECOGNIZE="recognize"},function(t,e){t.exports=function(t,e,i){for(var n=i-1,a=t.length;++n<a;)if(t[n]===e)return n;return-1}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,a=m(i(0)),r=m(i(5)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};n.get||n.set?Object.defineProperty(e,i,n):e[i]=t[i]}return e.default=t,e}(i(2)),o=m(i(9)),h=m(i(11)),u=m(i(1)),c=m(i(12)),l=m(i(13)),f=m(i(15)),d=m(i(16));function m(t){return t&&t.__esModule?t:{default:t}}function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function y(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){v(t,e,i[e])})}return t}function v(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function g(t,e){return(g=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function w(t,e,i){return e&&M(t.prototype,e),i&&M(t,i),t}var k=function(){function t(e){b(this,t),this.worker=new o.default,this.type=e,this.worker.onmessage=function(t){switch(t.data.cmd){case s.WORKER_ON_RUNTIME_INITIALIZED:n.WORKER_ON_RUNTIME_INITIALIZED(t);break;case s.WORKER_AUTH_RESULT:n.WORKER_AUTH_RESULT(t);break;case s.WORKER_SUCCESS_SET_REFERENCE:n.WORKER_SUCCESS_SET_REFERENCE(t);break;case s.WORKER_TRACK_SUCCESS:n.WORKER_TRACK_SUCCESS(t);break;case s.WORKER_TRACK_MARKER_SUCCESS:n.WORKER_TRACK_MARKER_SUCCESS(t);break;case s.WORKER_POST_NULL:n.WORKER_POST_NULL(t)}},this.worker.postMessage({cmd:"selectWorker",type:e})}return w(t,[{key:"WORKER_UPDATE_INFORMATION",value:function(){this.worker.postMessage()}},{key:"WORKER_AUTH",value:function(){this.worker.postMessage()}},{key:"WORKER_SET_REFERENCE_IMAGE",value:function(){this.worker.postMessage()}},{key:"WORKER_PROCESS_FRAME",value:function(){this.worker.postMessage()}}]),t}(),x=function(t){function e(t){var i;return b(this,e),i=_(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n?_(i,n):(i.letseeEngine=window.LetseeEngine||d.default,i.state=null,i.worker,i._updateFlag=!1,i.entityManager=new f.default,i.videoManager=new r.default,i.workerPool=[],i.config={appKey:null,type:"camera",videoUrl:null,debug:!1,trackerType:t.type||"PLANAR"},i.config=y({},i.config,t),i.videoManager.init().then(function(){i.letseeEngineConfig={runType:"BROWSER",width:i.videoManager.screenWidth,height:i.videoManager.screenHeight,orientation:i.videoManager.angle,data:h.default.parse(),projectionParameter:[50,i.videoManager.screenAspectRatio,.1,2e3]},i.letseeEngine.init(i.letseeEngineConfig),i.entityManager.initEntity(i.letseeEngineConfig.data).then(function(t){i.state=t}),i.initTracker(i.config.trackerType),i._setState()}).catch(function(t){return console.warn(t),!1}),i.videoManager.addEventListener(s.EVENT_VIDEO_INIT_COMPLETE,function(t){console.log("[MAIN] VIDEO INIT")}),window.addEventListener("orientationchange",function(t){i.videoManager._setAspectRatio(),i.updateFlag=!0;var e=setTimeout(function(){i.letseeEngine.onConfigurationChanged({width:i.videoManager.screenValue.width,height:i.videoManager.screenValue.height,orientation:i.videoManager.screenValue.angle}),clearTimeout(e)},500);i.sendMessageToWorker({cmd:s.WORKER_UPDATE_FRAME,parameter:[50,i.videoManager.screenAspectRatio,.1,2e3]});var n=setTimeout(function(){i.updateFlag=!1,i.updateTracker(),clearTimeout(n)},500)}),i.videoManager.addEventListener(s.EVENT_APP_STATUS,function(t){i.dispatch(s.EVENT_APP_STATUS,t)}),i.letseeEngine.addEventListener("trackstart",function(t){i.dispatch(s.STATE_TRACK_START,t)}),i.letseeEngine.addEventListener("trackmove",function(t){i.dispatch(s.STATE_TRACK_MOVE,t)}),i.letseeEngine.addEventListener("trackend",function(t){i.dispatch(s.STATE_TRACK_END,t)}),n=i,i)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&g(t,e)}(e,a.default),w(e,[{key:"_setState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"object"===p(t)&&null!==t?this.state=y({},this.state,t):this.state={type:null,entity:{type:"object",uri:null,name:null,image:null,size:{width:null,height:null,depth:0,unit:"mm"}},matrix:null,pixelSize:{width:null,height:null,depth:null,unit:"px"},scale:null},this.state}},{key:"initTracker",value:function(t){var e=new k(t);this.workerPool.push(e.worker)}},{key:"sendMessageToWorker",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.workerPool.forEach(function(e){e.postMessage(t)})}},{key:"setReferenceImage",value:function(t){var e=this;u.default.LoadImage(t).then(function(t){var i=t.img;e.sendMessageToWorker({cmd:s.WORKER_SET_REFERENCE_IMAGE,img_data:i},[i.data.buffer]),console.log("[MAIN] Set reference image to tracker")})}},{key:"updateFrame",value:function(){var t=this.videoManager.video.element;this.videoManager.renderFrame(t),this.letseeEngine.renderer.render()}},{key:"updateTracker",value:function(){if(this.updateFrame(),!this.updateFlag&&this.getFrameData){var t=this.getFrameData;this.sendMessageToWorker({cmd:s.WORKER_PROCESS_FRAME,img_data:t},[t.data.buffer])}}},{key:"dispatchTrackState",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=[];n=i?this.state.filter(function(t){return(0,c.default)(i,t.entity.letseeMarkerId)}).map(function(n){return n.type=e[(0,l.default)(i,n.entity.letseeMarkerId)],n.matrix=JSON.parse("["+t[(0,l.default)(i,n.entity.letseeMarkerId)]+"]"),n}):this.state.map(function(i){return i.type=e,i.matrix=JSON.parse("["+t+"]"),i.information={name:"temp",test:"test"},i}),null===this.letseeEngine&&void 0===this.letseeEngine||null===t&&void 0===t||null===e||"recognize"===e||void 0===e||this.letseeEngine.tracker.updateState(n)}},{key:"drawFps",value:function(t){}},{key:"WORKER_ON_RUNTIME_INITIALIZED",value:function(t){this.dispatch(s.EVENT_APP_STATUS,{code:203,message:"".concat(t.data.type," Tracker start")});var e={cmd:s.WORKER_UPDATE_INFORMATION,entity:this.state[0].entity,parameter:[50,this.videoManager.screenAspectRatio,.1,2e3],markerList:null,codeList:null};e.markerList=this.entityManager.markerList||null,e.codeList=this.entityManager.codeList||null,this.sendMessageToWorker(e),this.sendMessageToWorker({cmd:s.WORKER_AUTH,appKey:this.config.appKey})}},{key:"WORKER_AUTH_RESULT",value:function(t){var e={code:null,message:null};switch(t.data.result){case"pending":e.code=204,e.message="Authorization start",this.dispatch(s.EVENT_APP_STATUS,e);break;case"success":e.code=205,e.message="Authorization success",this.dispatch(s.EVENT_APP_STATUS,e),this.dispatch(s.EVENT_TRACKER_INIT_COMPLETE,{}),this.state[0].entity.image?this.setReferenceImage(this.state[0].entity.image):this.sendMessageToWorker({cmd:s.WORKER_SET_REFERENCE_IMAGE}),this.updateTracker();break;case"timeout":e.code=106,e.message="Authorization timeout",this.dispatch(s.EVENT_APP_STATUS,e);break;case"fail":e.code=105,e.message="Authorization failed",this.dispatch(s.EVENT_APP_STATUS,e)}}},{key:"WORKER_SUCCESS_SET_REFERENCE",value:function(t){t.data.result?this.dispatch(s.EVENT_APP_STATUS,{code:206,message:"Reference image setup success"}):console.warn("[MAIN] Failed set reference image")}},{key:"WORKER_TRACK_SUCCESS",value:function(t){this.updateTracker(),this.dispatchTrackState(t.data.pose,t.data.trackState,t.data.marker)}},{key:"WORKER_TRACK_MARKER_SUCCESS",value:function(t){this.updateTracker()}},{key:"WORKER_POST_NULL",value:function(t){this.updateTracker()}},{key:"updateFlag",get:function(){return this._updateFlag},set:function(t){this._updateFlag=t}},{key:"getFrameData",get:function(){return this.videoManager.getFrameData}}]),e}();e.default=x,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,a=h(i(0)),r=i(1),s=h(i(6)),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,i):{};n.get||n.set?Object.defineProperty(e,i,n):e[i]=t[i]}return e.default=t,e}(i(2));function h(t){return t&&t.__esModule?t:{default:t}}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function f(t,e){return(f=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var d=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=l(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),n?l(t,n):(t.mediaTrack,t.deviceID,t.amountOfCameras,t.currentFacingMode="environment",t.angle=0,t.videoAttached=!1,t.isPortrait=!0,t.frameAspectRatio,t.screenAspectRatio,t.screenWidth=0,t.screenHeight=0,t.frameData,t.dpr=1,t.browser="unknown",t.os="unknown",t.container=document.createElement("div"),t.videoElement=document.createElement("video"),t.videoElement.addEventListener("loadeddata",function(){t.dispatch(o.EVENT_APP_STATUS,{code:202,message:"Video start"})}),t.canvas=document.createElement("canvas"),t.canvasCtx=t.canvas.getContext("2d"),t.debug,t.videoUrl,t.video={container:t.container,element:t.videoElement,canvas:t.canvas,canvasCtx:t.canvasCtx,constraints:{video:{facingMode:t.currentFacingMode,width:1280,height:720},audio:!1},viewPort:{width:null,height:null}},n=t,t)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&f(t,e)}(e,a.default),function(t,e,i){e&&c(t.prototype,e),i&&c(t,i)}(e,[{key:"init",value:function(){var t=this;return new Promise(function(e,i){t._setAspectRatio(),t._initCameraContainer(),t.videoUrl?t._attachSourceToVideo(t.videoUrl):t.getAttachedVideo().then(function(){t.dispatch(o.EVENT_APP_STATUS,{code:200,message:"Camera initialize start"}),t._initCamera(),t._attachStreamToVideo(t.video.constraints)}).then(function(){t.dispatch(o.EVENT_APP_STATUS,{code:201,message:"Camera initialize done"}),e()}).catch(function(t){i(t)})})}},{key:"initDebug",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!0===e){this.debug=e,this.videoUrl=t;var i=document.createElement("canvas");i.id="debugScreen",i.style.position="fixed",i.style.top="0px",i.style.left="0px",i.style.width="100%",i.style.zIndex="-1",i.style.background="#ff0",this.debugScreen=i,document.body.appendChild(this.debugScreen)}}},{key:"_initCameraContainer",value:function(){document.body.style.margin="0px",document.body.style.padding="0px",this.canvas.style.zIndex="0",this.videoElement.id=r.UUID,this.videoElement.setAttribute("playsinline",!0),this.videoElement.autoplay=!0,this.videoElement.muted=!0,this.videoElement.style.position="fixed",this.videoElement.style.top="0px",this.videoElement.style.left="0px",this.videoElement.style.zIndex="0",this.videoElement.style.width="100%",this.container.appendChild(this.videoElement),this.container.id="videoWrapper",this.container.style.position="fixed",this.container.style.top="0px",this.container.style.right="0px",this.container.style.bottom="0px",this.container.style.left="0px",this.container.style.width="100%",this.container.style.height="100%",this.container.style.zIndex="-100",document.body.appendChild(this.container)}},{key:"_setOrientation",value:function(){this.isPortrait}},{key:"getAttachedVideo",value:function(){var t=this;return new Promise(function(e,i){s.default.load(function(){t.amountOfCameras=s.default.videoInputDevices.length;var n=s.default.browser.name.toLowerCase(),a=s.default.osName.toLowerCase();n.match(/chrome/i)?t.browser="chrome":n.match(/safari/i)?t.browser="safari":t.browser="unknown",a.match(/ios/i)?t.os="ios":a.match(/android/i)?t.os="android":t.os="unknown","ios"===t.os&&"safari"!==t.browser&&(t.dispatch(o.EVENT_APP_STATUS,{code:101,message:"Please use safari with ios"}),i("Please use safari with ios")),!1===s.default.isWebRTCSupported&&(t.dispatch(o.EVENT_APP_STATUS,{code:102,message:"Unsupported browser"}),i("Please use Chrome, Firefox, iOS 11, Android 5 or higher, Safari 11 or higher")),!1===s.default.hasWebcam&&(t.dispatch(o.EVENT_APP_STATUS,{code:103,message:"No camera detected"}),i("Please install an external webcam device.")),s.default.isMobileDevice||(t.dispatch(o.EVENT_APP_STATUS,{code:104,message:"No mobile device detected"}),i("No mobile device")),e()})})}},{key:"renderFrame",value:function(){this._setAspectRatio(),this.video.canvas.width=this.videoElement.clientWidth*this.dpr,this.video.canvas.height=this.videoElement.clientHeight*this.dpr,this.video.canvasCtx.scale(this.dpr,this.dpr),this.video.canvasCtx.drawImage(this.videoElement,0,0,this.videoElement.clientWidth,this.videoElement.clientHeight),this.frameData=this.video.canvasCtx.getImageData(0,0,window.innerWidth,window.innerHeight)}},{key:"_setAspectRatio",value:function(){this.angle=void 0!==screen.orientation&&screen.orientation?screen.orientation.angle:window.orientation,90===this.angle||-90===this.angle||270===this.angle||-270===this.angle?(this.screenWidth=window.innerHeight,this.screenHeight=window.innerWidth):(this.screenWidth=window.innerWidth,this.screenHeight=window.innerHeight),this.screenAspectRatio=0===this.angle||180===this.angle?this.screenWidth/this.screenHeight:this.screenHeight/this.screenWidth,this.frameAspectRatio=this.screenWidth/this.screenHeight,this.isPortrait=this.screenAspectRatio<=1}},{key:"_initCamera",value:function(){window.stream&&window.stream.getTracks().forEach(function(t){t.stop()}),this.video.viewPort={width:window.innerWidth,height:window.innerHeight},this._setAspectRatio()}},{key:"_attachStreamToVideo",value:function(t){var e=this;return new Promise(function(i,n){setTimeout(function(){navigator.mediaDevices.getUserMedia(t).then(function(t){return window.stream=t,e.videoElement.srcObject=t,e.deviceID=t.getTracks()[0].getSettings().deviceId,e.videoAttached=!0,navigator.mediaDevices.enumerateDevices()}).then(function(t){i()}).catch(function(t){n(t)})},window.stream?200:0)})}},{key:"_attachSourceToVideo",value:function(t){if(t){var e=document.createElement("source");e.src=t,e.type="video/mp4",this.video.element.appendChild(e),this.video.element.addEventListener("canplay",function(){return!0})}}},{key:"getFrameData",get:function(){return this.frameData}},{key:"_getCropArea",get:function(){var t=this.isPortrait?[(this.videoElement.clientWidth-this.video.viewPort.width)/2,0]:[0,(this.videoElement.clientHeight-this.video.viewPort.height)/2];return[].concat(t,[this.video.viewPort.width,this.video.viewPort.height])}},{key:"screenValue",get:function(){var t,e,i=void 0!==screen.orientation&&screen.orientation?screen.orientation.angle:window.orientation;return 90===i||-90===i||270===i||-270===i?(t=window.innerHeight,e=window.innerWidth):(t=window.innerWidth,e=window.innerHeight),{width:t,height:e,angle:i}}}]),e}();e.default=d,t.exports=e.default},function(t,e,i){"use strict";(function(i,n){var a;!function(){var r="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";if(b="object"==typeof i&&"object"==typeof i.versions&&i.versions.node&&!i.browser){var s=i.versions.node.toString().replace("v","");r="Nodejs/"+s+" (NodeOS) AppleWebKit/"+s+" (KHTML, like Gecko) Nodejs/"+s+" Nodejs/"+s}!function(t){"undefined"==typeof window&&("undefined"==typeof window&&void 0!==n&&(n.navigator={userAgent:r,getUserMedia:function(){}},t.window=n),"undefined"==typeof location&&(t.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(t.screen={width:0,height:0}))}(void 0!==n?n:window);var o=window.navigator;void 0!==o?(void 0!==o.webkitGetUserMedia&&(o.getUserMedia=o.webkitGetUserMedia),void 0!==o.mozGetUserMedia&&(o.getUserMedia=o.mozGetUserMedia)):o={getUserMedia:function(){},userAgent:r};var h=!!/Android|webOS|iPhone|iPad|iPod|BB10|BlackBerry|IEMobile|Opera Mini|Mobile|mobile/i.test(o.userAgent||""),u=!(-1===o.userAgent.indexOf("Edge")||!o.msSaveOrOpenBlob&&!o.msSaveBlob),c=!!window.opera||o.userAgent.indexOf(" OPR/")>=0,l=void 0!==window.InstallTrigger,f=/^((?!chrome|android).)*safari/i.test(o.userAgent),d=!!window.chrome&&!c,m="undefined"!=typeof document&&!!document.documentMode&&!u;function p(t,e){var i=0,n=!1,a=window.setInterval(function(){t()&&(window.clearInterval(a),e(n)),i++>50&&(window.clearInterval(a),e(n=!0))},10)}var y={Android:function(){return o.userAgent.match(/Android/i)},BlackBerry:function(){return o.userAgent.match(/BlackBerry|BB10/i)},iOS:function(){return o.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return o.userAgent.match(/Opera Mini/i)},Windows:function(){return o.userAgent.match(/IEMobile/i)},any:function(){return y.Android()||y.BlackBerry()||y.iOS()||y.Opera()||y.Windows()},getOsName:function(){var t="Unknown OS";return y.Android()&&(t="Android"),y.BlackBerry()&&(t="BlackBerry"),y.iOS()&&(t="iOS"),y.Opera()&&(t="Opera Mini"),y.Windows()&&(t="Windows"),t}};var v="Unknown OS",_="Unknown OS Version";var g=function(){for(var t,e=o.appVersion,i=o.userAgent,n="-",a=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],r=0;t=a[r];r++)if(t.r.test(i)){n=t.s;break}var s="-";switch(/Windows/.test(n)&&(/Windows (.*)/.test(n)&&(s=/Windows (.*)/.exec(n)[1]),n="Windows"),n){case"Mac OS X":/Mac OS X (10[\.\_\d]+)/.test(i)&&(s=/Mac OS X (10[\.\_\d]+)/.exec(i)[1]);break;case"Android":/Android ([\.\_\d]+)/.test(i)&&(s=/Android ([\.\_\d]+)/.exec(i)[1]);break;case"iOS":/OS (\d+)_(\d+)_?(\d+)?/.test(i)&&(s=(s=/OS (\d+)_(\d+)_?(\d+)?/.exec(e))[1]+"."+s[2]+"."+(0|s[3]))}return{osName:n,osVersion:s}}();g&&g.osName&&"-"!=g.osName?(v=g.osName,_=g.osVersion):y.any()&&"Android"==(v=y.getOsName())&&(_=function(t){var e=(t=(t||o.userAgent).toLowerCase()).match(/android\s([0-9\.]*)/);return!!e&&e[1]}());var b="object"==typeof i&&"object"==typeof i.versions&&i.versions.node;"Unknown OS"===v&&b&&(v="Nodejs",_=i.versions.node.toString().replace("v",""));var M=!1,w=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(t){"undefined"!=typeof document&&"function"==typeof document.createElement&&(!M&&t in document.createElement("canvas")&&(M=!0),!w&&t in document.createElement("video")&&(w=!0))});var k=/^(192\.168\.|169\.254\.|10\.|172\.(1[6-9]|2\d|3[01]))/,x=/([0-9]{1,3}(\.[0-9]{1,3}){3})/,E=/[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7}/;var S=[],C=[],O=[],T=[];o.mediaDevices&&o.mediaDevices.enumerateDevices&&(o.enumerateDevices=function(t){var e=o.mediaDevices.enumerateDevices();e&&e.then?o.mediaDevices.enumerateDevices().then(t).catch(function(){t([])}):t([])});var R=!1;"undefined"!=typeof MediaStreamTrack&&"getSources"in MediaStreamTrack?R=!0:o.mediaDevices&&o.mediaDevices.enumerateDevices&&(R=!0);var P=!1,A=!1,j=!1,z=!1,I=!1;function N(t){if(R)if(!o.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(o.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!o.enumerateDevices&&o.enumerateDevices&&(o.enumerateDevices=o.enumerateDevices.bind(o)),o.enumerateDevices){S=[],C=[],O=[],T=[],P=!1,A=!1,j=!1,z=!1,I=!1;var e={};o.enumerateDevices(function(i){i.forEach(function(t){var i={};for(var n in t)try{"function"!=typeof t[n]&&(i[n]=t[n])}catch(t){}e[i.deviceId+i.label+i.kind]||("audio"===i.kind&&(i.kind="audioinput"),"video"===i.kind&&(i.kind="videoinput"),i.deviceId||(i.deviceId=i.id),i.id||(i.id=i.deviceId),i.label?("videoinput"!==i.kind||I||(I=!0),"audioinput"!==i.kind||z||(z=!0)):(i.isCustomLabel=!0,"videoinput"===i.kind?i.label="Camera "+(T.length+1):"audioinput"===i.kind?i.label="Microphone "+(C.length+1):"audiooutput"===i.kind?i.label="Speaker "+(O.length+1):i.label="Please invoke getUserMedia once.",void 0!==L&&L.browser.isChrome&&L.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(i.label="HTTPs is required to get label of this "+i.kind+" device.")),"audioinput"===i.kind&&(P=!0,-1===C.indexOf(i)&&C.push(i)),"audiooutput"===i.kind&&(A=!0,-1===O.indexOf(i)&&O.push(i)),"videoinput"===i.kind&&(j=!0,-1===T.indexOf(i)&&T.push(i)),S.push(i),e[i.deviceId+i.label+i.kind]=i)}),void 0!==L&&(L.MediaDevices=S,L.hasMicrophone=P,L.hasSpeakers=A,L.hasWebcam=j,L.isWebsiteHasWebcamPermissions=I,L.isWebsiteHasMicrophonePermissions=z,L.audioInputDevices=C,L.audioOutputDevices=O,L.videoInputDevices=T),t&&t()})}else t&&t();else t&&t()}var L=window.DetectRTC||{};L.browser=function(){o.appVersion;var t,e,i,n=o.userAgent,a=o.appName,r=""+parseFloat(o.appVersion),s=parseInt(o.appVersion,10);if(f&&!d&&-1!==n.indexOf("CriOS")&&(f=!1,d=!0),c){a="Opera";try{s=(r=o.userAgent.split("OPR/")[1].split(" ")[0]).split(".")[0]}catch(t){r="0.0.0.0",s=0}}else m?((e=n.indexOf("rv:"))>0?r=n.substring(e+3):(e=n.indexOf("MSIE"),r=n.substring(e+5)),a="IE"):d?(e=n.indexOf("Chrome"),a="Chrome",r=n.substring(e+7)):f?(e=n.indexOf("Safari"),a="Safari",r=n.substring(e+7),-1!==(e=n.indexOf("Version"))&&(r=n.substring(e+8)),-1!==o.userAgent.indexOf("Version/")&&(r=o.userAgent.split("Version/")[1].split(" ")[0])):l?(e=n.indexOf("Firefox"),a="Firefox",r=n.substring(e+8)):(t=n.lastIndexOf(" ")+1)<(e=n.lastIndexOf("/"))&&(a=n.substring(t,e),r=n.substring(e+1),a.toLowerCase()===a.toUpperCase()&&(a=o.appName));return u&&(a="Edge",r=o.userAgent.split("Edge/")[1]),-1!==(i=r.search(/[; \)]/))&&(r=r.substring(0,i)),s=parseInt(""+r,10),isNaN(s)&&(r=""+parseFloat(o.appVersion),s=parseInt(o.appVersion,10)),{fullVersion:r,version:s,name:a,isPrivateBrowsing:!1}}(),function(t){var e;try{if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,function(){e=!1},function(t){e=!0});else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var i;try{(i=window.indexedDB.open("test")).onerror=function(){return!0}}catch(t){e=!0}void 0===e&&p(function(){return"done"===i.readyState},function(t){t||(e=!i.result)})}else if(function(t){var e=t.toLowerCase();if(0===e.indexOf("msie")&&0===e.indexOf("trident"))return!1;var i=/(?:msie|rv:)\s?([\d\.]+)/.exec(e);return!!(i&&parseInt(i[1],10)>=10)}(window.navigator.userAgent)){e=!1;try{window.indexedDB||(e=!0)}catch(t){e=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(t){e=!0}void 0===e&&(e=!1,window.localStorage.removeItem("test"))}}catch(t){e=!1}p(function(){return void 0!==e},function(i){t(e)})}(function(t){L.browser.isPrivateBrowsing=!!t}),L.browser["is"+L.browser.name]=!0,L.osName=v,L.osVersion=_;"object"==typeof i&&"object"==typeof i.versions&&i.versions["node-webkit"];var W=!1;["RTCPeerConnection","webkitRTCPeerConnection","mozRTCPeerConnection","RTCIceGatherer"].forEach(function(t){W||t in window&&(W=!0)}),L.isWebRTCSupported=W,L.isORTCSupported="undefined"!=typeof RTCIceGatherer;var F=!1;(L.browser.isChrome&&L.browser.version>=35?F=!0:L.browser.isFirefox&&L.browser.version>=34?F=!0:L.browser.isEdge&&L.browser.version>=17?F=!0:"Android"===L.osName&&L.browser.isChrome&&(F=!0),/^(https:|chrome-extension:)$/g.test(location.protocol||""))||("undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(L.browser.isChrome||L.browser.isEdge||L.browser.isOpera)?F=!1:L.browser.isFirefox&&(F=!1));L.isScreenCapturingSupported=F;var q={isSupported:!1,isCreateMediaStreamSourceSupported:!1};["AudioContext","webkitAudioContext","mozAudioContext","msAudioContext"].forEach(function(t){q.isSupported||t in window&&(q.isSupported=!0,window[t]&&"createMediaStreamSource"in window[t].prototype&&(q.isCreateMediaStreamSourceSupported=!0))}),L.isAudioContextSupported=q.isSupported,L.isCreateMediaStreamSourceSupported=q.isCreateMediaStreamSourceSupported;var D=!1;L.browser.isChrome&&L.browser.version>31&&(D=!0),L.isRtpDataChannelsSupported=D;var U=!1;L.browser.isFirefox&&L.browser.version>28?U=!0:L.browser.isChrome&&L.browser.version>25?U=!0:L.browser.isOpera&&L.browser.version>=11&&(U=!0),L.isSctpDataChannelsSupported=U,L.isMobileDevice=h;var K=!1;o.getUserMedia?K=!0:o.mediaDevices&&o.mediaDevices.getUserMedia&&(K=!0),L.browser.isChrome&&L.browser.version>=46&&!/^(https:|chrome-extension:)$/g.test(location.protocol||"")&&"undefined"!=typeof document&&"string"==typeof document.domain&&document.domain.search&&-1===document.domain.search(/localhost|127.0./g)&&(K="Requires HTTPs"),"Nodejs"===L.osName&&(K=!1),L.isGetUserMediaSupported=K;var G="";screen.width&&(G+=(screen.width?screen.width:"")+" x "+(screen.height?screen.height:""));L.displayResolution=G,L.displayAspectRatio=function(t,e){var i=function t(e,i){return 0==i?e:t(i,e%i)}(t,e);return t/i/(e/i)}(screen.width,screen.height).toFixed(2),L.isCanvasSupportsStreamCapturing=M,L.isVideoSupportsStreamCapturing=w,"Chrome"==L.browser.name&&L.browser.version>=53&&(L.isCanvasSupportsStreamCapturing||(L.isCanvasSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features"),L.isVideoSupportsStreamCapturing||(L.isVideoSupportsStreamCapturing="Requires chrome flag: enable-experimental-web-platform-features")),L.DetectLocalIPAddress=function(t,e){if(L.isWebRTCSupported){var i=!0,n=!0;!function(t,e){if("undefined"!=typeof document&&"function"==typeof document.getElementById){var i={},n=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;if(!n){var a=document.getElementById("iframe");if(!a)return;var r=a.contentWindow;n=r.RTCPeerConnection||r.mozRTCPeerConnection||r.webkitRTCPeerConnection}if(n){var s=null;"Chrome"===L.browser&&L.browser.version<58&&(s={optional:[{RtpDataChannels:!0}]});var o=new n({iceServers:[{urls:"stun:stun.l.google.com:19302"}]},s);if(e&&(o.addStream?o.addStream(e):o.addTrack&&e.getTracks()[0]&&o.addTrack(e.getTracks()[0],e)),o.onicecandidate=function(t){t.candidate&&t.candidate.candidate?h(t.candidate.candidate):h()},!e)try{o.createDataChannel("sctp",{})}catch(t){}L.isPromisesSupported?o.createOffer().then(function(t){o.setLocalDescription(t).then(u)}):o.createOffer(function(t){o.setLocalDescription(t,u,function(){})},function(){})}}function h(e){if(e){var n=x.exec(e);if(n){var a=n[1],r=e.match(k);void 0===i[a]&&t(a,r,!0),i[a]=!0}}else t()}function u(){var t=o.localDescription.sdp.split("\n");t.forEach(function(t){t&&0===t.indexOf("a=candidate:")&&h(t)})}}(function(e){e?e.match(k)?t("Local: "+e,i=!1,n):e.match(E)?t("Public: "+e,i,n=!1):t("Public: "+e,i,n):t()},e)}},L.isWebSocketsSupported="WebSocket"in window&&2===window.WebSocket.CLOSING,L.isWebSocketsBlocked=!L.isWebSocketsSupported,"Nodejs"===L.osName&&(L.isWebSocketsSupported=!0,L.isWebSocketsBlocked=!1),L.checkWebSocketsSupport=function(t){t=t||function(){};try{var e,i=new WebSocket("wss://echo.websocket.org:443/");i.onopen=function(){L.isWebSocketsBlocked=!1,e=(new Date).getTime(),i.send("ping")},i.onmessage=function(){L.WebsocketLatency=(new Date).getTime()-e+"ms",t(),i.close(),i=null},i.onerror=function(){L.isWebSocketsBlocked=!0,t()}}catch(e){L.isWebSocketsBlocked=!0,t()}},L.load=function(t){N(t=t||function(){})},L.MediaDevices=void 0!==S?S:[],L.hasMicrophone=P,L.hasSpeakers=A,L.hasWebcam=j,L.isWebsiteHasWebcamPermissions=I,L.isWebsiteHasMicrophonePermissions=z,L.audioInputDevices=C,L.audioOutputDevices=O,L.videoInputDevices=T;var Z=!1;"undefined"!=typeof document&&"function"==typeof document.createElement&&"setSinkId"in document.createElement("video")&&(Z=!0),L.isSetSinkIdSupported=Z;var V=!1;L.browser.isFirefox&&"undefined"!=typeof mozRTCPeerConnection?"getSenders"in mozRTCPeerConnection.prototype&&(V=!0):L.browser.isChrome&&"undefined"!=typeof webkitRTCPeerConnection&&"getSenders"in webkitRTCPeerConnection.prototype&&(V=!0),L.isRTPSenderReplaceTracksSupported=V;var B=!1;L.browser.isFirefox&&L.browser.version>38&&(B=!0),L.isRemoteStreamProcessingSupported=B;var H=!1;"undefined"!=typeof MediaStreamTrack&&"applyConstraints"in MediaStreamTrack.prototype&&(H=!0),L.isApplyConstraintsSupported=H;var Q=!1;L.browser.isFirefox&&L.browser.version>=43&&(Q=!0),L.isMultiMonitorScreenCapturingSupported=Q,L.isPromisesSupported=!!("Promise"in window),L.version="1.3.9",void 0===L&&(window.DetectRTC={});var X=window.MediaStream;void 0===X&&"undefined"!=typeof webkitMediaStream&&(X=webkitMediaStream),L.MediaStream=void 0!==X&&"function"==typeof X&&Object.keys(X.prototype),"undefined"!=typeof MediaStreamTrack?L.MediaStreamTrack=Object.keys(MediaStreamTrack.prototype):L.MediaStreamTrack=!1;var Y=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection;L.RTCPeerConnection=void 0!==Y&&Object.keys(Y.prototype),window.DetectRTC=L,t.exports=L,void 0===(a=function(){return L}.apply(e,[]))||(t.exports=a)}()}).call(this,i(7),i(8))},function(t,e){var i,n,a=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(i===setTimeout)return setTimeout(t,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var h,u=[],c=!1,l=-1;function f(){c&&h&&(c=!1,h.length?u=h.concat(u):l=-1,u.length&&d())}function d(){if(!c){var t=o(f);c=!0;for(var e=u.length;e;){for(h=u,u=[];++l<e;)h&&h[l].run();l=-1,e=u.length}h=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}a.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new m(t,e)),1!==u.length||c||o(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=p,a.addListener=p,a.once=p,a.off=p,a.removeListener=p,a.removeAllListeners=p,a.emit=p,a.prependListener=p,a.prependOnceListener=p,a.listeners=function(t){return[]},a.binding=function(t){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(t){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){t.exports=function(){return i(10)('!function(t){var r={};function n(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=r,n.d=function(t,r,e){n.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:e})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,r){if(1&r&&(t=n(t)),8&r)return t;if(4&r&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(n.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&r&&"string"!=typeof t)for(var a in t)n.d(e,a,function(r){return t[r]}.bind(null,a));return e},n.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(r,"a",r),r},n.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},n.p="./",n(n.s=3)}([function(t,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.STATE_RECOGNIZE=r.STATE_TRACK_END=r.STATE_TRACK_MOVE=r.STATE_TRACK_START=r.EVENT_APP_STATUS=r.EVENT_TRACKER_INIT_COMPLETE=r.EVENT_VIDEO_INIT_COMPLETE=r.WORKER_UPDATE_REFERENCE_IMAGE=r.WORKER_UPDATE_FRAME=r.WORKER_UPDATE_INFORMATION=r.WORKER_DRAW_PROCESSED_FRAME=r.WORKER_POST_NULL=r.WORKER_TRACK_MARKER_SUCCESS=r.WORKER_TRACK_SUCCESS=r.WORKER_SUCCESS_SET_REFERENCE=r.WORKER_AUTH_RESULT=r.WORKER_ON_RUNTIME_INITIALIZED=r.WORKER_TEST=r.WORKER_AUTH=r.WORKER_PROCESS_FRAME=r.WORKER_SET_REFERENCE_IMAGE=r.WORKER_SET_DEBUG_FLAG=void 0;r.WORKER_SET_DEBUG_FLAG="set_debug_flag";r.WORKER_SET_REFERENCE_IMAGE="set_reference_image";r.WORKER_PROCESS_FRAME="process_frame";r.WORKER_AUTH="auth";r.WORKER_TEST="test";r.WORKER_ON_RUNTIME_INITIALIZED="on_runtime_initilized";r.WORKER_AUTH_RESULT="auth_result";r.WORKER_SUCCESS_SET_REFERENCE="success_set_reference";r.WORKER_TRACK_SUCCESS="track_success";r.WORKER_TRACK_MARKER_SUCCESS="track_marker_success";r.WORKER_POST_NULL="post_null";r.WORKER_DRAW_PROCESSED_FRAME="draw_processed_frame";r.WORKER_UPDATE_INFORMATION="update_information";r.WORKER_UPDATE_FRAME="update_frame";r.WORKER_UPDATE_REFERENCE_IMAGE="Update_reference_image";r.EVENT_VIDEO_INIT_COMPLETE="video_init_complete";r.EVENT_TRACKER_INIT_COMPLETE="tracker_init_complete";r.EVENT_APP_STATUS="app_status";r.STATE_TRACK_START="trackstart";r.STATE_TRACK_MOVE="trackmove";r.STATE_TRACK_END="trackend";r.STATE_RECOGNIZE="recognize"},function(t,r,n){(function(t,e){var a;\n/**\n * @license\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash core -o ./dist/lodash.core.js`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */(function(){var u,i="Expected a function",o=1,c=2,f=1,l=1/0,s=9007199254740991,E="[object Arguments]",_="[object Array]",p="[object AsyncFunction]",R="[object Boolean]",A="[object Date]",T="[object Error]",h="[object Function]",y="[object GeneratorFunction]",O="[object Number]",g="[object Object]",S="[object Proxy]",v="[object RegExp]",d="[object String]",b=/[&<>"\']/g,m=RegExp(b.source),k=/^(?:0|[1-9]\\d*)$/,C="object"==typeof t&&t&&t.Object===Object&&t,N="object"==typeof self&&self&&self.Object===Object&&self,I=C||N||Function("return this")();r&&!r.nodeType&&r&&"object"==typeof e&&e&&e.nodeType;function K(t,r){return t.push.apply(t,r),t}function F(t){return function(r){return null==r?u:r[t]}}var U=function(t){return function(r){return null==t?u:t[r]}}({"&":"&amp;","<":"&lt;",">":"&gt;",\'"\':"&quot;","\'":"&#39;"});var w=Array.prototype,M=Object.prototype,P=M.hasOwnProperty,j=0,W=M.toString,D=I._,L=Object.create,x=M.propertyIsEnumerable,G=I.isFinite,H=function(t,r){return function(n){return t(r(n))}}(Object.keys,Object),V=Math.max;function Z(t){return t instanceof z?t:new z(t)}var B=function(){function t(){}return function(r){if(!xt(r))return{};if(L)return L(r);t.prototype=r;var n=new t;return t.prototype=u,n}}();function z(t,r){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!r}function $(t,r,n){var e=t[r];P.call(t,r)&&Mt(e,n)&&(n!==u||r in t)||Q(t,r,n)}function Q(t,r,n){t[r]=n}function q(t,r,n){if("function"!=typeof t)throw new TypeError(i);return setTimeout(function(){t.apply(u,n)},r)}z.prototype=B(Z.prototype),z.prototype.constructor=z;var Y=function(t,r){return function(n,e){if(null==n)return n;if(!Wt(n))return t(n,e);for(var a=n.length,u=r?a:-1,i=Object(n);(r?u--:++u<a)&&!1!==e(i[u],u,i););return n}}(nt);function J(t,r,n){for(var e=-1,a=t.length;++e<a;){var i=t[e],o=r(i);if(null!=o&&(c===u?o==o:n(o,c)))var c=o,f=i}return f}function X(t,r){var n=[];return Y(t,function(t,e,a){r(t,e,a)&&n.push(t)}),n}function tt(t,r,n,e,a){var u=-1,i=t.length;for(n||(n=yt),a||(a=[]);++u<i;){var o=t[u];r>0&&n(o)?r>1?tt(o,r-1,n,e,a):K(a,o):e||(a[a.length]=o)}return a}var rt=function(t){return function(r,n,e){for(var a=-1,u=Object(r),i=e(r),o=i.length;o--;){var c=i[t?o:++a];if(!1===n(u[c],c,u))break}return r}}();function nt(t,r){return t&&rt(t,r,Jt)}function et(t,r){return X(r,function(r){return Lt(t[r])})}function at(t){return function(t){return W.call(t)}(t)}function ut(t,r){return t>r}var it=ur;function ot(t,r,n,e,a){return t===r||(null==t||null==r||!Gt(t)&&!Gt(r)?t!=t&&r!=r:function(t,r,n,e,a,i){var f=jt(t),l=jt(r),s=f?_:at(t),p=l?_:at(r),h=(s=s==E?g:s)==g,y=(p=p==E?g:p)==g,S=s==p;i||(i=[]);var b=Ct(i,function(r){return r[0]==t}),m=Ct(i,function(t){return t[0]==r});if(b&&m)return b[1]==r;if(i.push([t,r]),i.push([r,t]),S&&!h){var k=f?function(t,r,n,e,a,i){var f=n&o,l=t.length,s=r.length;if(l!=s&&!(f&&s>l))return!1;var E=-1,_=!0,p=n&c?[]:u;for(;++E<l;){var R=t[E],A=r[E];if(void 0!==u){void 0,_=!1;break}if(p){if(!Rt(r,function(t,r){if(!mt(p,r)&&(R===t||a(R,t,n,e,i)))return p.push(r)})){_=!1;break}}else if(R!==A&&!a(R,A,n,e,i)){_=!1;break}}return _}(t,r,n,e,a,i):function(t,r,n,e,a,u,i){switch(n){case R:case A:case O:return Mt(+t,+r);case T:return t.name==r.name&&t.message==r.message;case v:case d:return t==r+""}return!1}(t,r,s);return i.pop(),k}if(!(n&o)){var C=h&&P.call(t,"__wrapped__"),N=y&&P.call(r,"__wrapped__");if(C||N){var I=C?t.value():t,K=N?r.value():r,k=a(I,K,n,e,i);return i.pop(),k}}if(!S)return!1;var k=function(t,r,n,e,a,i){var c=n&o,f=Jt(t),l=f.length,s=Jt(r).length;if(l!=s&&!c)return!1;var E=l;for(;E--;){var _=f[E];if(!(c?_ in r:P.call(r,_)))return!1}var p=!0,R=c;for(;++E<l;){_=f[E];var A=t[_],T=r[_];if(!(void 0===u?A===T||a(A,T,n,e,i):void 0)){p=!1;break}R||(R="constructor"==_)}if(p&&!R){var h=t.constructor,y=r.constructor;h!=y&&"constructor"in t&&"constructor"in r&&!("function"==typeof h&&h instanceof h&&"function"==typeof y&&y instanceof y)&&(p=!1)}return p}(t,r,n,e,a,i);return i.pop(),k}(t,r,n,e,ot,a))}function ct(t){return"function"==typeof t?t:null==t?nr:("object"==typeof t?st:F)(t)}function ft(t,r){return t<r}function lt(t,r){var n=-1,e=Wt(t)?Array(t.length):[];return Y(t,function(t,a,u){e[++n]=r(t,a,u)}),e}function st(t){var r=H(t);return function(n){var e=r.length;if(null==n)return!e;for(n=Object(n);e--;){var a=r[e];if(!(a in n&&ot(t[a],n[a],o|c)))return!1}return!0}}function Et(t,r){return vt(St(t,r,nr),t+"")}function _t(t,r,n){var e=-1,a=t.length;r<0&&(r=-r>a?0:a+r),(n=n>a?a:n)<0&&(n+=a),a=r>n?0:n-r>>>0,r>>>=0;for(var u=Array(a);++e<a;)u[e]=t[e+r];return u}function pt(t){return _t(t,0,t.length)}function Rt(t,r){var n;return Y(t,function(t,e,a){return!(n=r(t,e,a))}),!!n}function At(t,r,n,e){var a=!n;n||(n={});for(var i=-1,o=r.length;++i<o;){var c=r[i],f=e?e(n[c],t[c],c,n,t):u;f===u&&(f=t[c]),a?Q(n,c,f):$(n,c,f)}return n}function Tt(t){return Et(function(r,n){var e=-1,a=n.length,i=a>1?n[a-1]:u;for(i=t.length>3&&"function"==typeof i?(a--,i):u,r=Object(r);++e<a;){var o=n[e];o&&t(r,o,e,i)}return r})}function ht(t,r,n,e){if("function"!=typeof t)throw new TypeError(i);var a=r&f,u=function(t){return function(){var r=arguments,n=B(t.prototype),e=t.apply(n,r);return xt(e)?e:n}}(t);return function r(){for(var i=-1,o=arguments.length,c=-1,f=e.length,l=Array(f+o),s=this&&this!==I&&this instanceof r?u:t;++c<f;)l[c]=e[c];for(;o--;)l[c++]=arguments[++i];return s.apply(a?n:this,l)}}function yt(t){return jt(t)||Pt(t)}function Ot(t,r,n){if(!xt(n))return!1;var e=typeof r;return!!("number"==e?Wt(n)&&function(t,r){var n=typeof t;return!!(r=null==r?s:r)&&("number"==n||"symbol"!=n&&k.test(t))&&t>-1&&t%1==0&&t<r}(r,n.length):"string"==e&&r in n)&&Mt(n[r],t)}function gt(t){var r=[];if(null!=t)for(var n in Object(t))r.push(n);return r}function St(t,r,n){return r=V(r===u?t.length-1:r,0),function(){for(var e=arguments,a=-1,u=V(e.length-r,0),i=Array(u);++a<u;)i[a]=e[r+a];a=-1;for(var o=Array(r+1);++a<r;)o[a]=e[a];return o[r]=n(i),t.apply(this,o)}}var vt=nr;function dt(t){return(null==t?0:t.length)?tt(t,1):[]}function bt(t){return t&&t.length?t[0]:u}function mt(t,r,n){for(var e=null==t?0:t.length,a=((n="number"==typeof n?n<0?V(e+n,0):n:0)||0)-1,u=r==r;++a<e;){var i=t[a];if(u?i===r:i!=i)return a}return-1}function kt(t){var r=Z(t);return r.__chain__=!0,r}var Ct=function(t){return function(r,n,e){var a=Object(r);if(!Wt(r)){var i=ct(n);r=Jt(r),n=function(t){return i(a[t],t,a)}}var o=t(r,n,e);return o>-1?a[i?r[o]:o]:u}}(function(t,r,n){var e=null==t?0:t.length;if(!e)return-1;var a=null==n?0:Bt(n);return a<0&&(a=V(e+a,0)),function(t,r,n,e){for(var a=t.length,u=n+(e?1:-1);e?u--:++u<a;)if(r(t[u],u,t))return u;return-1}(t,ct(r),a)});function Nt(t,r){return Y(t,ct(r))}function It(t,r,n){return function(t,r,n,e,a){return a(t,function(t,a,u){n=e?(e=!1,t):r(n,t,a,u)}),n}(t,ct(r),n,arguments.length<3,Y)}function Kt(t,r){var n;if("function"!=typeof r)throw new TypeError(i);return t=Bt(t),function(){return--t>0&&(n=r.apply(this,arguments)),t<=1&&(r=u),n}}var Ft=Et(function(t,r,n){return ht(t,32|f,r,n)}),Ut=Et(function(t,r){return q(t,1,r)}),wt=Et(function(t,r,n){return q(t,zt(r)||0,n)});function Mt(t,r){return t===r||t!=t&&r!=r}var Pt=it(function(){return arguments}())?it:function(t){return Gt(t)&&P.call(t,"callee")&&!x.call(t,"callee")},jt=Array.isArray;function Wt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}(t.length)&&!Lt(t)}var Dt=function(t){return Gt(t)&&at(t)==A};function Lt(t){if(!xt(t))return!1;var r=at(t);return r==h||r==y||r==p||r==S}function xt(t){var r=typeof t;return null!=t&&("object"==r||"function"==r)}function Gt(t){return null!=t&&"object"==typeof t}function Ht(t){return"number"==typeof t||Gt(t)&&at(t)==O}var Vt=function(t){return Gt(t)&&at(t)==v};function Zt(t){return"string"==typeof t||!jt(t)&&Gt(t)&&at(t)==d}var Bt=Number,zt=Number;function $t(t){return"string"==typeof t?t:null==t?"":t+""}var Qt=Tt(function(t,r){At(r,H(r),t)}),qt=Tt(function(t,r){At(r,gt(r),t)});var Yt=Et(function(t,r){t=Object(t);var n=-1,e=r.length,a=e>2?r[2]:u;for(a&&Ot(r[0],r[1],a)&&(e=1);++n<e;)for(var i=r[n],o=Xt(i),c=-1,f=o.length;++c<f;){var l=o[c],s=t[l];(s===u||Mt(s,M[l])&&!P.call(t,l))&&(t[l]=i[l])}return t});var Jt=H,Xt=gt,tr=function(t){return vt(St(t,u,dt),t+"")}(function(t,r){return null==t?{}:function(t,r){return t=Object(t),It(r,function(r,n){return n in t&&(r[n]=t[n]),r},{})}(t,r)});function rr(t){return null==t?[]:function(t,r){return lt(r,function(r){return t[r]})}(t,Jt(t))}function nr(t){return t}var er=ct;function ar(t,r,n){var e=Jt(r),a=et(r,e);null!=n||xt(r)&&(a.length||!e.length)||(n=r,r=t,t=this,a=et(r,Jt(r)));var u=!(xt(n)&&"chain"in n&&!n.chain),i=Lt(t);return Y(a,function(n){var e=r[n];t[n]=e,i&&(t.prototype[n]=function(){var r=this.__chain__;if(u||r){var n=t(this.__wrapped__);return(n.__actions__=pt(this.__actions__)).push({func:e,args:arguments,thisArg:t}),n.__chain__=r,n}return e.apply(t,K([this.value()],arguments))})}),t}function ur(){}Z.assignIn=qt,Z.before=Kt,Z.bind=Ft,Z.chain=kt,Z.compact=function(t){return X(t,Boolean)},Z.concat=function(){var t=arguments.length;if(!t)return[];for(var r=Array(t-1),n=arguments[0],e=t;e--;)r[e-1]=arguments[e];return K(jt(n)?pt(n):[n],tt(r,1))},Z.create=function(t,r){var n=B(t);return null==r?n:Qt(n,r)},Z.defaults=Yt,Z.defer=Ut,Z.delay=wt,Z.filter=function(t,r){return X(t,ct(r))},Z.flatten=dt,Z.flattenDeep=function(t){return null!=t&&t.length?tt(t,l):[]},Z.iteratee=er,Z.keys=Jt,Z.map=function(t,r){return lt(t,ct(r))},Z.matches=function(t){return st(Qt({},t))},Z.mixin=ar,Z.negate=function(t){if("function"!=typeof t)throw new TypeError(i);return function(){var r=arguments;return!t.apply(this,r)}},Z.once=function(t){return Kt(2,t)},Z.pick=tr,Z.slice=function(t,r,n){var e=null==t?0:t.length;return r=null==r?0:+r,n=n===u?e:+n,e?_t(t,r,n):[]},Z.sortBy=function(t,r){var n=0;return r=ct(r),lt(lt(t,function(t,e,a){return{value:t,index:n++,criteria:r(t,e,a)}}).sort(function(t,r){return function(t,r){if(t!==r){var n=t!==u,e=null===t,a=t==t,i=r!==u,o=null===r,c=r==r;if(!o&&t>r||e&&i&&c||!n&&c||!a)return 1;if(!e&&t<r||o&&n&&a||!i&&a||!c)return-1}return 0}(t.criteria,r.criteria)||t.index-r.index}),F("value"))},Z.tap=function(t,r){return r(t),t},Z.thru=function(t,r){return r(t)},Z.toArray=function(t){return Wt(t)?t.length?pt(t):[]:rr(t)},Z.values=rr,Z.extend=qt,ar(Z,Z),Z.clone=function(t){return xt(t)?jt(t)?pt(t):At(t,H(t)):t},Z.escape=function(t){return(t=$t(t))&&m.test(t)?t.replace(b,U):t},Z.every=function(t,r,n){return function(t,r){var n=!0;return Y(t,function(t,e,a){return n=!!r(t,e,a)}),n}(t,ct(r=n?u:r))},Z.find=Ct,Z.forEach=Nt,Z.has=function(t,r){return null!=t&&P.call(t,r)},Z.head=bt,Z.identity=nr,Z.indexOf=mt,Z.isArguments=Pt,Z.isArray=jt,Z.isBoolean=function(t){return!0===t||!1===t||Gt(t)&&at(t)==R},Z.isDate=Dt,Z.isEmpty=function(t){return Wt(t)&&(jt(t)||Zt(t)||Lt(t.splice)||Pt(t))?!t.length:!H(t).length},Z.isEqual=function(t,r){return ot(t,r)},Z.isFinite=function(t){return"number"==typeof t&&G(t)},Z.isFunction=Lt,Z.isNaN=function(t){return Ht(t)&&t!=+t},Z.isNull=function(t){return null===t},Z.isNumber=Ht,Z.isObject=xt,Z.isRegExp=Vt,Z.isString=Zt,Z.isUndefined=function(t){return t===u},Z.last=function(t){var r=null==t?0:t.length;return r?t[r-1]:u},Z.max=function(t){return t&&t.length?J(t,nr,ut):u},Z.min=function(t){return t&&t.length?J(t,nr,ft):u},Z.noConflict=function(){return I._===this&&(I._=D),this},Z.noop=ur,Z.reduce=It,Z.result=function(t,r,n){var e=null==t?u:t[r];return e===u&&(e=n),Lt(e)?e.call(t):e},Z.size=function(t){return null==t?0:(t=Wt(t)?t:H(t)).length},Z.some=function(t,r,n){return Rt(t,ct(r=n?u:r))},Z.uniqueId=function(t){var r=++j;return $t(t)+r},Z.each=Nt,Z.first=bt,ar(Z,function(){var t={};return nt(Z,function(r,n){P.call(Z.prototype,n)||(t[n]=r)}),t}(),{chain:!1}),Z.VERSION="4.17.11",Y(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],function(t){var r=(/^(?:replace|split)$/.test(t)?String.prototype:w)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",e=/^(?:pop|join|replace|shift)$/.test(t);Z.prototype[t]=function(){var t=arguments;if(e&&!this.__chain__){var a=this.value();return r.apply(jt(a)?a:[],t)}return this[n](function(n){return r.apply(jt(n)?n:[],t)})}}),Z.prototype.toJSON=Z.prototype.valueOf=Z.prototype.value=function(){return function(t,r){return It(r,function(t,r){return r.func.apply(r.thisArg,K([t],r.args))},t)}(this.__wrapped__,this.__actions__)},I._=Z,(a=function(){return Z}.call(r,n,r,e))===u||(e.exports=a)}).call(this)}).call(this,n(7),n(8)(t))},function(t,r,n){var e=n(4),a=n(5),u=n(6),i=Math.ceil,o=Math.max;t.exports=function(t,r,n){r=(n?a(t,r,n):void 0===r)?1:o(u(r),0);var c=null==t?0:t.length;if(!c||r<1)return[];for(var f=0,l=0,s=Array(i(c/r));f<c;)s[l++]=e(t,f,f+=r);return s}},function(t,r,n){"use strict";n.r(r);var e=n(0),a=n(2),u=n.n(a),i=n(1),o=n.n(i);let c,f;const l=["EAN-2","EAN-5","EAN-8","UPC-E","ISBN-10","UPC-A","EAN-13","ISBN-13","COMPOSITE","I2/5","DataBar","DataBar-Exp","Codabar","CODE-39","CODE-93","CODE-128","PDF417"];let s=null,E=null,_=null,p=null,R=null,A=null,T=null,h=null,y=null,O=null,g=null,S=null,v=null,d=e.STATE_RECOGNIZE,b=!1,m=null,k=[],C=!1,N=!1,I=!1,K=!1,F=[],U={},w={};function M(t){let r;const n=c._malloc(t.length*t.BYTES_PER_ELEMENT),e=n/t.BYTES_PER_ELEMENT,a=n/t.BYTES_PER_ELEMENT+t.length;switch(t.constructor.name){case"Int16Array":r=c.HEAP16.subarray(e,a);break;case"Int32Array":r=c.HEAP32.subarray(e,a);break;case"Uint8ClampedArray":case"Uint8Array":r=c.HEAPU8.subarray(e,a);break;case"Uint16Array":r=c.HEAPU16.subarray(e,a);break;case"Uint32Array":r=c.HEAPU32.subarray(e,a);break;case"Float32Array":r=c.HEAPF32.subarray(e,a);break;case"Float64Array":r=c.HEAPF64.subarray(e,a)}return r.set(t),r}function P(){_.set([R.size.width]),p.set([R.size.height]),A.set([k[0]]),T.set([k[1]]),h.set([k[2]]),y.set([k[3]])}function j(){c._systemParamInit(A.byteOffset,T.byteOffset,h.byteOffset,y.byteOffset)}function W(){c._initObjectInformation(_.byteOffset,p.byteOffset)}function D(t){c._free(t.byteOffset)}function L(t){E?E.length!==t.data.length?(D(E),E=M(t.data)):E.set(t.data):E=M(t.data),c._registerRefImg(t.width,t.height,E.byteOffset,K.byteOffset),postMessage({cmd:e.WORKER_SUCCESS_SET_REFERENCE,result:!0}),K[0]=1}function x(t,r){let n=[],a=[],i=[],c=u()(r,16);return o.a.map(U,t=>{t.trackFlag?(t.state=t.trackStateFlag?e.STATE_TRACK_MOVE:e.STATE_TRACK_START,t.trackStateFlag=t.trackStateFlag?t.trackStateFlag:!t.trackStateFlag):(t.state=t.trackStateFlag?e.STATE_TRACK_END:e.STATE_RECOGNIZE,t.trackStateFlag=t.trackStateFlag?!t.trackStateFlag:t.trackStateFlag)}),t.filter((t,r)=>{if(t>=0){const e=`marker_${t}`;a.push(c[r]),n.push(e),i.push(U[e].state)}}),{id:n,pose:a,state:i}}function G(t){switch(s?s.length!==t.data.length?(D(s),s=M(t.data)):s.set(t.data):s=M(t.data),f){case"PLANAR":1!==C[0]?(c._detectorUpdate(t.width,t.height,s.byteOffset,g.byteOffset),d=b?e.STATE_TRACK_END:e.STATE_RECOGNIZE,b=b?!b:b):(c._trackerUpdate(t.width,t.height,s.byteOffset,g.byteOffset),d=b?e.STATE_TRACK_MOVE:e.STATE_TRACK_START,b=b||!b),postMessage({cmd:e.WORKER_TRACK_SUCCESS,pose:g.toString(),trackState:d});break;case"QRCODE":const r=c._trackerUpdate(t.width,t.height,s.byteOffset,g.byteOffset,m.byteOffset),n=c.UTF8ToString(r);!function(t,r,n,a){let u=null,i=null,o=e.STATE_RECOGNIZE;if(!isNaN(t)&&a&&(1===t||2===t))switch(t){case 1:u=a,i="QR Code",w.trackFlag=w.uri===u,w.trackFlag?(w.state=w.trackStateFlag?e.STATE_TRACK_MOVE:e.STATE_TRACK_START,w.trackStateFlag=w.trackStateFlag?w.trackStateFlag:!w.trackStateFlag):(w.state=w.trackStateFlag?e.STATE_TRACK_END:e.STATE_RECOGNIZE,w.trackStateFlag=w.trackStateFlag?!w.trackStateFlag:w.trackStateFlag),o=w.state;break;case 2:u=a,i=l[r]}postMessage({cmd:e.WORKER_TRACK_SUCCESS,pose:n.toString(),trackState:o,detectedString:u,typeName:i})}(parseInt(m.slice(0,1),10),parseInt(m.slice(1,2),10),g,n);break;case"MARKER":c._trackerUpdate(t.width,t.height,s.byteOffset,O.byteOffset,S.byteOffset),o.a.map(U,t=>{t.trackFlag=!1});const a=o.a.filter(O,t=>t>=0).map(t=>`marker_${t}`);for(let t in a)U[a[t]].trackFlag=!0;const u=x(O,S);postMessage({cmd:e.WORKER_TRACK_SUCCESS,pose:u.pose,marker:u.id,trackState:u.state})}}onmessage=(t=>{switch(t.data.cmd){case"selectWorker":!function(t){switch(f=t,t){case"QRCODE":importScripts("https://s3.ap-northeast-2.amazonaws.com/letsee-dev/webar/qrcode_tracker.min.js"),QrTracker({onRuntimeInitialized(){}}).then(r=>{c=r,postMessage({cmd:e.WORKER_ON_RUNTIME_INITIALIZED,type:t})});break;case"MARKER":importScripts("https://s3.ap-northeast-2.amazonaws.com/letsee-dev/webar/marker_tracker.min.js"),MarkerTracker({onRuntimeInitialized(){}}).then(r=>{c=r,postMessage({cmd:e.WORKER_ON_RUNTIME_INITIALIZED,type:t})});break;case"PLANAR":importScripts("https://s3.ap-northeast-2.amazonaws.com/letsee-dev/webar/letsee_tracker.min.js"),LetseeTracker({onRuntimeInitialized(){}}).then(r=>{c=r,postMessage({cmd:e.WORKER_ON_RUNTIME_INITIALIZED,type:t})})}}(t.data.type);break;case e.WORKER_UPDATE_INFORMATION:R=t.data.entity,k=t.data.parameter,t.data.markerList&&t.data.markerList.length&&"MARKER"===f?(F=[...t.data.markerList],U=function(t){let r=o.a.map(t,t=>t.replace("marker_",""));r.length<5&&(r=[...r,...Array(5-r.length).fill(-1)]),(v=M(new Int32Array(5))).set(r),c._markerArrayInit(v.byteOffset);let n={};return o.a.forEach(t,t=>{n[t]={pose:Array(16).fill(-1),state:e.STATE_RECOGNIZE,trackStateFlag:!1,trackFlag:!1}}),n}(F)):"QRCODE"===f&&(w=function(t){return{state:e.STATE_RECOGNIZE,trackStateFlag:!1,trackFlag:!1,uri:t}}("http://www.letsee.io/"));break;case e.WORKER_SET_REFERENCE_IMAGE:"PLANAR"===f?L(t.data.img_data):(K[0]=1,postMessage({cmd:e.WORKER_SUCCESS_SET_REFERENCE,result:!0}));break;case e.WORKER_PROCESS_FRAME:if(void 0===t.data.img_data||null===t.data.img_data||0===t.data.img_data.data.length)throw new Error("No frame data");K[0]?G(t.data.img_data):postMessage({cmd:e.WORKER_POST_NULL});break;case e.WORKER_AUTH:_=M(new Float64Array(1)),p=M(new Float64Array(1)),N=M(new Uint8Array(1)),I=M(new Uint8Array(1)),C=M(new Uint8Array(1)),K=M(new Uint8Array(1)),A=M(new Float64Array(1)),T=M(new Float64Array(1)),h=M(new Float64Array(1)),y=M(new Float64Array(1)),O=M(new Int32Array(5)),g=M(new Float64Array(16)),S=M(new Float64Array(80)),O.set(Array(5).fill(-1)),g.set(Array(16).fill(-1)),S.set(Array(80).fill(-1)),(m=M(new Int32Array(2))).set(Array(2).fill(0)),P(),c._initApplication(I.byteOffset,N.byteOffset,C.byteOffset),j(),W(),function(t){c._authentication(c.allocate(c.intArrayFromString(t),"i8",c.ALLOC_NORMAL));let r=0;const n=setInterval(function(){postMessage({cmd:e.WORKER_AUTH_RESULT,result:"pending"}),1===N[0]&&(postMessage({cmd:e.WORKER_AUTH_RESULT,result:"success"}),clearInterval(n)),0===N[0]&&(postMessage({cmd:e.WORKER_AUTH_RESULT,result:"fail"}),clearInterval(n)),r>100&&(postMessage({cmd:e.WORKER_AUTH_RESULT,result:"timeout"}),clearInterval(n)),r++},100)}(t.data.appKey);break;case e.WORKER_TEST:console.log("[WORKER] worker test call");break;case e.WORKER_UPDATE_REFERENCE_IMAGE:C.set([0]),P(),W(),L(t.data.img_data);break;case e.WORKER_UPDATE_FRAME:C.set([0]),k=t.data.parameter,P(),j()}})},function(t,r){t.exports=function(t,r,n){var e=-1,a=t.length;r<0&&(r=-r>a?0:a+r),(n=n>a?a:n)<0&&(n+=a),a=r>n?0:n-r>>>0,r>>>=0;for(var u=Array(a);++e<a;)u[e]=t[e+r];return u}},function(t,r){t.exports=function(){return!1}},function(t,r){t.exports=function(t){return t}},function(t,r){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,r){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}}]);',null)}},function(t,e,i){"use strict";var n=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var i;try{(i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),i=i.getBlob()}catch(e){i=new Blob([t])}return new Worker(n.createObjectURL(i))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!e)throw Error("Inline worker is not supported");return new Worker(e)}}},function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.HTTP="&@http@;",this.HTTPS="&@https@;",this.PROPERTY_TARGET="-letsee-target",this.PROPERTY_POSITION="-letsee-position",this.dataMap={}}return function(t,e,i){e&&n(t.prototype,e),i&&n(t,i)}(t,[{key:"parse",value:function(){this.dataMap={};for(var e=document.getElementsByTagName("style"),i=0;i<e.length;i+=1){var n=e[i];if("place"===n.media){var a=t.removeAnnotations(n.innerHTML);this.parseData(a),t.removeMedia(n)}}return Object.values(this.dataMap)}},{key:"parseData",value:function(e){for(var i=e.split("}"),n=0;n<i.length-1;n+=1){for(var a=i[n].split("{"),r=a[0].trim(),s=a[1].split(";"),o=null,h={selector:r,pose:[0,0,0]},u=0;u<s.length-1;u+=1){var c=s[u],l=c.indexOf(":"),f=c.substring(0,l).trim(),d=c.substring(l+1).trim();if(f===this.PROPERTY_TARGET){var m=t.parseTarget(d);o={type:m[0],uri:m[1]}}else if(f===this.PROPERTY_POSITION){var p=t.parsePosition(d),y=p[0],v=p[1].split(",");h.pose=[parseFloat(v[0]),parseFloat(v[1]),parseFloat(v[2])],"geo"===y&&(o={type:"geo",uri:"geolocation"})}}if(o){this.dataMap[o.uri]||(this.dataMap[o.uri]={entity:o,renderables:[]});var _=this.dataMap[o.uri];_.entity=o,_.renderables.push(h)}}}}],[{key:"removeAnnotations",value:function(t){for(var e,i,n=t;-1!==e;){e=n.indexOf("/*"),i=n.indexOf("*/");var a=n.substring(e,i+2);n=n.replace(a,"")}return n}},{key:"parseTarget",value:function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),n=(t.substring(0,e-1).trim(),t.substring(e,i).replace(/"/g,"").replace(/'/g,"")),a=t.substring(i+1,t.length).trim();return""!==a&&" "!==a||(a="object"),[a,n]}},{key:"parsePosition",value:function(t){var e=t.indexOf("(")+1,i=t.indexOf(")");return[t.substring(0,e-1).trim(),t.substring(e,i).replace(/"/g,"").replace(/'/g,"")]}},{key:"getBase",value:function(){var t=window.location.href.split("/");t[t.length-1].indexOf(".html")>-1&&t.pop();var e=t.join("/");return"/"!==e.substr(e.length-1)&&(e+="/"),e}},{key:"removeMedia",value:function(t){var e=document.getElementsByTagName("head")[0],i=document.createElement("style");i.setAttribute("type","text/css"),i.appendChild(document.createTextNode(t.innerHTML)),e.replaceChild(i,t)}}]),t}());e.default=a,t.exports=e.default},function(t,e,i){var n=i(3);t.exports=function(t,e){return!(null==t||!t.length)&&n(t,e,0)>-1}},function(t,e,i){var n=i(3),a=i(14),r=Math.max;t.exports=function(t,e,i){var s=null==t?0:t.length;if(!s)return-1;var o=null==i?0:a(i);return o<0&&(o=r(s+o,0)),n(t,e,o)}},function(t,e){t.exports=function(t){return t}},function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=null,s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r||(r=this),this.entityList=[],this.entityState=[],this.markerList=[],this.codeList=[]}return function(t,e,i){e&&a(t.prototype,e),i&&a(t,i)}(t,[{key:"initEntity",value:function(t){var e=this,i=[];return this.entityList=t.map(function(t){var e=[];return e.push(t.entity.uri),e}),this.entityList.forEach(function(t,n,a){i.push(fetch(t).then(function(t){return t.json()}).then(function(t){var n={entity:{uri:t.uri,letseeMarkerId:t.letseeMarkerId||null,codeString:t.codeString||null,name:t.name||null,image:t.image||null,size:{width:t.size.width||0,height:t.size.height||0,depth:t.size.height||0,unit:t.size.unit||"mm"}},pixelSize:{width:t.size.width||0,height:t.size.height||0,depth:t.size.height||0,unit:t.size.unit||"mm"},scale:t.scale||1};e.entityState.push(e.parseEntity(n)),null!==n.entity.letseeMarkerId&&e.markerList.push(n.entity.letseeMarkerId),null!==n.entity.codeString&&e.codeList.push(n.entity.codeString),i.push(e.entityState)}).catch(function(t){console.log(t)}))}),new Promise(function(t,n){Promise.all(i).then(function(){t(e.entityState)})})}},{key:"parseEntity",value:function(t){return function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},a=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),a.forEach(function(e){n(t,e,i[e])})}return t}({},{entity:{type:"object",uri:null,letseeMarkerId:null,codeString:null,name:null,image:null,size:{width:null,height:null,depth:0,unit:"mm"}},pixelSize:{width:null,height:null,depth:null,unit:"px"},scale:null},t)}}]),t}();e.default=s,t.exports=e.default},function(t,e,i){i(17)(i(18))},function(t,e){t.exports=function(t){function e(t){"undefined"!=typeof console&&(console.error||console.log)("[Script Loader]",t)}try{"undefined"!=typeof execScript&&"undefined"!=typeof attachEvent&&"undefined"==typeof addEventListener?execScript(t):"undefined"!=typeof eval?eval.call(null,t):e("EvalError: No eval function available")}catch(t){e(t)}}},function(t,e){t.exports='!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("LetseeEngine",[],e):"object"==typeof exports?exports.LetseeEngine=e():t.LetseeEngine=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=19)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,a,s,r,o,h,l=c(i(1)),u=(c(i(12)),c(i(3)),i(2));function c(t){return t&&t.__esModule?t:{default:t}}function f(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=!0,a=!1,s=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(t){a=!0,s=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw s}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function d(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var m=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"isMatrix4",!0),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}return function(t,e,i){e&&d(t.prototype,e),i&&d(t,i)}(t,[{key:"set",value:function(t,e,i,n,a,s,r,o,h,l,u,c,f,d,m,y){var p=this.elements;return p[0]=t,p[4]=e,p[8]=i,p[12]=n,p[1]=a,p[5]=s,p[9]=r,p[13]=o,p[2]=h,p[6]=l,p[10]=u,p[14]=c,p[3]=f,p[7]=d,p[11]=m,p[15]=y,this.onChangeCallback(),this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)}},{key:"clone",value:function(){return(new t).fromArray(this.elements)}},{key:"copy",value:function(t){var e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this.onChangeCallback(),this}},{key:"copyPosition",value:function(t){var e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this.onChangeCallback(),this}},{key:"extractBasis",value:function(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1)}},{key:"extractRotation",value:function(t){void 0===n&&(n=new l.default);var e=this.elements,i=t.elements,a=1/n.setFromMatrixColumn(t,0).length(),s=1/n.setFromMatrixColumn(t,1).length(),r=1/n.setFromMatrixColumn(t,2).length();return e[0]=i[0]*a,e[1]=i[1]*a,e[2]=i[2]*a,e[4]=i[4]*s,e[5]=i[5]*s,e[6]=i[6]*s,e[8]=i[8]*r,e[9]=i[9]*r,e[10]=i[10]*r,this.onChangeCallback(),this}},{key:"makeRotationFromEuler",value:function(t){var e=this.elements,i=t.x,n=t.y,a=t.z,s=t.order,r=Math.cos(i),o=Math.sin(i),h=Math.cos(n),l=Math.sin(n),u=Math.cos(a),c=Math.sin(a);return"XYZ"===s?(e[0]=h*u,e[4]=-h*c,e[8]=l,e[1]=r*c+o*u*l,e[5]=r*u-o*c*l,e[9]=-o*h,e[2]=o*c-r*u*l,e[6]=o*u+r*c*l,e[10]=r*h):"YXZ"===s?(e[0]=h*u+l*c*o,e[4]=l*u*o-h*c,e[8]=r*l,e[1]=r*c,e[5]=r*u,e[9]=-o,e[2]=h*c*o-l*u,e[6]=l*c+h*u*o,e[10]=r*h):"ZXY"===s?(e[0]=h*u-l*c*o,e[4]=-r*c,e[8]=l*u+h*c*o,e[1]=h*c+l*u*o,e[5]=r*u,e[9]=l*c-h*u*o,e[2]=-r*l,e[6]=o,e[10]=r*h):"ZYX"===s?(e[0]=h*u,e[4]=o*u*l-r*c,e[8]=r*u*l+o*c,e[1]=h*c,e[5]=o*c*l+r*u,e[9]=r*c*l-o*u,e[2]=-l,e[6]=o*h,e[10]=r*h):"YZX"===s?(e[0]=h*u,e[4]=o*l-r*h*c,e[8]=o*h*c+r*l,e[1]=c,e[5]=r*u,e[9]=-o*u,e[2]=-l*u,e[6]=r*l*c+o*h,e[10]=r*h-o*l*c):"XZY"===s&&(e[0]=h*u,e[4]=-c,e[8]=l*u,e[1]=r*h*c+o*l,e[5]=r*u,e[9]=r*l*c-o*h,e[2]=o*h*c-r*l,e[6]=o*u,e[10]=o*l*c+r*h),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this.onChangeCallback(),this}},{key:"makeRotationFromQuaternion",value:function(t){var e=t.x,i=t.y,n=t.z,a=t.w,s=e+e,r=i+i,o=n+n,h=e*s,l=e*r,u=e*o,c=i*r,f=i*o,d=n*o,m=a*s,y=a*r,p=a*o;return this.set(1-(c+d),l-p,u+y,0,l+p,1-(h+d),f-m,0,u-y,f+m,1-(h+c),0,0,0,0,1)}},{key:"lookAt",value:function(t,e,i){void 0===a&&(a=new l.default),void 0===s&&(s=new l.default),void 0===r&&(r=new l.default);var n=this.elements;return r.subVectors(t,e),0===r.lengthSq()&&(r._z=1),r.normalize(),a.crossVectors(i,r),0===a.lengthSq()&&(r._z+=1e-4,a.crossVectors(i,r)),a.normalize(),s.crossVectors(r,a),n[0]=a._x,n[4]=s._x,n[8]=r._x,n[1]=a._y,n[5]=s._y,n[9]=r._y,n[2]=a._z,n[6]=s._z,n[10]=r._z,this.onChangeCallback(),this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(t,e){var i=t.elements,n=e.elements,a=this.elements,s=f(i,16),r=s[0],o=s[1],h=s[2],l=s[3],u=s[4],c=s[5],d=s[6],m=s[7],y=s[8],p=s[9],v=s[10],_=s[11],M=s[12],b=s[13],g=s[14],x=s[15],k=f(n,16),w=k[0],C=k[1],j=k[2],E=k[3],P=k[4],S=k[5],z=k[6],O=k[7],T=k[8],q=k[9],A=k[10],R=k[11],L=k[12],N=k[13],I=k[14],G=k[15];return a[0]=r*w+u*C+y*j+M*E,a[4]=r*P+u*S+y*z+M*O,a[8]=r*T+u*q+y*A+M*R,a[12]=r*L+u*N+y*I+M*G,a[1]=o*w+c*C+p*j+b*E,a[5]=o*P+c*S+p*z+b*O,a[9]=o*T+c*q+p*A+b*R,a[13]=o*L+c*N+p*I+b*G,a[2]=h*w+d*C+v*j+g*E,a[6]=h*P+d*S+v*z+g*O,a[10]=h*T+d*q+v*A+g*R,a[14]=h*L+d*N+v*I+g*G,a[3]=l*w+m*C+_*j+x*E,a[7]=l*P+m*S+_*z+x*O,a[11]=l*T+m*q+_*A+x*R,a[15]=l*L+m*N+_*I+x*G,this.onChangeCallback(),this}},{key:"multiplyScalar",value:function(t){for(var e=this.elements,i=0;i<e.length;i++)e[i]*=t;return this.onChangeCallback(),this}},{key:"determinant",value:function(){var t=f(this.elements,16),e=t[0],i=t[1],n=t[2],a=t[3],s=t[4],r=t[5],o=t[6],h=t[7],l=t[8],u=t[9],c=t[10],d=t[11],m=t[12],y=t[13],p=t[14];return a*(m*u*o-l*y*o-m*r*c+s*y*c+l*r*p-s*u*p)+h*(e*u*p-e*y*c+m*i*c-l*i*p+l*y*n-m*u*n)+d*(e*y*o-e*r*p-m*i*o+s*i*p+m*r*n-s*y*n)+t[15]*(-l*r*n-e*u*o+e*r*c+l*i*o-s*i*c+s*u*n)}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this.onChangeCallback(),this}},{key:"setPosition",value:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this.onChangeCallback(),this}},{key:"getInverse",value:function(t,e){var i=this.elements,n=f(t.elements,16),a=n[0],s=n[1],r=n[2],o=n[3],h=n[4],l=n[5],u=n[6],c=n[7],d=n[8],m=n[9],y=n[10],p=n[11],v=n[12],_=n[13],M=n[14],b=n[15],g=m*M*c-_*y*c+_*u*p-l*M*p-m*u*b+l*y*b,x=v*y*c-d*M*c-v*u*p+h*M*p+d*u*b-h*y*b,k=d*_*c-v*m*c+v*l*p-h*_*p-d*l*b+h*m*b,w=v*m*u-d*_*u-v*l*y+h*_*y+d*l*M-h*m*M,C=a*g+s*x+r*k+o*w;if(0===C){var j="Matrix4.getInverse(): can\'t invert matrix, determinant is 0";if(!0===e)throw new Error(j);return console.warn(j),this.onChangeCallback(),this.identity()}var E=1/C;return i[0]=g*E,i[1]=(_*y*o-m*M*o-_*r*p+s*M*p+m*r*b-s*y*b)*E,i[2]=(l*M*o-_*u*o+_*r*c-s*M*c-l*r*b+s*u*b)*E,i[3]=(m*u*o-l*y*o-m*r*c+s*y*c+l*r*p-s*u*p)*E,i[4]=x*E,i[5]=(d*M*o-v*y*o+v*r*p-a*M*p-d*r*b+a*y*b)*E,i[6]=(v*u*o-h*M*o-v*r*c+a*M*c+h*r*b-a*u*b)*E,i[7]=(h*y*o-d*u*o+d*r*c-a*y*c-h*r*p+a*u*p)*E,i[8]=k*E,i[9]=(v*m*o-d*_*o-v*s*p+a*_*p+d*s*b-a*m*b)*E,i[10]=(h*_*o-v*l*o+v*s*c-a*_*c-h*s*b+a*l*b)*E,i[11]=(d*l*o-h*m*o-d*s*c+a*m*c+h*s*p-a*l*p)*E,i[12]=w*E,i[13]=(d*_*r-v*m*r+v*s*y-a*_*y-d*s*M+a*m*M)*E,i[14]=(v*l*r-h*_*r-v*s*u+a*_*u+h*s*M-a*l*M)*E,i[15]=(h*m*r-d*l*r+d*s*u-a*m*u-h*s*y+a*l*y)*E,this.onChangeCallback(),this}},{key:"scale",value:function(t){var e=this.elements,i=t.x,n=t.y,a=t.z;return e[0]*=i,e[4]*=n,e[8]*=a,e[1]*=i,e[5]*=n,e[9]*=a,e[2]*=i,e[6]*=n,e[10]*=a,e[3]*=i,e[7]*=n,e[11]*=a,this.onChangeCallback(),this}},{key:"getMaxScaleOnAxis",value:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],n=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,n))}},{key:"makeTranslation",value:function(t,e,i){return this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1)}},{key:"makeRotationX",value:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1)}},{key:"makeRotationY",value:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1)}},{key:"makeRotationZ",value:function(t){var e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1)}},{key:"makeRotationAxis",value:function(t,e){var i=Math.cos(e),n=Math.sin(e),a=1-i,s=t.x,r=t.y,o=t.z,h=a*s,l=a*r;return this.set(h*s+i,h*r-n*o,h*o+n*r,0,h*r+n*o,l*r+i,l*o-n*s,0,h*o-n*r,l*o+n*s,a*o*o+i,0,0,0,0,1)}},{key:"makeScale",value:function(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1)}},{key:"makeShear",value:function(t,e,i){return this.set(1,e,i,0,t,1,i,0,t,e,1,0,0,0,0,1)}},{key:"compose",value:function(t,e,i){return this.makeRotationFromQuaternion(e),this.scale(i),this.setPosition(t),this}},{key:"decompose",value:function(e,i,n){void 0===o&&(o=new l.default),void 0===h&&(h=new t);var a=this.elements,s=o.set(a[0],a[1],a[2]).length(),r=o.set(a[4],a[5],a[6]).length(),u=o.set(a[8],a[9],a[10]).length();this.determinant()<0&&(s=-s),e.set(a[12],a[13],a[14]),h.copy(this);var c=1/s,f=1/r,d=1/u;return h.elements[0]*=c,h.elements[1]*=c,h.elements[2]*=c,h.elements[4]*=f,h.elements[5]*=f,h.elements[6]*=f,h.elements[8]*=d,h.elements[9]*=d,h.elements[10]*=d,i.setFromRotationMatrix(h),n.set(s,r,u),this}},{key:"makeFrustum",value:function(t,e,i,n,a,s){var r=2*a/(e-t),o=2*a/(i-n),h=(e+t)/(e-t),l=(i+n)/(i-n),u=-(s+a)/(s-a),c=-2*s*a/(s-a);return this.set(0,-r,h,0,-o,0,l,0,0,0,-u,c,0,0,1,0)}},{key:"makePerspective",value:function(t,e,i,n){var a=i*Math.tan((0,u.degToRad)(.5*t)),s=-a,r=s*e,o=a*e;return this.makeFrustum(r,o,a,s,i,n)}},{key:"makeOrthographic",value:function(t,e,i,n,a,s){this.elements;var r=1/(e-t),o=1/(i-n),h=1/(s-a),l=(e+t)*r,u=(i+n)*o,c=(s+a)*h;return this.set(2*r,0,0,-l,0,2*o,0,-u,0,0,-2*h,-c,0,0,0,1)}},{key:"equals",value:function(t){for(var e=this.elements,i=t.elements,n=0;n<16;n+=1)if(e[n]!==i[n])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.elements,n=0;n<i.length;n+=1)i[n]=t[n+e];return this.onChangeCallback(),this}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.elements,n=0;n<16;n+=1)t[e+n]=i[n];return t}},{key:"onChange",value:function(t){return this.onChangeCallback=t,this}},{key:"onChangeCallback",value:function(){}},{key:"toCSS3D",value:function(e){var i=this.elements,n=[-i[1],-i[0],-i[2],-i[3],-i[5],-i[4],-i[6],-i[7],-i[9],-i[8],-i[10],-i[11],-i[13],-i[12],-i[14],i[15]];return(e||new t).fromArray(n)}}]),t}();e.default=m,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,a,s,r,o,h,l=i(2),u=f(i(0)),c=f(i(3));function f(t){return t&&t.__esModule?t:{default:t}}function d(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var m=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"isVector2",!0),this._x=e,this._y=i,this._z=n}return function(t,e,i){e&&d(t.prototype,e),i&&d(t,i)}(t,[{key:"set",value:function(t,e,i){return this._x=t,this._y=e,this._z=i,this.onChangeCallback(),this}},{key:"setScalar",value:function(t){return this._x=t,this._y=t,this._z=t,this.onChangeCallback(),this}},{key:"setX",value:function(t){return this._x=t,this.onChangeCallback(),this}},{key:"setY",value:function(t){return this._y=t,this.onChangeCallback(),this}},{key:"setZ",value:function(t){return this._z=t,this.onChangeCallback(),this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this._x=e,this.onChangeCallback();break;case 1:this._y=e,this.onChangeCallback();break;case 2:this._z=e,this.onChangeCallback();break;default:throw new Error("index is out of range: ".concat(t))}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this._x;case 1:return this._y;case 2:return this._z;default:throw new Error("index is out of range: ".concat(t))}}},{key:"clone",value:function(){return new t(this._x,this._y,this._z)}},{key:"copy",value:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this.onChangeCallback(),this}},{key:"add",value:function(t){return this._x+=t._x,this._y+=t._y,this._z+=t._z,this.onChangeCallback(),this}},{key:"addScalar",value:function(t){return this._x+=t,this._y+=t,this._z+=t,this.onChangeCallback(),this}},{key:"addVectors",value:function(t,e){return this._x=t._x+e._x,this._y=t._y+e._y,this._z=t._z+e._z,this.onChangeCallback(),this}},{key:"addScaledVector",value:function(t,e){return this._x+=t._x*e,this._y+=t._y*e,this._z+=t._z*e,this.onChangeCallback(),this}},{key:"sub",value:function(t){return this._x-=t._x,this._y-=t._y,this._z-=t._z,this.onChangeCallback(),this}},{key:"subScalar",value:function(t){return this._x-=t,this._y-=t,this._z-=t,this.onChangeCallback(),this}},{key:"subVectors",value:function(t,e){return this._x=t._x-e._x,this._y=t._y-e._y,this._z=t._z-e._z,this.onChangeCallback(),this}},{key:"multiply",value:function(t){return this._x*=t._x,this._y*=t._y,this._z*=t._z,this.onChangeCallback(),this}},{key:"multiplyScalar",value:function(t){return this._x*=t,this._y*=t,this._z*=t,this.onChangeCallback(),this}},{key:"multiplyVectors",value:function(t,e){return this._x=t._x*e._x,this._y=t._y*e._y,this._z=t._z*e._z,this.onChangeCallback(),this}},{key:"applyEuler",value:function(t){return void 0===n&&(n=new c.default),this.applyQuaternion(n.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,e){return void 0===a&&(a=new c.default),this.applyQuaternion(a.setFromAxisAngle(t,e))}},{key:"applyMatrix4",value:function(t){var e=this._x,i=this._y,n=this._z,a=t.elements;this._x=a[0]*e+a[4]*i+a[8]*n+a[12],this._y=a[1]*e+a[5]*i+a[9]*n+a[13],this._z=a[2]*e+a[6]*i+a[10]*n+a[14];var s=a[3]*e+a[7]*i+a[11]*n+a[15];return this.divideScalar(s)}},{key:"applyQuaternion",value:function(t){var e=this._x,i=this._y,n=this._z,a=t.x,s=t.y,r=t.z,o=t.w,h=o*e+s*n-r*i,l=o*i+r*e-a*n,u=o*n+a*i-s*e,c=-a*e-s*i-r*n;return this._x=h*o+c*-a+l*-r-u*-s,this._y=l*o+c*-s+u*-a-h*-r,this._z=u*o+c*-r+h*-s-l*-a,this.onChangeCallback(),this}},{key:"project",value:function(t){return void 0===s&&(s=new u.default),s.multiplyMatrices(t.projectionMatrix,s.getInverse(t.matrixWorld)),this.applyMatrix4(s)}},{key:"unproject",value:function(t){return void 0===r&&(r=new u.default),r.multiplyMatrices(t.matrixWorld,r.getInverse(t.projectionMatrix)),this.applyMatrix4(r)}},{key:"transformDirection",value:function(t){var e=this._x,i=this._y,n=this._z,a=t.elements;return this._x=a[0]*e+a[4]*i+a[8]*n,this._y=a[1]*e+a[5]*i+a[9]*n,this._z=a[2]*e+a[6]*i+a[10]*n,this.normalize()}},{key:"divide",value:function(t){return this._x/=t._x,this._y/=t._y,this._z/=t._z,this.onChangeCallback(),this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this._x=Math.min(this._x,t._x),this._y=Math.min(this._y,t._y),this._z=Math.min(this._z,t._z),this.onChangeCallback(),this}},{key:"max",value:function(t){return this._x=Math.max(this._x,t._x),this._y=Math.max(this._y,t._y),this._z=Math.max(this._z,t._z),this.onChangeCallback(),this}},{key:"clamp",value:function(t,e){return this._x=Math.max(t._x,Math.min(e._x,this._x)),this._y=Math.max(t._y,Math.min(e._y,this._y)),this._z=Math.max(t._z,Math.min(e._z,this._z)),this.onChangeCallback(),this}},{key:"clampScalar",value:function(t,e){return this._x=Math.max(t,Math.min(e,this._x)),this._y=Math.max(t,Math.min(e,this._y)),this._z=Math.max(t,Math.min(e,this._z)),this.onChangeCallback(),this}},{key:"clampLength",value:function(t,e){var i=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,i))/i)}},{key:"floor",value:function(){return this._x=Math.floor(this._x),this._y=Math.floor(this._y),this._z=Math.floor(this._z),this.onChangeCallback(),this}},{key:"ceil",value:function(){return this._x=Math.ceil(this._x),this._y=Math.ceil(this._y),this._z=Math.ceil(this._z),this.onChangeCallback(),this}},{key:"round",value:function(){return this._x=Math.round(this._x),this._y=Math.round(this._y),this._z=Math.round(this._z),this.onChangeCallback(),this}},{key:"roundToZero",value:function(){return this._x=this._x<0?Math.ceil(this._x):Math.floor(this._x),this._y=this._y<0?Math.ceil(this._y):Math.floor(this._y),this._z=this._z<0?Math.ceil(this._z):Math.floor(this._z),this.onChangeCallback(),this}},{key:"negate",value:function(){return this._x=-this._x,this._y=-this._y,this._z=-this._z,this.onChangeCallback(),this}},{key:"dot",value:function(t){return this._x*t._x+this._y*t._y+this._z*t._z}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z)}},{key:"lengthManhattan",value:function(){return Math.abs(this._x)+Math.abs(this._y)+Math.abs(this._z)}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"setLength",value:function(t){return this.multiplyScalar(t/this.length())}},{key:"lerp",value:function(t,e){return this._x+=(t._x-this._x)*e,this._y+=(t._y-this._y)*e,this._z+=(t._z-this._z)*e,this.onChangeCallback(),this}},{key:"lerpVectors",value:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)}},{key:"cross",value:function(t){var e=this._x,i=this._y,n=this._z;return this._x=i*t._z-n*t._y,this._y=n*t._x-e*t._z,this._z=e*t._y-i*t._x,this.onChangeCallback(),this}},{key:"crossVectors",value:function(t,e){var i=t._x,n=t._y,a=t._z,s=e._x,r=e._y,o=e._z;return this._x=n*o-a*r,this._y=a*s-i*o,this._z=i*r-n*s,this.onChangeCallback(),this}},{key:"projectOnVector",value:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)}},{key:"projectOnPlane",value:function(e){return void 0===o&&(o=new t),o.copy(this).projectOnVector(e),this.sub(o)}},{key:"reflect",value:function(e){return void 0===h&&(h=new t),this.sub(h.copy(e).multiplyScalar(2*this.dot(e)))}},{key:"angleTo",value:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos((0,l.clamp)(e,-1,1))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this._x-t._x,i=this._y-t._y,n=this._z-t._z;return e*e+i*i+n*n}},{key:"distanceToManhattan",value:function(t){return Math.abs(this._x-t._x)+Math.abs(this._y-t._y)+Math.abs(this._z-t._z)}},{key:"setFromMatrixPosition",value:function(t){return this.setFromMatrixColumn(t,3)}},{key:"setFromMatrixScale",value:function(t){var e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),n=this.setFromMatrixColumn(t,2).length();return this._x=e,this._y=i,this._z=n,this.onChangeCallback(),this}},{key:"setFromMatrixColumn",value:function(t,e){return this.fromArray(t.elements,4*e)}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this.onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t}},{key:"onChange",value:function(t){return this.onChangeCallback=t,this}},{key:"onChangeCallback",value:function(){}},{key:"x",get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}}]),t}();e.default=m,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.degToRad=r,e.radToDeg=o,e.worldToScreen=h,e.clamp=l,e.euclideanModulo=u,e.mapLinear=c,e.lerp=f,e.smoothstep=d,e.smootherstep=m,e.randInt=y,e.randFloat=p,e.randFloatSpread=v,e.isPowerOfTwo=_,e.nearestPowerOfTwo=M,e.nextPowerOfTwo=b,e.default=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(i(13));var a=Math.PI/180,s=180/Math.PI;function r(t){return t*a}function o(t){return t*s}function h(t){var e=LetseeEngine.camera;if(e){var i=t.clone();return i.project(e),(new n.default).set((i.x+1)*(screen.width/2),(1-i.y)*(screen.height/2))}return console.error("Camera is not initialized"),null}function l(t,e,i){return Math.max(e,Math.min(i,t))}function u(t,e){return(t%e+e)%e}function c(t,e,i,n,a){return n+(t-e)*(a-n)/(i-e)}function f(t,e,i){return(1-i)*t+i*e}function d(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*(3-2*t)}function m(t,e,i){return t<=e?0:t>=i?1:(t=(t-e)/(i-e))*t*t*(t*(6*t-15)+10)}function y(t,e){return t+Math.floor(Math.random()*(e-t+1))}function p(t,e){return t+Math.random()*(e-t)}function v(t){return t*(.5-Math.random())}function _(t){return 0==(t&t-1)&&0!==t}function M(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}function b(t){var e=t;return e-=1,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,e+=1}var g={degToRad:r,radToDeg:o,worldToScreen:h,clamp:l,euclideanModulo:u,mapLinear:c,lerp:f,smoothstep:d,smootherstep:m,randInt:y,randFloat:p,randFloatSpread:v,isPowerOfTwo:_,nearestPowerOfTwo:M,nextPowerOfTwo:b};window.Math.degToRad=r,window.Math.radToDeg=o,window.Math.worldToScreen=h;var x=g;e.default=x},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(i(1));function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=!0,a=!1,s=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(t){a=!0,s=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw s}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=Number.EPSILON;void 0===r&&(r=Math.pow(2,-52));var o,h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"isQuaternion",!0),this._x=e,this._y=i,this._z=n,this._w=a}return function(t,e,i){e&&s(t.prototype,e),i&&s(t,i)}(t,[{key:"set",value:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._w=n,this.onChangeCallback(),this}},{key:"clone",value:function(){return new t(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._w=t._w,this.onChangeCallback(),this}},{key:"setFromEuler",value:function(t,e){var i=Math.cos(t._x/2),n=Math.cos(t._y/2),a=Math.cos(t._z/2),s=Math.sin(t._x/2),r=Math.sin(t._y/2),o=Math.sin(t._z/2),h=t.order;return"XYZ"===h?(this._x=s*n*a+i*r*o,this._y=i*r*a-s*n*o,this._z=i*n*o+s*r*a,this._w=i*n*a-s*r*o):"YXZ"===h?(this._x=s*n*a+i*r*o,this._y=i*r*a-s*n*o,this._z=i*n*o-s*r*a,this._w=i*n*a+s*r*o):"ZXY"===h?(this._x=s*n*a-i*r*o,this._y=i*r*a+s*n*o,this._z=i*n*o+s*r*a,this._w=i*n*a-s*r*o):"ZYX"===h?(this._x=s*n*a-i*r*o,this._y=i*r*a+s*n*o,this._z=i*n*o-s*r*a,this._w=i*n*a+s*r*o):"YZX"===h?(this._x=s*n*a+i*r*o,this._y=i*r*a+s*n*o,this._z=i*n*o-s*r*a,this._w=i*n*a-s*r*o):"XZY"===h&&(this._x=s*n*a-i*r*o,this._y=i*r*a-s*n*o,this._z=i*n*o+s*r*a,this._w=i*n*a+s*r*o),!1!==e&&this.onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(t,e){var i=e/2,n=Math.sin(i);return this._x=t.x*n,this._y=t.y*n,this._z=t.z*n,this._w=Math.cos(i),this.onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e,i=a(t.elements,12),n=i[0],s=i[1],r=i[2],o=(i[3],i[4]),h=i[5],l=i[6],u=(i[7],i[8]),c=i[9],f=i[10],d=(i[11],n+h+f);return d>0?(e=.5/Math.sqrt(d+1),this._w=.25/e,this._x=(l-c)*e,this._y=(u-r)*e,this._z=(s-o)*e):n>h&&n>f?(e=2*Math.sqrt(1+n-h-f),this._w=(l-c)/e,this._x=.25*e,this._y=(o+s)/e,this._z=(u+r)/e):h>f?(e=2*Math.sqrt(1+h-n-f),this._w=(u-r)/e,this._x=(o+s)/e,this._y=.25*e,this._z=(c+l)/e):(e=2*Math.sqrt(1+f-n-h),this._w=(s-o)/e,this._x=(u+r)/e,this._y=(c+l)/e,this._z=.25*e),this.onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(t,e){void 0===o&&(o=new n.default);var i=t.dot(e)+1;return i<1e-6?(i=0,Math.abs(t.x)>Math.abs(t.z)?o.set(-t.y,t.x,0):o.set(0,-t.z,t.y)):o.crossVectors(t,e),this._x=o._x,this._y=o._y,this._z=o._z,this._w=i,this.normalize()}},{key:"inverse",value:function(){return this.conjugate().normalize()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this}},{key:"dot",value:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this}},{key:"multiply",value:function(t){return this.multiplyQuaternions(this,t)}},{key:"premultiply",value:function(t){return this.multiplyQuaternions(t,this)}},{key:"multiplyQuaternions",value:function(t,e){var i=t._x,n=t._y,a=t._z,s=t._w,r=e._x,o=e._y,h=e._z,l=e._w;return this._x=i*l+s*r+n*h-a*o,this._y=n*l+s*o+a*r-i*h,this._z=a*l+s*h+i*o-n*r,this._w=s*l-i*r-n*o-a*h,this.onChangeCallback(),this}},{key:"slerp",value:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var i=this._x,n=this._y,a=this._z,s=this._w,r=s*t._w+i*t._x+n*t._y+a*t._z;if(r<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,r=-r):this.copy(t),r>=1)return this._w=s,this._x=i,this._y=n,this._z=a,this;var o=Math.sqrt(1-r*r);if(Math.abs(o)<.001)return this._w=.5*(s+this._w),this._x=.5*(i+this._x),this._y=.5*(n+this._y),this._z=.5*(a+this._z),this;var h=Math.atan2(o,r),l=Math.sin((1-e)*h)/o,u=Math.sin(e*h)/o;return this._w=s*l+this._w*u,this._x=i*l+this._x*u,this._y=n*l+this._y*u,this._z=a*l+this._z*u,this.onChangeCallback(),this}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}},{key:"onChange",value:function(t){return this.onChangeCallback=t,this}},{key:"onChangeCallback",value:function(){}},{key:"x",get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}],[{key:"slerp",value:function(t,e,i,n){return i.copy(t).slerp(e,n)}},{key:"slerpFlat",value:function(t,e,i,n,a,s,o){var h=i[n+0],l=i[n+1],u=i[n+2],c=i[n+3],f=a[s+0],d=a[s+1],m=a[s+2],y=a[s+3];if(c!==y||h!==f||l!==d||u!==m){var p=1-o,v=h*f+l*d+u*m+c*y,_=v>=0?1:-1,M=1-v*v;if(M>r){var b=Math.sqrt(M),g=Math.atan2(b,v*_);p=Math.sin(p*g)/b,o=Math.sin(o*g)/b}var x=o*_;if(h=h*p+f*x,l=l*p+d*x,u=u*p+m*x,c=c*p+y*x,p===1-o){var k=1/Math.sqrt(h*h+l*l+u*u+c*c);h*=k,l*=k,u*=k,c*=k}}t[e]=h,t[e+1]=l,t[e+2]=u,t[e+3]=c}}]),t}();e.default=h,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=h(i(21)),a=h(i(1)),s=h(i(3)),r=h(i(12)),o=h(i(0));function h(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var y=0,p=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(d(t=function(t,e){return!e||"object"!==l(e)&&"function"!=typeof e?d(t):e}(this,f(e).call(this))),"isObject3D",!0),Object.defineProperty(d(t),"id",{value:y}),y+=1,t.parent=null,t.children=[],t.position=new a.default(0,0,0),t.quaternion=new s.default,t.scale=new a.default(1,1,1),t.up=new a.default(0,1,0),t.visible=!0,t.track=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(e,n.default),function(t,e,i){e&&c(t.prototype,e),i&&c(t,i)}(e,[{key:"translate",value:function(t,e,i){var n=new a.default(1,0,0),s=new a.default(0,1,0),r=new a.default(0,0,1);n.applyQuaternion(this.quaternion),s.applyQuaternion(this.quaternion),r.applyQuaternion(this.quaternion),this.position.add(n.multiplyScalar(t)),this.position.add(s.multiplyScalar(e)),this.position.add(r.multiplyScalar(i))}},{key:"rotateX",value:function(t){var e=new a.default(1,0,0),i=new s.default;i.setFromAxisAngle(e,t),this.quaternion.multiply(i)}},{key:"rotateY",value:function(t){var e=new a.default(0,1,0),i=new s.default;i.setFromAxisAngle(e,t),this.quaternion.multiply(i)}},{key:"rotateZ",value:function(t){var e=new a.default(0,0,1),i=new s.default;i.setFromAxisAngle(e,t),this.quaternion.multiply(i)}},{key:"localToWorld",value:function(t){return t.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(t){return t.applyMatrix4((new o.default).getInverse(this.matrixWorld))}},{key:"add",value:function(t){t&&t!==this&&t.isObject3D&&(t.parent&&t.parent.remove(t),this.isScene||(t.track=this.track),t.parent=this,t.dispatchEvent({type:"added"}),this.children=[].concat(u(this.children),[t]));for(var e=0;e<(arguments.length<=1?0:arguments.length-1);e+=1)this.add(e+1<1||arguments.length<=e+1?void 0:arguments[e+1])}},{key:"remove",value:function(t){var e=this.children.indexOf(t);if(e>-1){t.parent=null,t.dispatchEvent({type:"removed"});var i=!0,n=!1,a=void 0;try{for(var s,r=t.children[Symbol.iterator]();!(i=(s=r.next()).done);i=!0){var o=s.value;t.remove(o)}}catch(t){n=!0,a=t}finally{try{i||null==r.return||r.return()}finally{if(n)throw a}}this.children=[].concat(u(this.children.slice(0,e)),u(this.children.slice(e+1)))}for(var h=0;h<(arguments.length<=1?0:arguments.length-1);h+=1)this.remove(h+1<1||arguments.length<=h+1?void 0:arguments[h+1])}},{key:"lookAt",value:function(t){var e=new o.default;e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}},{key:"clone",value:function(t){return(new this.constructor).copy(this,t)}},{key:"copy",value:function(t,e){if(this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.up.copy(t.copy),this.visible=t.visible,!0===e||void 0===e)for(var i=0;i<t.children.length;i+=1){var n=t.children[i];this.add(n.clone())}return this}},{key:"traverse",value:function(t){t(this),this.children.forEach(function(e){e.traverse(t)})}},{key:"traverseVisible",value:function(t){this.visible&&(t(this),this.children.forEach(function(e){e.traverseVisible(t)}))}},{key:"traverseAncestors",value:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}},{key:"traverseRenderable",value:function(t){this.visible&&this.track&&(t(this),this.children.forEach(function(e){e.traverseRenderable(t)}))}},{key:"worldPosition",get:function(){return(new a.default).setFromMatrixPosition(this.matrixWorld)}},{key:"rotation",get:function(){return(new r.default).setFromQuaternion(this.quaternion,void 0,!1)},set:function(t){t instanceof r.default?this.quaternion.setFromEuler(t):t instanceof s.default?this.quaternion.copy(t):t.isMatrix4&&this.quaternion.setFromMatrix(t)}},{key:"worldRotation",get:function(){return(new r.default).setFromQuaternion(this.worldQuaternion,this.rotation.order,!1)}},{key:"worldQuaternion",get:function(){var t=new s.default;return this.matrixWorld.decompose(new a.default,t,new a.default),t}},{key:"worldX",get:function(){return new a.default(1,0,0).applyQuaternion(this.worldQuaternion)}},{key:"worldY",get:function(){return new a.default(0,1,0).applyQuaternion(this.worldQuaternion)}},{key:"worldZ",get:function(){return new a.default(0,0,1).applyQuaternion(this.worldQuaternion)}},{key:"worldScale",get:function(){var t=new a.default;return this.matrixWorld.decompose(new a.default,new s.default,t),t}},{key:"matrix",get:function(){return(new o.default).compose(this.position,this.quaternion,this.scale)}},{key:"matrixWorld",get:function(){var t=this.parent,e=this.matrix;return null===t?e:(new o.default).multiplyMatrices(t.matrixWorld,e)}}]),e}();e.default=p,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.uuid=o,e.getVendorPrefix=h,e.removeArrayItem=l,e.getOperatingSystem=u,e.transformCoords=c,e.getVectorFromLocation=function(t,e){console.log(t+", "+e);var i=c(t,e);console.log(i.latitude+", "+i.longitude);var n=(90-i.latitude)*(Math.PI/180),s=(i.longitude+180)*(Math.PI/180),r=-6378137*Math.sin(n)*Math.cos(s),o=6378137*Math.cos(n),h=6378137*Math.sin(n)*Math.sin(s);return new a.default(r,o,h)},e.getDistance=f,e.default=void 0;var n=r(i(22)),a=r(i(1)),s=i(2);function r(t){return t&&t.__esModule?t:{default:t}}function o(){for(var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),i=new Array(36),n=0,a=0;a<36;a+=1)8===a||13===a||18===a||23===a?i[a]="-":14===a?i[a]="4":(n<=2&&(n=33554432+16777216*Math.random()|0),t=15&n,n>>=4,i[a]=e[19===a?3&t|8:t]);return i.join("")}function h(){var t=window.getComputedStyle(document.documentElement,""),e=(Array.prototype.slice.call(t).join("").match(/-(moz|webkit|ms)-/)||""===t.OLink&&["","o"])[1];return e[0].toUpperCase()+e.substr(1)}function l(t,e){var i=t.indexOf(e);i>-1&&t.splice(i,1)}function u(){var t=navigator.userAgent||navigator.vendor||window.opera,e="unknown";return/windows phone/i.test(t)&&(e="windows"),/android/i.test(t)&&(e="android"),/iPad|iPhone|iPod/.test(t)&&!window.MSStream&&(e="ios"),e}function c(t,e){n.default.defs("EPSG:5179","+proj=tmerc +lat_0=38 +lon_0=127.5 +k=0.9996 +x_0=1000000 +y_0=2000000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs");var i=new n.default.Proj("EPSG:4326"),a=new n.default.Proj("EPSG:5179"),s=new n.default.toPoint([e,t]);return n.default.transform(i,a,s),s}function f(t,e,i,n){var a=(0,s.degToRad)(i-t),r=(0,s.degToRad)(n-e),o=Math.sin(a/2)*Math.sin(a/2)+Math.cos((0,s.degToRad)(t))*Math.cos((0,s.degToRad)(i))*Math.sin(r/2)*Math.sin(r/2);return 1e3*(6371*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))))}var d={uuid:o,getVendorPrefix:h,removeArrayItem:l,getOperatingSystem:u,transformCoords:c,getDistance:f};e.default=d},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=f(i(7)),a=f(i(8)),s=(f(i(10)),f(i(14))),r=f(i(4)),o=f(i(0)),h=f(i(1)),l=f(i(13)),u=f(i(3)),c=i(5);function f(t){return t&&t.__esModule?t:{default:t}}function d(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var m=function(){function t(e,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)throw new Error("Entity requires an entity uri");this.uri=e,this.type=i&&i.type?i.type:"object",this.name=i&&i.name?i.name:"",this.image=i&&i.image?i.image:"",this.size=i&&i.size?i.size:{width:0,height:0,depth:0,unit:"mm"},this.renderables=[],this.object=new r.default,this._visible=!0,this._track=!1,s.default.addEntity(this)}return function(t,e,i){e&&d(t.prototype,e),i&&d(t,i)}(t,[{key:"setData",value:function(t){this.type=t&&t.type?t.type:"object",this.name=t&&t.name?t.name:"",this.image=t&&t.image?t.image:"",this.size=t&&t.size?t.size:{width:0,height:0,depth:0,unit:"mm"}}},{key:"load",value:function(t){if(!this.uri)throw new Error("Entity requires an entity uri");s.default.load(this).then(function(e){t(e)}).catch(function(e){console.error("Failed to load entity: "+e),t(null)})}},{key:"addRenderable",value:function(t){if(t&&(0==this.renderables.length&&LetseeEngine.renderer.add(this.object),this.renderables.push(t),this.object.add(t),this.track)){var e=this.track;t.traverse(function(t){t.track=e,t.element&&(t.element.style.display="")})}}},{key:"removeRenderable",value:function(t){t&&((0,c.removeArrayItem)(this.renderables,t),this.object.remove(t),0==this.renderables.length&&LetseeEngine.renderer.remove(this.object))}},{key:"removeRenderables",value:function(){if(this.renderables.length>0){var t=!0,e=!1,i=void 0;try{for(var n,a=this.renderables[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var s=n.value;this.object.remove(s)}}catch(t){e=!0,i=t}finally{try{t||null==a.return||a.return()}finally{if(e)throw i}}this.renderables=[],LetseeEngine.renderer.remove(this.object)}}},{key:"getRenderables",value:function(){return this.renderables}},{key:"getRenderable",value:function(t){for(var e=this.renderables.length;e>=0;e-=1)if(this.renderables[e].uuid===t)return this.renderables[e];return null}},{key:"getScreen",value:function(){var t=LetseeEngine.camera;if(t){var e=new o.default;e.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse.toCSS3D());var i=this.object.position.clone();i.applyMatrix4(e);var a=.5*n.default.width,s=.5*n.default.height;return(new l.default).set((i.x+1)*a,(1-i.y)*s)}console.error("Camera is not initialized")}},{key:"lookAt",value:function(t){this.object.lookAt(t)}},{key:"lootAtRenderables",value:function(t){var e=this;this.object.traverse(function(i){e.object!=i&&i.lookAt(t)})}},{key:"lookAtCamera",value:function(){var t=LetseeEngine.camera.position;this.lootAtRenderables(t)}},{key:"addEventListener",value:function(t,e){a.default.addEventListener(t,this.uri,e)}},{key:"removeEventListener",value:function(t,e){a.default.removeEventListener(t,this.uri,e)}},{key:"visible",get:function(){return this._visible},set:function(t){this._visible=t,this.object.traverse(function(e){e.visible=t,e.element&&(e.element.style.display=t?"":"none")})}},{key:"track",get:function(){return this._track},set:function(t){this._track=t,this.object.traverse(function(e){e.track=t,e.element&&(e.element.style.display=t?"":"none")})}},{key:"scale",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;t&&this.object.scale.setScalar(t)}},{key:"position",set:function(t){t&&t instanceof h.default&&(this.object.position=t)}},{key:"quaternion",set:function(t){t&&t instanceof u.default&&(this.object.quaternion=t)}}]),t}();e.default=m,t.exports=e.default},function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._os,this._orientation=0,this._width=0,this._height=0,this._isPortrait=!0}return function(t,e,i){e&&n(t.prototype,e),i&&n(t,i)}(t,[{key:"setConfig",value:function(t){this._width=t.width,this._height=t.height,this._orientation=t.orientation,this._isPortrait=0===this._orientation||180===this._orientation}},{key:"os",get:function(){return this._os},set:function(t){this._os=t}},{key:"orientation",get:function(){return this._orientation},set:function(t){this._orientation=t}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}},{key:"isPortrait",get:function(){return this._isPortrait}}]),t}());e.default=a,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,a=o(i(5)),s=o(i(9)),r=o(i(17));function o(t){return t&&t.__esModule?t:{default:t}}function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=new(function(){function t(){for(var e in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.callbacks={},this.callbacks[r.default.TRACK_START]=[],this.callbacks[r.default.TRACK_MOVE]=[],this.callbacks[r.default.TRACK_END]=[],this.callbacksOnTrackable={},this.callbacksOnTrackable[r.default.TRACK_START]={},this.callbacksOnTrackable[r.default.TRACK_MOVE]={},this.callbacksOnTrackable[r.default.TRACK_END]={},this.callbacks)document.addEventListener(e,this.handler,!0);n=this}return function(t,e,i){e&&h(t.prototype,e),i&&h(t,i)}(t,[{key:"addEventListener",value:function(){2===arguments.length?this.addOnType.apply(this,arguments):arguments.length>2&&this.addOnId.apply(this,arguments)}},{key:"addOnType",value:function(t,e){this.callbacks[t]||(this.callbacks[t]=[],document.addEventListener(t,this.handler,!0)),this.callbacks[t].push(e)}},{key:"addOnId",value:function(t,e,i){this.callbacksOnTrackable[t][e]||(this.callbacksOnTrackable[t][e]=[]),this.callbacksOnTrackable[t][e].push(i)}},{key:"removeEventListener",value:function(){1===arguments.length?this.removeAll.apply(this,arguments):2===arguments.length?this.removeOnType.apply(this,arguments):arguments.length>2&&this.removeOnId.apply(this,arguments)}},{key:"removeOnType",value:function(t,e){a.default.removeArrayItem(this.callbacks[t],e)}},{key:"removeOnId",value:function(t,e,i){a.default.removeArrayItem(this.callbacksOnTrackable[t][e],i)}},{key:"removeAll",value:function(t){this.callbacks[t]=[],this.callbacksOnTrackable[t]={}}},{key:"handler",value:function(t){if(t.type){var e=t.type,i=t.detail;if(i instanceof s.default){var a=n.callbacksOnTrackable[e][i.target.uri];if(a&&a.length)for(var r=0,o=a.length;r<o;r+=1)a[r](i)}var h=n.callbacks[e];if(h&&h.length>0)for(var l=0,u=h.length;l<u;l+=1)h[l](i)}}},{key:"hasUuid",value:function(t){for(var e in this.callbacksOnTrackable)for(var i in this.callbacksOnTrackable[e])if(i===t)return!0;return!1}},{key:"dispatchEvent",value:function(t,e){t&&document.dispatchEvent(new CustomEvent(t,{detail:e}))}}]),t}());e.default=l,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(i(0));var a=function t(e,i,a,s,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||!i)throw new Error("EntityEvent requires an event type and entity");this.type=e,this.target=i,this.matrix=a||new n.default,this.pixelSize=s||{width:0,height:0,depth:0},this.scale=r||1};e.default=a,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(i(4));function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(r(t=function(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?r(t):e}(this,s(e).call(this))),"type","Renderable"),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,n.default),e}();e.default=h,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(i(10));function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(r(i=function(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?r(t):e}(this,s(e).call(this))),"type","DOMRenderable"),i.element=t,i.element.style.position="absolute",i.element.style.display="none",i.addEventListener("added",function(t){i.track&&(i.element.style.display="");for(var e=t.target;;){if(e.isScene){LetseeEngine.renderer.appendElement(i.element);break}if(!e.parent)break;e=e.parent}}),i.addEventListener("removed",function(){i.element.parentNode&&i.element.parentNode.removeChild&&i.element.parentNode.removeChild(i.element)}),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,n.default),e}();e.default=h,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n,a,s=l(i(3)),r=l(i(1)),o=l(i(0)),h=i(2);function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=[],n=!0,a=!1,s=void 0;try{for(var r,o=t[Symbol.iterator]();!(n=(r=o.next()).done)&&(i.push(r.value),!e||i.length!==e);n=!0);}catch(t){a=!0,s=t}finally{try{n||null==o.return||o.return()}finally{if(a)throw s}}return i}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function f(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var d=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),f(this,"isEuler",!0),this._x=e,this._y=i,this._z=n,this._order=a}return function(t,e,i){e&&c(t.prototype,e),i&&c(t,i)}(t,[{key:"set",value:function(t,e,i,n){return this._x=t,this._y=e,this._z=i,this._order=n||this._order,this.onChangeCallback(),this}},{key:"clone",value:function(){return new t(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t,e,i){var n=u(t.elements,12),a=n[0],s=n[1],r=n[2],o=(n[3],n[4]),l=n[5],c=n[6],f=(n[7],n[8]),d=n[9],m=n[10];n[11];return"XYZ"===(e=e||this._order)?(this._y=Math.asin((0,h.clamp)(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(-d,m),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(c,l),this._z=0)):"YXZ"===e?(this._x=Math.asin(-(0,h.clamp)(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(f,m),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-r,a),this._z=0)):"ZXY"===e?(this._x=Math.asin((0,h.clamp)(c,-1,1)),Math.abs(c)<.99999?(this._y=Math.atan2(-r,m),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,a))):"ZYX"===e?(this._y=Math.asin(-(0,h.clamp)(r,-1,1)),Math.abs(r)<.99999?(this._x=Math.atan2(c,m),this._z=Math.atan2(s,a)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===e?(this._z=Math.asin((0,h.clamp)(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-d,l),this._y=Math.atan2(-r,a)):(this._x=0,this._y=Math.atan2(f,m))):"XZY"===e?(this._z=Math.asin(-(0,h.clamp)(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(c,l),this._y=Math.atan2(f,a)):(this._x=Math.atan2(-d,m),this._y=0)):console.warn("Euler: .setFromRotationMatrix() given unsupported order: ".concat(e)),this._order=e,!1!==i&&this.onChangeCallback(),this}},{key:"setFromQuaternion",value:function(t,e,i){return void 0===n&&(n=new o.default),n.makeRotationFromQuaternion(t),this.setFromRotationMatrix(n,e,i)}},{key:"setFromVector3",value:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)}},{key:"reorder",value:function(t){return void 0===a&&(a=new s.default),a.setFromEuler(this),this.setFromQuaternion(a,t)}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}},{key:"fromArray",value:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&null!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}},{key:"toVector3",value:function(t){return t?t.set(this._x,this._y,this._z):new r.default(this._x,this._y,this._z)}},{key:"onChange",value:function(t){return this.onChangeCallback=t,this}},{key:"onChangeCallback",value:function(){}},{key:"x",get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}]),t}();f(d,"DefaultOrder","XYZ"),f(d,"RotationOrders",["XYZ","YZX","ZXY","XZY","YXZ","ZYX"]);var m=d;e.default=m,t.exports=e.default},function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"isVector2",!0),this.x=e,this.y=i}return function(t,e,i){e&&n(t.prototype,e),i&&n(t,i)}(t,[{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: ".concat(t))}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: ".concat(t))}}},{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"add",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"addScalar",value:function(t){return this.x+=t,this.y+=t,this}},{key:"addVectors",value:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}},{key:"addScaledVector",value:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}},{key:"sub",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"subScalar",value:function(t){return this.x-=t,this.y-=t,this}},{key:"subVectors",value:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiplyScalar",value:function(t){return isFinite(t)?(this.x*=t,this.y*=t):(this.x=0,this.y=0),this}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}},{key:"clampLength",value:function(t,e){var i=this.length();return this.multiplyScalar(Math.max(t,Math.min(e,i))/i)}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"lengthManhattan",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length())}},{key:"angle",value:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,i=this.y-t.y;return e*e+i*i}},{key:"distanceToManhattan",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}},{key:"setLength",value:function(t){return this.multiplyScalar(t/this.length())}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:"lerpVectors",value:function(t,e,i){return this.subVectors(e,t).multiplyScalar(i).add(t)}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}},{key:"rotateAround",value:function(t,e){var i=Math.cos(e),n=Math.sin(e),a=this.x-t.x,s=this.y-t.y;return this.x=a*i-s*n+t.x,this.y=a*n+s*i+t.y,this}},{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}}]),t}();e.default=a,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i(6)),a=o(i(15)),s=o(i(11)),r=o(i(24));function o(t){return t&&t.__esModule?t:{default:t}}function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.entities={}}return function(t,e,i){e&&h(t.prototype,e),i&&h(t,i)}(t,[{key:"load",value:function(t){return t instanceof n.default?window._native.loadEntity(t.uri):new Promise(function(t,e){e("parameter is not entity")})}},{key:"getEntity",value:function(t){return this.entities[t]?this.entities[t]:null}},{key:"getEntities",value:function(){return Object.values(this.entities)}},{key:"hasEntity",value:function(t){return!!this.entities[t]}},{key:"addEntity",value:function(t){this.entities[t.uri]=t}},{key:"removeEntity",value:function(t){var e=t;if(t instanceof n.default&&(e=t.uri),this.hasEntity(e)){var i=this.entities[e];"object"!==i.type&&a.default.removeEntity(i),this.entities[e].removeRenderables(),delete this.entities[e]}}},{key:"setEntity",value:function(t){var e=t.uri;this.entities[e]?this.entities[e].setData(t):this.entities[e]=t}},{key:"traverseEntity",value:function(t){for(var e=Object.values(this.entities),i=0;i<e.length;i++){t(e[i])}}},{key:"setDatas",value:function(t){if(t){var e=t;e&&e.length>0&&e.forEach(function(t){for(var e=t.entity,i=new n.default(e.uri,e),a=t.renderables,r=0;r<a.length;r+=1)for(var o=a[r],h=o.selector,l=o.pose,u=document.querySelectorAll(h),c=0;c<u.length;c+=1){var f=u[c],d=new s.default(f);d.position.x=l[0],d.position.y=l[1],d.position.z=l[2],i.addRenderable(d)}});var i=t.place;console.log(i),i&&i.length>0&&i.forEach(function(t){var e=t.entity,i=new n.default(e.uri,e),a=t.renderables;"geolocation"===i.uri&&(i.track=!0);for(var s=0;s<a.length;s+=1)for(var o=a[s],h=o.selector,l=o.pose,u=document.querySelectorAll(h),c=0;c<u.length;c+=1){var f=u[c],d=new r.default(f);d.setLocation(l[0],l[1],l[2]),i.addRenderable(d)}})}}}]),t}());e.default=l,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(i(6)),a=r(i(23)),s=(r(i(10)),r(i(16)));function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var h=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.entity,this.tracker=new a.default,this.isActive=!1}return function(t,e,i){e&&o(t.prototype,e),i&&o(t,i)}(t,[{key:"getLocation",value:function(t){window._native&&window._native.getLocation().then(function(e){t?t(e):console.log("callback is null")}).catch(function(e){t&&t("Failed to get location: "+e)})}},{key:"addRenderable",value:function(t){this.entity||(this.entity=new n.default("place",{type:"place"}),this.entity.track=!0),t instanceof s.default&&(this.entity.addRenderable(t),this.tracker.refresh())}},{key:"lookAtCamera",value:function(){this.entity.lookAtCamera()}}]),t}());e.default=h,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(i(11));function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var h=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(r(i=function(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?r(t):e}(this,s(e).call(this,t))),"type","PlaceRenderable"),i.headingAutoUpdate=!0,i.element.style.display="",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,n.default),e}();e.default=h,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={TRACK_START:"trackstart",TRACK_MOVE:"trackmove",TRACK_END:"trackend"};e.default=n,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;s(i(7));var n=s(i(27)),a=i(2);function s(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function l(t,e,i){return(l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(n){var a=Object.getOwnPropertyDescriptor(n,e);return a.get?a.get.call(i):a.value}})(t,e,i||t)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var d=function(t){function e(t,i,n,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),f(h(s=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?h(t):e}(this,u(e).call(this))),"isPerspectiveCamera",!0),f(h(s),"type","PerspectiveCamera"),s.type="PerspectiveCamera",s.fov=void 0!==t?t:50,s.zoom=1,s.near=void 0!==n?n:.1,s.far=void 0!==a?a:2e3,s.focus=10,s.aspect=void 0!==i?i:1,s.view=null,s.filmGauge=35,s.filmOffset=0,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,n.default),function(t,e,i){e&&o(t.prototype,e),i&&o(t,i)}(e,[{key:"copy",value:function(t){return l(u(e.prototype),"copy",this).call(this,t),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){f(t,e,i[e])})}return t}({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this._projectionMatrix=t.projectionMatrix,this}},{key:"setViewPort",value:function(t){t instanceof Matrix4&&(this.quaternion.setFromRotationMatrix(t),LetseeEngine.renderer.render())}},{key:"focalLength",set:function(t){var e=.5*this.filmHeight/t;this.fov=2*(0,a.radToDeg)(Math.atan(e))},get:function(){var t=Math.tan(.5*(0,a.degToRad)(this.fov));return.5*this.filmHeight/t}},{key:"filmWidth",get:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"filmHeight",get:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"effectiveFOV",get:function(){return 2*(0,a.radToDeg)(Math.atan(Math.tan(.5*(0,a.degToRad)(this.fov))/this.zoom))}},{key:"viewOffset",set:function(t){this.view=t,null!==this.view&&(this.aspect=this.view.fullWidth/this.view.fullHeight)}},{key:"projectionMatrix",get:function(){return this._projectionMatrix},set:function(t){if(t){var e,i;this._projectionMatrix=t;var n=t.elements;e=n[1]/n[4],i=-2*(0,a.radToDeg)(Math.atan(1/n[1])),this.position.z=0,this.fov=i,this.aspect=e,this.near=n[14]/(-n[10]-1),this.far=n[14]/(1-n[10]),console.log("fov:".concat(this.fov,", aspect:").concat(this.aspect,", near:").concat(this.near,", far:").concat(this.far))}else this.fov=50,this.zoom=1,this.near=.1,this.far=2e3,this.focus=10,this.aspect=1,this.position.z=2e3;LetseeEngine.renderer.render()}}]),e}();e.default=d,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i(20);var n=i(2),a=i(5),s=m(i(7)),r=m(i(26)),o=m(i(18)),h=m(i(29)),l=m(i(15)),u=m(i(14)),c=m(i(8)),f=m(i(0)),d=m(i(30));function m(t){return t&&t.__esModule?t:{default:t}}function y(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var p={place:l.default,renderer:new r.default,camera:new o.default,tracker:new h.default,init:function(t){var e;return this.config=t,this.config.projectionMatrix=(e=new f.default).makePerspective.apply(e,y(this.config.projectionParameter)),s.default.setConfig(this.config),this.tracker.renderer=this.renderer,this.renderer.camera=this.camera,this.renderer.orientation=this.config.orientation,u.default.setDatas(this.config.data),this.config.projectionMatrix&&(this.camera.projectionMatrix=this.config.projectionMatrix.isMatrix4?this.config.projectionMatrix:(new f.default).fromArray(this.config.projectionMatrix)),!0},getFrustumValue:function(t,e,i,a){var s=i*Math.tan((0,n.degToRad)(.5*t)),r=-s;return[r*e,s*e,s,r,i,a]},getEntities:function(){return u.default.getEntities()},getEntity:function(t){return u.default.getEntity(t)},addEventListener:function(){c.default.addEventListener.apply(c.default,arguments)},removeEventListener:function(){c.default.removeEventListener.apply(c.default,arguments)},dispatchEvent:function(){c.default.dispatchEvent.apply(c.default,arguments)},onConfigurationChanged:function(t){var e=this;s.default.setConfig(t),this.renderer.orientation=s.default.orientation,t.projectionMatrix&&(this.camera.projectionMatrix=t.projectionMatrix),c.default.dispatchEvent("configurationchange",t),"NATIVE"===this.runType&&_native.getConfiguration().then(function(i){i.width=screen.width,i.height=screen.height,s.default.setConfig(i),e.renderer.orientation=s.default.orientation,t.projectionMatrix&&(e.camera.projectionMatrix=t.projectionMatrix),c.default.dispatchEvent("configurationchange",t)}).catch(function(t){console.error("Failed to get configuration: "+JSON.stringify(t))})},setTHREERenderer:function(t,e,i){this.three=new d.default(t,e,i)},isMobile:function(){!function(t){!/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)&&/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(t.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera)},getDistance:a.getDistance};e.default=p,t.exports=e.default},function(t,e,i){"use strict";var n=m(i(12)),a=m(i(3)),s=m(i(0)),r=m(i(13)),o=m(i(1)),h=m(i(4)),l=m(i(6)),u=m(i(9)),c=m(i(11)),f=m(i(16)),d=m(i(25));function m(t){return t&&t.__esModule?t:{default:t}}window.Euler=n.default,window.Quaternion=a.default,window.Matrix4=s.default,window.Vector2=r.default,window.Vector3=o.default,window.Object3D=h.default,window.Entity=l.default,window.EntityEvent=u.default,window.DOMRenderable=c.default,window.PlaceRenderable=f.default,window.THREEWebGLRenderer=d.default},function(t,e,i){"use strict";function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,i){e&&n(t.prototype,e),i&&n(t,i)}(t,[{key:"addEventListener",value:function(t,e){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}},{key:"hasEventListener",value:function(t,e){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)}},{key:"removeEventListener",value:function(t,e){if(void 0!==this._listeners){var i=this._listeners[t];if(void 0!==i){var n=i.indexOf(e);-1!==n&&i.splice(n,1)}}}},{key:"dispatchEvent",value:function(t){if(void 0!==this._listeners&&void 0!==t.type){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var i=[],n=e.length,a=0;a<n;a+=1)i[a]=e[a];for(var s=0;s<n;s+=1)i[s].call(this,t)}}}}]),t}();e.default=a,t.exports=e.default},function(t,e,i){var n,a,s,r;function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(i){"object"==o(e)&&void 0!==t?t.exports=i():(a=[],void 0===(s="function"==typeof(n=i)?n.apply(e,a):n)||(t.exports=s))}(function(){return function t(e,i,n){function a(o,h){if(!i[o]){if(!e[o]){if(!h&&("function"==typeof r&&r))return r(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module \'"+o+"\'");throw l.code="MODULE_NOT_FOUND",l}var u=i[o]={exports:{}};e[o][0].call(u.exports,function(t){var i=e[o][1][t];return a(i||t)},u,u.exports,t,e,i,n)}return i[o].exports}for(var s="function"==typeof r&&r,o=0;o<n.length;o++)a(n[o]);return a}({"./includedProjections":[function(t,e,i){var n=[t("./lib/projections/tmerc"),t("./lib/projections/utm"),t("./lib/projections/sterea"),t("./lib/projections/stere"),t("./lib/projections/somerc"),t("./lib/projections/omerc"),t("./lib/projections/lcc"),t("./lib/projections/krovak"),t("./lib/projections/cass"),t("./lib/projections/laea"),t("./lib/projections/aea"),t("./lib/projections/gnom"),t("./lib/projections/cea"),t("./lib/projections/eqc"),t("./lib/projections/poly"),t("./lib/projections/nzmg"),t("./lib/projections/mill"),t("./lib/projections/sinu"),t("./lib/projections/moll"),t("./lib/projections/eqdc"),t("./lib/projections/vandg"),t("./lib/projections/aeqd"),t("./lib/projections/ortho")];e.exports=function(t){n.forEach(function(e){t.Proj.projections.add(e)})}},{"./lib/projections/aea":40,"./lib/projections/aeqd":41,"./lib/projections/cass":42,"./lib/projections/cea":43,"./lib/projections/eqc":44,"./lib/projections/eqdc":45,"./lib/projections/gnom":47,"./lib/projections/krovak":48,"./lib/projections/laea":49,"./lib/projections/lcc":50,"./lib/projections/mill":53,"./lib/projections/moll":54,"./lib/projections/nzmg":55,"./lib/projections/omerc":56,"./lib/projections/ortho":57,"./lib/projections/poly":58,"./lib/projections/sinu":59,"./lib/projections/somerc":60,"./lib/projections/stere":61,"./lib/projections/sterea":62,"./lib/projections/tmerc":63,"./lib/projections/utm":64,"./lib/projections/vandg":65}],1:[function(t,e,i){function n(t,e,i){if(!(this instanceof n))return new n(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==o(t))this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var a=t.split(",");this.x=parseFloat(a[0],10),this.y=parseFloat(a[1],10),this.z=parseFloat(a[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}var a=t("mgrs");n.fromMGRS=function(t){return new n(a.toPoint(t))},n.prototype.toMGRS=function(t){return a.forward([this.x,this.y],t)},e.exports=n},{mgrs:68}],2:[function(t,e,i){function n(t,e){if(!(this instanceof n))return new n(t);e=e||function(t){if(t)throw t};var i=a(t);if("object"==o(i)){var r=h(i),l=n.projections.get(r.projName);l?(s(this,r),s(this,l),this.init(),e(null,this)):e(t)}else e(t)}var a=t("./parseCode"),s=t("./extend"),r=t("./projections"),h=t("./deriveConstants");n.projections=r,n.projections.start(),e.exports=n},{"./deriveConstants":33,"./extend":34,"./parseCode":37,"./projections":39}],3:[function(t,e,i){e.exports=function(t,e,i){var n,a,s,r=i.x,o=i.y,h=i.z||0;for(s=0;3>s;s++)if(!e||2!==s||void 0!==i.z)switch(0===s?(n=r,a="x"):1===s?(n=o,a="y"):(n=h,a="z"),t.axis[s]){case"e":i[a]=n;break;case"w":i[a]=-n;break;case"n":i[a]=n;break;case"s":i[a]=-n;break;case"u":void 0!==i[a]&&(i.z=n);break;case"d":void 0!==i[a]&&(i.z=-n);break;default:return null}return i}},{}],4:[function(t,e,i){var n=Math.PI/2,a=t("./sign");e.exports=function(t){return Math.abs(t)<n?t:t-a(t)*Math.PI}},{"./sign":21}],5:[function(t,e,i){var n=2*Math.PI,a=t("./sign");e.exports=function(t){return Math.abs(t)<=3.14159265359?t:t-a(t)*n}},{"./sign":21}],6:[function(t,e,i){e.exports=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}},{}],7:[function(t,e,i){e.exports=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))}},{}],8:[function(t,e,i){e.exports=function(t){return.375*t*(1+.25*t*(1+.46875*t))}},{}],9:[function(t,e,i){e.exports=function(t){return.05859375*t*t*(1+.75*t)}},{}],10:[function(t,e,i){e.exports=function(t){return t*t*t*(35/3072)}},{}],11:[function(t,e,i){e.exports=function(t,e,i){var n=e*i;return t/Math.sqrt(1-n*n)}},{}],12:[function(t,e,i){e.exports=function(t,e,i,n,a){var s,r;s=t/e;for(var o=0;15>o;o++)if(s+=r=(t-(e*s-i*Math.sin(2*s)+n*Math.sin(4*s)-a*Math.sin(6*s)))/(e-2*i*Math.cos(2*s)+4*n*Math.cos(4*s)-6*a*Math.cos(6*s)),Math.abs(r)<=1e-10)return s;return NaN}},{}],13:[function(t,e,i){var n=Math.PI/2;e.exports=function(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return 0>e?-1*n:n;for(var a,s,r,o,h=Math.asin(.5*e),l=0;30>l;l++)if(s=Math.sin(h),r=Math.cos(h),o=t*s,h+=a=Math.pow(1-o*o,2)/(2*r)*(e/(1-t*t)-s/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),Math.abs(a)<=1e-10)return h;return NaN}},{}],14:[function(t,e,i){e.exports=function(t,e,i,n,a){return t*a-e*Math.sin(2*a)+i*Math.sin(4*a)-n*Math.sin(6*a)}},{}],15:[function(t,e,i){e.exports=function(t,e,i){var n=t*e;return i/Math.sqrt(1-n*n)}},{}],16:[function(t,e,i){var n=Math.PI/2;e.exports=function(t,e){for(var i,a,s=.5*t,r=n-2*Math.atan(e),o=0;15>=o;o++)if(i=t*Math.sin(r),r+=a=n-2*Math.atan(e*Math.pow((1-i)/(1+i),s))-r,Math.abs(a)<=1e-10)return r;return-9999}},{}],17:[function(t,e,i){var n=.046875,a=.01953125,s=.01068115234375;e.exports=function(t){var e=[];e[0]=1-t*(.25+t*(n+t*(a+t*s))),e[1]=t*(.75-t*(n+t*(a+t*s)));var i=t*t;return e[2]=i*(.46875-t*(.013020833333333334+.007120768229166667*t)),i*=t,e[3]=i*(.3645833333333333-.005696614583333333*t),e[4]=i*t*.3076171875,e}},{}],18:[function(t,e,i){var n=t("./pj_mlfn");e.exports=function(t,e,i){for(var a=1/(1-e),s=t,r=20;r;--r){var o=Math.sin(s),h=1-e*o*o;if(s-=h=(n(s,o,Math.cos(s),i)-t)*(h*Math.sqrt(h))*a,Math.abs(h)<1e-10)return s}return s}},{"./pj_mlfn":19}],19:[function(t,e,i){e.exports=function(t,e,i,n){return i*=e,e*=e,n[0]*t-i*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}},{}],20:[function(t,e,i){e.exports=function(t,e){var i;return t>1e-7?(1-t*t)*(e/(1-(i=t*e)*i)-.5/t*Math.log((1-i)/(1+i))):2*e}},{}],21:[function(t,e,i){e.exports=function(t){return 0>t?-1:1}},{}],22:[function(t,e,i){e.exports=function(t,e){return Math.pow((1-t)/(1+t),e)}},{}],23:[function(t,e,i){e.exports=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}},{}],24:[function(t,e,i){var n=Math.PI/2;e.exports=function(t,e,i){var a=t*i,s=.5*t;return a=Math.pow((1-a)/(1+a),s),Math.tan(.5*(n-e))/a}},{}],25:[function(t,e,i){i.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},i.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},i.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},i.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},i.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},i.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},i.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},i.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},i.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},i.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},i.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},i.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},i.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},i.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},i.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},i.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}},{}],26:[function(t,e,i){i.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},i.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},i.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},i.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},i.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},i.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},i.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},i.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},i.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},i.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},i.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},i.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},i.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},i.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},i.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},i.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},i.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},i.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},i.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},i.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},i.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},i.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},i.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},i.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},i.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},i.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},i.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},i.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},i.hough={a:6378270,rf:297,ellipseName:"Hough"},i.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},i.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},i.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},i.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},i.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},i.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},i.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},i.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},i.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},i.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},i.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},i.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"},i.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"},i.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}},{}],27:[function(t,e,i){i.greenwich=0,i.lisbon=-9.131906111111,i.paris=2.337229166667,i.bogota=-74.080916666667,i.madrid=-3.687938888889,i.rome=12.452333333333,i.bern=7.439583333333,i.jakarta=106.807719444444,i.ferro=-17.666666666667,i.brussels=4.367975,i.stockholm=18.058277777778,i.athens=23.7163375,i.oslo=10.722916666667},{}],28:[function(t,e,i){i.ft={to_meter:.3048},i["us-ft"]={to_meter:1200/3937}},{}],29:[function(t,e,i){function n(t,e,i){var n;return Array.isArray(i)?(n=r(t,e,i),3===i.length?[n.x,n.y,n.z]:[n.x,n.y]):r(t,e,i)}function a(t){return t instanceof s?t:t.oProj?t.oProj:s(t)}var s=t("./Proj"),r=t("./transform"),o=s("WGS84");e.exports=function(t,e,i){t=a(t);var s,r=!1;return void 0===e?(e=t,t=o,r=!0):(void 0!==e.x||Array.isArray(e))&&(i=e,e=t,t=o,r=!0),e=a(e),i?n(t,e,i):(s={forward:function(i){return n(t,e,i)},inverse:function(i){return n(e,t,i)}},r&&(s.oProj=e),s)}},{"./Proj":2,"./transform":66}],30:[function(t,e,i){var n=Math.PI/2,a=484813681109536e-20,s=.3826834323650898,r=function t(e){return this instanceof t?(this.datum_type=4,void(e&&(e.datumCode&&"none"===e.datumCode&&(this.datum_type=5),e.datum_params&&(this.datum_params=e.datum_params.map(parseFloat),0===this.datum_params[0]&&0===this.datum_params[1]&&0===this.datum_params[2]||(this.datum_type=1),this.datum_params.length>3&&(0===this.datum_params[3]&&0===this.datum_params[4]&&0===this.datum_params[5]&&0===this.datum_params[6]||(this.datum_type=2,this.datum_params[3]*=a,this.datum_params[4]*=a,this.datum_params[5]*=a,this.datum_params[6]=this.datum_params[6]/1e6+1))),this.datum_type=e.grids?3:this.datum_type,this.a=e.a,this.b=e.b,this.es=e.es,this.ep2=e.ep2,3===this.datum_type&&(this.grids=e.grids)))):new t(e)};r.prototype={compare_datums:function(t){return this.datum_type===t.datum_type&&(!(this.a!==t.a||Math.abs(this.es-t.es)>5e-11)&&(1===this.datum_type?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]:2===this.datum_type?this.datum_params[0]===t.datum_params[0]&&this.datum_params[1]===t.datum_params[1]&&this.datum_params[2]===t.datum_params[2]&&this.datum_params[3]===t.datum_params[3]&&this.datum_params[4]===t.datum_params[4]&&this.datum_params[5]===t.datum_params[5]&&this.datum_params[6]===t.datum_params[6]:3!==this.datum_type&&3!==t.datum_type||this.nadgrids===t.nadgrids))},geodetic_to_geocentric:function(t){var e,i,a,s,r,o,h,l=t.x,u=t.y,c=t.z?t.z:0;if(-n>u&&u>-1.001*n)u=-n;else if(u>n&&1.001*n>u)u=n;else if(-n>u||u>n)return null;return l>Math.PI&&(l-=2*Math.PI),r=Math.sin(u),h=Math.cos(u),o=r*r,e=((s=this.a/Math.sqrt(1-this.es*o))+c)*h*Math.cos(l),i=(s+c)*h*Math.sin(l),a=(s*(1-this.es)+c)*r,t.x=e,t.y=i,t.z=a,0},geocentric_to_geodetic:function(t){var e,i,a,s,r,o,h,l,u,c,f,d,m,y,p,v,_=1e-12,M=t.x,b=t.y,g=t.z?t.z:0;if(!1,e=Math.sqrt(M*M+b*b),i=Math.sqrt(M*M+b*b+g*g),e/this.a<_){if(!0,y=0,i/this.a<_)return p=n,void(v=-this.b)}else y=Math.atan2(b,M);a=g/i,s=e/i,r=1/Math.sqrt(1-this.es*(2-this.es)*s*s),l=s*(1-this.es)*r,u=a*r,m=0;do{m++,v=e*l+g*u-(h=this.a/Math.sqrt(1-this.es*u*u))*(1-this.es*u*u),o=this.es*h/(h+v),d=(f=a*(r=1/Math.sqrt(1-o*(2-o)*s*s)))*l-(c=s*(1-o)*r)*u,l=c,u=f}while(d*d>1e-24&&30>m);return p=Math.atan(f/Math.abs(c)),t.x=y,t.y=p,t.z=v,t},geocentric_to_geodetic_noniter:function(t){var e,i,a,r,o,h,l,u,c,f,d,m,y,p,v,_,M,b=t.x,g=t.y,x=t.z?t.z:0;if(b=parseFloat(b),g=parseFloat(g),x=parseFloat(x),M=!1,0!==b)e=Math.atan2(g,b);else if(g>0)e=n;else if(0>g)e=-n;else if(M=!0,e=0,x>0)i=n;else{if(!(0>x))return i=n,void(a=-this.b);i=-n}return o=b*b+g*g,h=1.0026*x,m=(r=Math.sqrt(o))/(u=Math.sqrt(h*h+o)),d=(f=h/u)*f*f,l=x+this.b*this.ep2*d,_=r-this.a*this.es*m*m*m,y=l/(c=Math.sqrt(l*l+_*_)),p=_/c,v=this.a/Math.sqrt(1-this.es*y*y),a=p>=s?r/p-v:-s>=p?r/-p-v:x/y+v*(this.es-1),!1===M&&(i=Math.atan(y/p)),t.x=e,t.y=i,t.z=a,t},geocentric_to_wgs84:function(t){if(1===this.datum_type)t.x+=this.datum_params[0],t.y+=this.datum_params[1],t.z+=this.datum_params[2];else if(2===this.datum_type){var e=this.datum_params[0],i=this.datum_params[1],n=this.datum_params[2],a=this.datum_params[3],s=this.datum_params[4],r=this.datum_params[5],o=this.datum_params[6],h=o*(t.x-r*t.y+s*t.z)+e,l=o*(r*t.x+t.y-a*t.z)+i,u=o*(-s*t.x+a*t.y+t.z)+n;t.x=h,t.y=l,t.z=u}},geocentric_from_wgs84:function(t){if(1===this.datum_type)t.x-=this.datum_params[0],t.y-=this.datum_params[1],t.z-=this.datum_params[2];else if(2===this.datum_type){var e=this.datum_params[0],i=this.datum_params[1],n=this.datum_params[2],a=this.datum_params[3],s=this.datum_params[4],r=this.datum_params[5],o=this.datum_params[6],h=(t.x-e)/o,l=(t.y-i)/o,u=(t.z-n)/o;t.x=h+r*l-s*u,t.y=-r*h+l+a*u,t.z=s*h-a*l+u}}},e.exports=r},{}],31:[function(t,e,i){var n=1,a=2,s=6378137,r=.006694379990141316;e.exports=function(t,e,i){function o(t){return t===n||t===a}var h,l,u;if(t.compare_datums(e))return i;if(5===t.datum_type||5===e.datum_type)return i;var c=t.a,f=t.es,d=e.a,m=e.es,y=t.datum_type;if(3===y)if(0===this.apply_gridshift(t,0,i))t.a=s,t.es=r;else{if(!t.datum_params)return t.a=c,t.es=t.es,i;for(h=1,l=0,u=t.datum_params.length;u>l;l++)h*=t.datum_params[l];if(0===h)return t.a=c,t.es=t.es,i;y=t.datum_params.length>3?a:n}return 3===e.datum_type&&(e.a=s,e.es=r),(t.es!==e.es||t.a!==e.a||o(y)||o(e.datum_type))&&(t.geodetic_to_geocentric(i),o(t.datum_type)&&t.geocentric_to_wgs84(i),o(e.datum_type)&&e.geocentric_from_wgs84(i),e.geocentric_to_geodetic(i)),3===e.datum_type&&this.apply_gridshift(e,1,i),t.a=c,t.es=f,e.a=d,e.es=m,i}},{}],32:[function(t,e,i){function n(t){var e=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?n[t]=s(arguments[1]):n[t]=r(arguments[1]):n[t]=i}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?n.apply(e,t):n(t)});if("string"==typeof t){if(t in n)return n[t]}else"EPSG"in t?n["EPSG:"+t.EPSG]=t:"ESRI"in t?n["ESRI:"+t.ESRI]=t:"IAU2000"in t?n["IAU2000:"+t.IAU2000]=t:console.log(t);return}}var a=t("./global"),s=t("./projString"),r=t("./wkt");a(n),e.exports=n},{"./global":35,"./projString":38,"./wkt":67}],33:[function(t,e,i){var n=t("./constants/Datum"),a=t("./constants/Ellipsoid"),s=t("./extend"),r=t("./datum");e.exports=function(t){if(t.datumCode&&"none"!==t.datumCode){var e=n[t.datumCode];e&&(t.datum_params=e.towgs84?e.towgs84.split(","):null,t.ellps=e.ellipse,t.datumName=e.datumName?e.datumName:t.datumCode)}if(!t.a){var i=a[t.ellps]?a[t.ellps]:a.WGS84;s(t,i)}return t.rf&&!t.b&&(t.b=(1-1/t.rf)*t.a),(0===t.rf||Math.abs(t.a-t.b)<1e-10)&&(t.sphere=!0,t.b=t.a),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=(t.a2-t.b2)/t.a2,t.e=Math.sqrt(t.es),t.R_A&&(t.a*=1-t.es*(.16666666666666666+t.es*(.04722222222222222+.022156084656084655*t.es)),t.a2=t.a*t.a,t.b2=t.b*t.b,t.es=0),t.ep2=(t.a2-t.b2)/t.b2,t.k0||(t.k0=1),t.axis||(t.axis="enu"),t.datum||(t.datum=r(t)),t}},{"./constants/Datum":25,"./constants/Ellipsoid":26,"./datum":30,"./extend":34}],34:[function(t,e,i){e.exports=function(t,e){var i,n;if(t=t||{},!e)return t;for(n in e)void 0!==(i=e[n])&&(t[n]=i);return t}},{}],35:[function(t,e,i){e.exports=function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}},{}],36:[function(t,e,i){var n=t("./core");n.defaultDatum="WGS84",n.Proj=t("./Proj"),n.WGS84=new n.Proj("WGS84"),n.Point=t("./Point"),n.toPoint=t("./common/toPoint"),n.defs=t("./defs"),n.transform=t("./transform"),n.mgrs=t("mgrs"),n.version=t("../package.json").version,t("./includedProjections")(n),e.exports=n},{"../package.json":69,"./Point":1,"./Proj":2,"./common/toPoint":23,"./core":29,"./defs":32,"./includedProjections":"./includedProjections","./transform":66,mgrs:68}],37:[function(t,e,i){var n=t("./defs"),a=t("./wkt"),s=t("./projString");e.exports=function(t){return function(t){return"string"==typeof t}(t)?function(t){return t in n}(t)?n[t]:function(t){return["GEOGCS","GEOCCS","PROJCS","LOCAL_CS"].reduce(function(e,i){return e+1+t.indexOf(i)},0)}(t)?a(t):function(t){return"+"===t[0]}(t)?s(t):void 0:t}},{"./defs":32,"./projString":38,"./wkt":67}],38:[function(t,e,i){var n=.017453292519943295,a=t("./constants/PrimeMeridian"),s=t("./constants/units");e.exports=function(t){var e={},i={};t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).forEach(function(t){var e=t.split("=");e.push(!0),i[e[0].toLowerCase()]=e[1]});var r,o,h,l={proj:"projName",datum:"datumCode",rf:function(t){e.rf=parseFloat(t)},lat_0:function(t){e.lat0=t*n},lat_1:function(t){e.lat1=t*n},lat_2:function(t){e.lat2=t*n},lat_ts:function(t){e.lat_ts=t*n},lon_0:function(t){e.long0=t*n},lon_1:function(t){e.long1=t*n},lon_2:function(t){e.long2=t*n},alpha:function(t){e.alpha=parseFloat(t)*n},lonc:function(t){e.longc=t*n},x_0:function(t){e.x0=parseFloat(t)},y_0:function(t){e.y0=parseFloat(t)},k_0:function(t){e.k0=parseFloat(t)},k:function(t){e.k0=parseFloat(t)},a:function(t){e.a=parseFloat(t)},b:function(t){e.b=parseFloat(t)},r_a:function(){e.R_A=!0},zone:function(t){e.zone=parseInt(t,10)},south:function(){e.utmSouth=!0},towgs84:function(t){e.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){e.to_meter=parseFloat(t)},units:function(t){e.units=t,s[t]&&(e.to_meter=s[t].to_meter)},from_greenwich:function(t){e.from_greenwich=t*n},pm:function(t){e.from_greenwich=(a[t]?a[t]:parseFloat(t))*n},nadgrids:function(t){"@null"===t?e.datumCode="none":e.nadgrids=t},axis:function(t){var i="ewnsud";3===t.length&&-1!==i.indexOf(t.substr(0,1))&&-1!==i.indexOf(t.substr(1,1))&&-1!==i.indexOf(t.substr(2,1))&&(e.axis=t)}};for(r in i)o=i[r],r in l?"function"==typeof(h=l[r])?h(o):e[h]=o:e[r]=o;return"string"==typeof e.datumCode&&"WGS84"!==e.datumCode&&(e.datumCode=e.datumCode.toLowerCase()),e}},{"./constants/PrimeMeridian":27,"./constants/units":28}],39:[function(t,e,i){function n(t,e){var i=r.length;return t.names?(r[i]=t,t.names.forEach(function(t){s[t.toLowerCase()]=i}),this):(console.log(e),!0)}var a=[t("./projections/merc"),t("./projections/longlat")],s={},r=[];i.add=n,i.get=function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==s[e]&&r[s[e]]?r[s[e]]:void 0},i.start=function(){a.forEach(n)}},{"./projections/longlat":51,"./projections/merc":52}],40:[function(t,e,i){var n=1e-10,a=t("../common/msfnz"),s=t("../common/qsfnz"),r=t("../common/adjust_lon"),o=t("../common/asinz");i.init=function(){Math.abs(this.lat1+this.lat2)<n||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=a(this.e3,this.sin_po,this.cos_po),this.qs1=s(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=a(this.e3,this.sin_po,this.cos_po),this.qs2=s(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=s(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>n?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},i.forward=function(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=s(this.e3,this.sin_phi,this.cos_phi),a=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,o=this.ns0*r(e-this.long0),h=a*Math.sin(o)+this.x0,l=this.rh-a*Math.cos(o)+this.y0;return t.x=h,t.y=l,t},i.inverse=function(t){var e,i,n,a,s,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),a=0,0!==e&&(a=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,o=this.phi1z(this.e3,i)),s=r(a/this.ns0+this.long0),t.x=s,t.y=o,t},i.phi1z=function(t,e){var i,a,s,r,h,l=o(.5*e);if(n>t)return l;for(var u=t*t,c=1;25>=c;c++)if(i=Math.sin(l),a=Math.cos(l),l+=h=.5*(r=1-(s=t*i)*s)*r/a*(e/(1-u)-i/r+.5/t*Math.log((1-s)/(1+s))),Math.abs(h)<=1e-7)return l;return null},i.names=["Albers_Conic_Equal_Area","Albers","aea"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/msfnz":15,"../common/qsfnz":20}],41:[function(t,e,i){var n=t("../common/adjust_lon"),a=Math.PI/2,s=1e-10,r=t("../common/mlfn"),o=t("../common/e0fn"),h=t("../common/e1fn"),l=t("../common/e2fn"),u=t("../common/e3fn"),c=t("../common/gN"),f=t("../common/asinz"),d=t("../common/imlfn");i.init=function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},i.forward=function(t){var e,i,f,d,m,y,p,v,_,M,b,g,x,k,w,C,j,E,P,S,z,O,T=t.x,q=t.y,A=Math.sin(t.y),R=Math.cos(t.y),L=n(T-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=s?(t.x=this.x0+this.a*(a-q)*Math.sin(L),t.y=this.y0-this.a*(a-q)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=s?(t.x=this.x0+this.a*(a+q)*Math.sin(L),t.y=this.y0+this.a*(a+q)*Math.cos(L),t):(E=this.sin_p12*A+this.cos_p12*R*Math.cos(L),j=(C=Math.acos(E))/Math.sin(C),t.x=this.x0+this.a*j*R*Math.sin(L),t.y=this.y0+this.a*j*(this.cos_p12*A-this.sin_p12*R*Math.cos(L)),t):(e=o(this.es),i=h(this.es),f=l(this.es),d=u(this.es),Math.abs(this.sin_p12-1)<=s?(m=this.a*r(e,i,f,d,a),y=this.a*r(e,i,f,d,q),t.x=this.x0+(m-y)*Math.sin(L),t.y=this.y0-(m-y)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=s?(m=this.a*r(e,i,f,d,a),y=this.a*r(e,i,f,d,q),t.x=this.x0+(m+y)*Math.sin(L),t.y=this.y0+(m+y)*Math.cos(L),t):(p=A/R,v=c(this.a,this.e,this.sin_p12),_=c(this.a,this.e,A),M=Math.atan((1-this.es)*p+this.es*v*this.sin_p12/(_*R)),P=0===(b=Math.atan2(Math.sin(L),this.cos_p12*Math.tan(M)-this.sin_p12*Math.cos(L)))?Math.asin(this.cos_p12*Math.sin(M)-this.sin_p12*Math.cos(M)):Math.abs(Math.abs(b)-Math.PI)<=s?-Math.asin(this.cos_p12*Math.sin(M)-this.sin_p12*Math.cos(M)):Math.asin(Math.sin(L)*Math.cos(M)/Math.sin(b)),g=this.e*this.sin_p12/Math.sqrt(1-this.es),C=v*P*(1-(S=P*P)*(w=(x=this.e*this.cos_p12*Math.cos(b)/Math.sqrt(1-this.es))*x)*(1-w)/6+(z=S*P)/8*(k=g*x)*(1-2*w)+(O=z*P)/120*(w*(4-7*w)-3*g*g*(1-7*w))-O*P/48*k),t.x=this.x0+C*Math.sin(b),t.y=this.y0+C*Math.cos(b),t))},i.inverse=function(t){var e,i,m,y,p,v,_,M,b,g,x,k,w,C,j,E,P,S,z,O,T,q;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*a*this.a)return;return i=e/this.a,m=Math.sin(i),y=Math.cos(i),p=this.long0,Math.abs(e)<=s?v=this.lat0:(v=f(y*this.sin_p12+t.y*m*this.cos_p12/e),_=Math.abs(this.lat0)-a,p=n(Math.abs(_)<=s?this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*m,e*this.cos_p12*y-t.y*this.sin_p12*m))),t.x=p,t.y=v,t}return M=o(this.es),b=h(this.es),g=l(this.es),x=u(this.es),Math.abs(this.sin_p12-1)<=s?(k=this.a*r(M,b,g,x,a),e=Math.sqrt(t.x*t.x+t.y*t.y),v=d((k-e)/this.a,M,b,g,x),p=n(this.long0+Math.atan2(t.x,-1*t.y)),t.x=p,t.y=v,t):Math.abs(this.sin_p12+1)<=s?(k=this.a*r(M,b,g,x,a),e=Math.sqrt(t.x*t.x+t.y*t.y),v=d((e-k)/this.a,M,b,g,x),p=n(this.long0+Math.atan2(t.x,t.y)),t.x=p,t.y=v,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),j=Math.atan2(t.x,t.y),w=c(this.a,this.e,this.sin_p12),E=Math.cos(j),S=-(P=this.e*this.cos_p12*E)*P/(1-this.es),z=3*this.es*(1-S)*this.sin_p12*this.cos_p12*E/(1-this.es),q=1-S*(T=(O=e/w)-S*(1+S)*Math.pow(O,3)/6-z*(1+3*S)*Math.pow(O,4)/24)*T/2-O*T*T*T/6,C=Math.asin(this.sin_p12*Math.cos(T)+this.cos_p12*Math.sin(T)*E),p=n(this.long0+Math.asin(Math.sin(j)*Math.sin(T)/Math.cos(C))),v=Math.atan((1-this.es*q*this.sin_p12/Math.sin(C))*Math.tan(C)/(1-this.es)),t.x=p,t.y=v,t)},i.names=["Azimuthal_Equidistant","aeqd"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],42:[function(t,e,i){var n=t("../common/mlfn"),a=t("../common/e0fn"),s=t("../common/e1fn"),r=t("../common/e2fn"),o=t("../common/e3fn"),h=t("../common/gN"),l=t("../common/adjust_lon"),u=t("../common/adjust_lat"),c=t("../common/imlfn"),f=Math.PI/2;i.init=function(){this.sphere||(this.e0=a(this.es),this.e1=s(this.es),this.e2=r(this.es),this.e3=o(this.es),this.ml0=this.a*n(this.e0,this.e1,this.e2,this.e3,this.lat0))},i.forward=function(t){var e,i,a=t.x,s=t.y;if(a=l(a-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(s)*Math.sin(a)),i=this.a*(Math.atan2(Math.tan(s),Math.cos(a))-this.lat0);else{var r=Math.sin(s),o=Math.cos(s),u=h(this.a,this.e,r),c=Math.tan(s)*Math.tan(s),f=a*Math.cos(s),d=f*f,m=this.es*o*o/(1-this.es);e=u*f*(1-d*c*(1/6-(8-c+8*m)*d/120)),i=this.a*n(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+u*r/o*d*(.5+(5-c+6*m)*d/24)}return t.x=e+this.x0,t.y=i+this.y0,t},i.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,i,n=t.x/this.a,a=t.y/this.a;if(this.sphere){var s=a+this.lat0;e=Math.asin(Math.sin(s)*Math.cos(n)),i=Math.atan2(Math.tan(n),Math.cos(s))}else{var r=this.ml0/this.a+a,o=c(r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-f)<=1e-10)return t.x=this.long0,t.y=f,0>a&&(t.y*=-1),t;var d=h(this.a,this.e,Math.sin(o)),m=d*d*d/this.a/this.a*(1-this.es),y=Math.pow(Math.tan(o),2),p=n*this.a/d,v=p*p;e=o-d*Math.tan(o)/m*p*p*(.5-(1+3*y)*p*p/24),i=p*(1-v*(y/3+(1+3*y)*y*v/15))/Math.cos(o)}return t.x=l(i+this.long0),t.y=u(e),t},i.names=["Cassini","Cassini_Soldner","cass"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/imlfn":12,"../common/mlfn":14}],43:[function(t,e,i){var n=t("../common/adjust_lon"),a=t("../common/qsfnz"),s=t("../common/msfnz"),r=t("../common/iqsfnz");i.init=function(){this.sphere||(this.k0=s(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},i.forward=function(t){var e,i,s=t.x,r=t.y,o=n(s-this.long0);if(this.sphere)e=this.x0+this.a*o*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var h=a(this.e,Math.sin(r));e=this.x0+this.a*this.k0*o,i=this.y0+this.a*h*.5/this.k0}return t.x=e,t.y=i,t},i.inverse=function(t){var e,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=n(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=r(this.e,2*t.y*this.k0/this.a),e=n(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t},i.names=["cea"]},{"../common/adjust_lon":5,"../common/iqsfnz":13,"../common/msfnz":15,"../common/qsfnz":20}],44:[function(t,e,i){var n=t("../common/adjust_lon"),a=t("../common/adjust_lat");i.init=function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},i.forward=function(t){var e=t.x,i=t.y,s=n(e-this.long0),r=a(i-this.lat0);return t.x=this.x0+this.a*s*this.rc,t.y=this.y0+this.a*r,t},i.inverse=function(t){var e=t.x,i=t.y;return t.x=n(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=a(this.lat0+(i-this.y0)/this.a),t},i.names=["Equirectangular","Equidistant_Cylindrical","eqc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5}],45:[function(t,e,i){var n=t("../common/e0fn"),a=t("../common/e1fn"),s=t("../common/e2fn"),r=t("../common/e3fn"),o=t("../common/msfnz"),h=t("../common/mlfn"),l=t("../common/adjust_lon"),u=t("../common/adjust_lat"),c=t("../common/imlfn");i.init=function(){Math.abs(this.lat1+this.lat2)<1e-10||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=n(this.es),this.e1=a(this.es),this.e2=s(this.es),this.e3=r(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=o(this.e,this.sinphi,this.cosphi),this.ml1=h(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<1e-10?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=o(this.e,this.sinphi,this.cosphi),this.ml2=h(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=h(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},i.forward=function(t){var e,i=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var a=h(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-a)}var s=this.ns*l(i-this.long0),r=this.x0+e*Math.sin(s),o=this.y0+this.rh-e*Math.cos(s);return t.x=r,t.y=o,t},i.inverse=function(t){var e,i,n,a;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;if(0!==i&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere)return a=l(this.long0+s/this.ns),n=u(this.g-i/this.a),t.x=a,t.y=n,t;var r=this.g-i/this.a;return n=c(r,this.e0,this.e1,this.e2,this.e3),a=l(this.long0+s/this.ns),t.x=a,t.y=n,t},i.names=["Equidistant_Conic","eqdc"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/imlfn":12,"../common/mlfn":14,"../common/msfnz":15}],46:[function(t,e,i){var n=Math.PI/4,a=t("../common/srat"),s=Math.PI/2;i.init=function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+n)/(Math.pow(Math.tan(.5*this.lat0+n),this.C)*a(this.e*t,this.ratexp))},i.forward=function(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+n),this.C)*a(this.e*Math.sin(i),this.ratexp))-s,t.x=this.C*e,t},i.inverse=function(t){for(var e=t.x/this.C,i=t.y,r=Math.pow(Math.tan(.5*i+n)/this.K,1/this.C),o=20;o>0&&(i=2*Math.atan(r*a(this.e*Math.sin(t.y),-.5*this.e))-s,!(Math.abs(i-t.y)<1e-14));--o)t.y=i;return o?(t.x=e,t.y=i,t):null},i.names=["gauss"]},{"../common/srat":22}],47:[function(t,e,i){var n=t("../common/adjust_lon"),a=t("../common/asinz");i.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},i.forward=function(t){var e,i,a,s,r,o,h,l=t.x,u=t.y;return a=n(l-this.long0),e=Math.sin(u),i=Math.cos(u),s=Math.cos(a),1,(r=this.sin_p14*e+this.cos_p14*i*s)>0||Math.abs(r)<=1e-10?(o=this.x0+1*this.a*i*Math.sin(a)/r,h=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*s)/r):(o=this.x0+this.infinity_dist*i*Math.sin(a),h=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*s)),t.x=o,t.y=h,t},i.inverse=function(t){var e,i,s,r,o,h;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),i=Math.sin(r),s=Math.cos(r),h=a(s*this.sin_p14+t.y*i*this.cos_p14/e),o=Math.atan2(t.x*i,e*this.cos_p14*s-t.y*this.sin_p14*i),o=n(this.long0+o)):(h=this.phic0,o=0),t.x=o,t.y=h,t},i.names=["gnom"]},{"../common/adjust_lon":5,"../common/asinz":6}],48:[function(t,e,i){var n=t("../common/adjust_lon");i.init=function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},i.forward=function(t){var e,i,a,s,r,o,h,l=t.x,u=t.y,c=n(l-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),a=-c*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(a)),r=Math.asin(Math.cos(i)*Math.sin(a)/Math.cos(s)),o=this.n*r,h=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),t.y=h*Math.cos(o)/1,t.x=h*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t},i.inverse=function(t){var e,i,n,a,s,r,o,h=t.x;t.x=t.y,t.y=h,this.czech||(t.y*=-1,t.x*=-1),s=Math.sqrt(t.x*t.x+t.y*t.y),a=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(a)),i=Math.asin(Math.cos(n)*Math.sin(a)/Math.cos(e)),t.x=this.long0-i/this.alfa,r=e,o=0;var l=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(r))/(1-this.e*Math.sin(r)),this.e/2))-this.s45),Math.abs(r-t.y)<1e-10&&(o=1),r=t.y,l+=1}while(0===o&&15>l);return l>=15?null:t},i.names=["Krovak","krovak"]},{"../common/adjust_lon":5}],49:[function(t,e,i){var n=Math.PI/2,a=Math.PI/4,s=1e-10,r=t("../common/qsfnz"),o=t("../common/adjust_lon");i.S_POLE=1,i.N_POLE=2,i.EQUIT=3,i.OBLIQ=4,i.init=function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-n)<s?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<s?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=r(this.e,1),this.mmf=.5/(1-this.es),this.apa=this.authset(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=r(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},i.forward=function(t){var e,i,h,l,u,c,f,d,m,y,p=t.x,v=t.y;if(p=o(p-this.long0),this.sphere){if(u=Math.sin(v),y=Math.cos(v),h=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+y*h:1+this.sinph0*u+this.cosph0*y*h,s>=i)return null;e=(i=Math.sqrt(2/i))*y*Math.sin(p),i*=this.mode===this.EQUIT?u:this.cosph0*u-this.sinph0*y*h}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),Math.abs(v+this.phi0)<s)return null;i=a-.5*v,e=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(p),i*=h}}else{switch(f=0,d=0,m=0,h=Math.cos(p),l=Math.sin(p),u=Math.sin(v),c=r(this.e,u),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(f=c/this.qp,d=Math.sqrt(1-f*f)),this.mode){case this.OBLIQ:m=1+this.sinb1*f+this.cosb1*d*h;break;case this.EQUIT:m=1+d*h;break;case this.N_POLE:m=n+v,c=this.qp-c;break;case this.S_POLE:m=v-n,c=this.qp+c}if(Math.abs(m)<s)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:m=Math.sqrt(2/m),i=this.mode===this.OBLIQ?this.ymf*m*(this.cosb1*f-this.sinb1*d*h):(m=Math.sqrt(2/(1+d*h)))*f*this.ymf,e=this.xmf*m*d*l;break;case this.N_POLE:case this.S_POLE:c>=0?(e=(m=Math.sqrt(c))*l,i=h*(this.mode===this.S_POLE?m:-m)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t},i.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,i,a,r,h,l,u,c=t.x/this.a,f=t.y/this.a;if(this.sphere){var d,m=0,y=0;if((i=.5*(d=Math.sqrt(c*c+f*f)))>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=Math.sin(i),m=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(d)<=s?0:Math.asin(f*y/d),c*=y,f=m*d;break;case this.OBLIQ:i=Math.abs(d)<=s?this.phi0:Math.asin(m*this.sinph0+f*y*this.cosph0/d),c*=y*this.cosph0,f=(m-Math.sin(i)*this.sinph0)*d;break;case this.N_POLE:f=-f,i=n-i;break;case this.S_POLE:i-=n}e=0!==f||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(c,f):0}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(c/=this.dd,f*=this.dd,l=Math.sqrt(c*c+f*f),s>l)return t.x=0,t.y=this.phi0,t;r=2*Math.asin(.5*l/this.rq),a=Math.cos(r),c*=r=Math.sin(r),this.mode===this.OBLIQ?(u=a*this.sinb1+f*r*this.cosb1/l,h=this.qp*u,f=l*this.cosb1*a-f*this.sinb1*r):(u=f*r/l,h=this.qp*u,f=l*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(f=-f),!(h=c*c+f*f))return t.x=0,t.y=this.phi0,t;u=1-h/this.qp,this.mode===this.S_POLE&&(u=-u)}e=Math.atan2(c,f),i=this.authlat(Math.asin(u),this.apa)}return t.x=o(this.long0+e),t.y=i,t},i.P00=.3333333333333333,i.P01=.17222222222222222,i.P02=.10257936507936508,i.P10=.06388888888888888,i.P11=.0664021164021164,i.P20=.016415012942191543,i.authset=function(t){var e,i=[];return i[0]=t*this.P00,e=t*t,i[0]+=e*this.P01,i[1]=e*this.P10,e*=t,i[0]+=e*this.P02,i[1]+=e*this.P11,i[2]=e*this.P20,i},i.authlat=function(t,e){var i=t+t;return t+e[0]*Math.sin(i)+e[1]*Math.sin(i+i)+e[2]*Math.sin(i+i+i)},i.names=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"]},{"../common/adjust_lon":5,"../common/qsfnz":20}],50:[function(t,e,i){var n=1e-10,a=t("../common/msfnz"),s=t("../common/tsfnz"),r=Math.PI/2,o=t("../common/sign"),h=t("../common/adjust_lon"),l=t("../common/phi2z");i.init=function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<n)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),r=a(this.e,e,i),o=s(this.e,this.lat1,e),h=Math.sin(this.lat2),l=Math.cos(this.lat2),u=a(this.e,h,l),c=s(this.e,this.lat2,h),f=s(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>n?this.ns=Math.log(r/u)/Math.log(o/c):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=r/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(f,this.ns),this.title||(this.title="Lambert Conformal Conic")}},i.forward=function(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=n&&(i=o(i)*(r-2*n));var a,l,u=Math.abs(Math.abs(i)-r);if(u>n)a=s(this.e,i,Math.sin(i)),l=this.a*this.f0*Math.pow(a,this.ns);else{if(0>=(u=i*this.ns))return null;l=0}var c=this.ns*h(e-this.long0);return t.x=this.k0*(l*Math.sin(c))+this.x0,t.y=this.k0*(this.rh-l*Math.cos(c))+this.y0,t},i.inverse=function(t){var e,i,n,a,s,o=(t.x-this.x0)/this.k0,u=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+u*u),i=1):(e=-Math.sqrt(o*o+u*u),i=-1);var c=0;if(0!==e&&(c=Math.atan2(i*o,i*u)),0!==e||this.ns>0){if(i=1/this.ns,n=Math.pow(e/(this.a*this.f0),i),-9999===(a=l(this.e,n)))return null}else a=-r;return s=h(c/this.ns+this.long0),t.x=s,t.y=a,t},i.names=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],51:[function(t,e,i){function n(t){return t}i.init=function(){},i.forward=n,i.inverse=n,i.names=["longlat","identity"]},{}],52:[function(t,e,i){var n=t("../common/msfnz"),a=Math.PI/2,s=57.29577951308232,r=t("../common/adjust_lon"),o=Math.PI/4,h=t("../common/tsfnz"),l=t("../common/phi2z");i.init=function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=n(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},i.forward=function(t){var e,i,n=t.x,l=t.y;if(l*s>90&&-90>l*s&&n*s>180&&-180>n*s)return null;if(Math.abs(Math.abs(l)-a)<=1e-10)return null;if(this.sphere)e=this.x0+this.a*this.k0*r(n-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(o+.5*l));else{var u=Math.sin(l),c=h(this.e,l,u);e=this.x0+this.a*this.k0*r(n-this.long0),i=this.y0-this.a*this.k0*Math.log(c)}return t.x=e,t.y=i,t},i.inverse=function(t){var e,i,n=t.x-this.x0,s=t.y-this.y0;if(this.sphere)i=a-2*Math.atan(Math.exp(-s/(this.a*this.k0)));else{var o=Math.exp(-s/(this.a*this.k0));if(-9999===(i=l(this.e,o)))return null}return e=r(this.long0+n/(this.a*this.k0)),t.x=e,t.y=i,t},i.names=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/tsfnz":24}],53:[function(t,e,i){var n=t("../common/adjust_lon");i.init=function(){},i.forward=function(t){var e=t.x,i=t.y,a=n(e-this.long0),s=this.x0+this.a*a,r=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=s,t.y=r,t},i.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e=n(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t},i.names=["Miller_Cylindrical","mill"]},{"../common/adjust_lon":5}],54:[function(t,e,i){var n=t("../common/adjust_lon");i.init=function(){},i.forward=function(t){for(var e=t.x,i=t.y,a=n(e-this.long0),s=i,r=Math.PI*Math.sin(i),o=0;;o++){var h=-(s+Math.sin(s)-r)/(1+Math.cos(s));if(s+=h,Math.abs(h)<1e-10)break}s/=2,Math.PI/2-Math.abs(i)<1e-10&&(a=0);var l=.900316316158*this.a*a*Math.cos(s)+this.x0,u=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=l,t.y=u,t},i.inverse=function(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var a=n(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));a<-Math.PI&&(a=-Math.PI),a>Math.PI&&(a=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var s=Math.asin(i);return t.x=a,t.y=s,t},i.names=["Mollweide","moll"]},{"../common/adjust_lon":5}],55:[function(t,e,i){var n=484813681109536e-20;i.iterations=1,i.init=function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},i.forward=function(t){var e,i=t.x,a=t.y-this.lat0,s=i-this.long0,r=a/n*1e-5,o=s,h=1,l=0;for(e=1;10>=e;e++)h*=r,l+=this.A[e]*h;var u,c=l,f=o,d=1,m=0,y=0,p=0;for(e=1;6>=e;e++)u=m*c+d*f,d=d*c-m*f,m=u,y=y+this.B_re[e]*d-this.B_im[e]*m,p=p+this.B_im[e]*d+this.B_re[e]*m;return t.x=p*this.a+this.x0,t.y=y*this.a+this.y0,t},i.inverse=function(t){var e,i,a=t.x,s=t.y,r=a-this.x0,o=(s-this.y0)/this.a,h=r/this.a,l=1,u=0,c=0,f=0;for(e=1;6>=e;e++)i=u*o+l*h,l=l*o-u*h,u=i,c=c+this.C_re[e]*l-this.C_im[e]*u,f=f+this.C_im[e]*l+this.C_re[e]*u;for(var d=0;d<this.iterations;d++){var m,y=c,p=f,v=o,_=h;for(e=2;6>=e;e++)m=p*c+y*f,y=y*c-p*f,p=m,v+=(e-1)*(this.B_re[e]*y-this.B_im[e]*p),_+=(e-1)*(this.B_im[e]*y+this.B_re[e]*p);y=1,p=0;var M=this.B_re[1],b=this.B_im[1];for(e=2;6>=e;e++)m=p*c+y*f,y=y*c-p*f,p=m,M+=e*(this.B_re[e]*y-this.B_im[e]*p),b+=e*(this.B_im[e]*y+this.B_re[e]*p);var g=M*M+b*b;c=(v*M+_*b)/g,f=(_*M-v*b)/g}var x=c,k=f,w=1,C=0;for(e=1;9>=e;e++)w*=x,C+=this.D[e]*w;var j=this.lat0+C*n*1e5,E=this.long0+k;return t.x=E,t.y=j,t},i.names=["New_Zealand_Map_Grid","nzmg"]},{}],56:[function(t,e,i){var n=t("../common/tsfnz"),a=t("../common/adjust_lon"),s=t("../common/phi2z"),r=Math.PI/2,o=Math.PI/4,h=1e-10;i.init=function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),i=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-i*i);var s,r,o=n(this.e,this.lat0,t),h=this.bl/e*Math.sqrt((1-this.es)/(1-i*i));if(1>h*h&&(h=1),isNaN(this.longc)){var l=n(this.e,this.lat1,Math.sin(this.lat1)),u=n(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(h+Math.sqrt(h*h-1))*Math.pow(o,this.bl):this.el=(h-Math.sqrt(h*h-1))*Math.pow(o,this.bl);var c=Math.pow(l,this.bl),f=Math.pow(u,this.bl);r=.5*((s=this.el/c)-1/s);var d=(this.el*this.el-f*c)/(this.el*this.el+f*c),m=(f-c)/(f+c),y=a(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(d*Math.tan(.5*this.bl*y)/m)/this.bl,this.long0=a(this.long0);var p=a(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*p)/r),this.alpha=Math.asin(h*Math.sin(this.gamma0))}else s=this.lat0>=0?h+Math.sqrt(h*h-1):h-Math.sqrt(h*h-1),this.el=s*Math.pow(o,this.bl),r=.5*(s-1/s),this.gamma0=Math.asin(Math.sin(this.alpha)/h),this.long0=this.longc-Math.asin(r*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(h*h-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(h*h-1),Math.cos(this.alpha))},i.forward=function(t){var e,i,s,l=t.x,u=t.y,c=a(l-this.long0);if(Math.abs(Math.abs(u)-r)<=h)s=u>0?-1:1,i=this.al/this.bl*Math.log(Math.tan(o+s*this.gamma0*.5)),e=-1*s*r*this.al/this.bl;else{var f=n(this.e,u,Math.sin(u)),d=this.el/Math.pow(f,this.bl),m=.5*(d-1/d),y=.5*(d+1/d),p=Math.sin(this.bl*c),v=(m*Math.sin(this.gamma0)-p*Math.cos(this.gamma0))/y;i=Math.abs(Math.abs(v)-1)<=h?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-v)/(1+v))/this.bl,e=Math.abs(Math.cos(this.bl*c))<=h?this.al*this.bl*c:this.al*Math.atan2(m*Math.cos(this.gamma0)+p*Math.sin(this.gamma0),Math.cos(this.bl*c))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+i):(e-=this.uc,t.x=this.x0+i*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-i*Math.sin(this.alpha)),t},i.inverse=function(t){var e,i;this.no_rot?(i=t.y-this.y0,e=t.x-this.x0):(i=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var n=Math.exp(-1*this.bl*i/this.al),o=.5*(n-1/n),l=.5*(n+1/n),u=Math.sin(this.bl*e/this.al),c=(u*Math.cos(this.gamma0)+o*Math.sin(this.gamma0))/l,f=Math.pow(this.el/Math.sqrt((1+c)/(1-c)),1/this.bl);return Math.abs(c-1)<h?(t.x=this.long0,t.y=r):Math.abs(c+1)<h?(t.x=this.long0,t.y=-1*r):(t.y=s(this.e,f),t.x=a(this.long0-Math.atan2(o*Math.cos(this.gamma0)-u*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t},i.names=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]},{"../common/adjust_lon":5,"../common/phi2z":16,"../common/tsfnz":24}],57:[function(t,e,i){var n=t("../common/adjust_lon"),a=1e-10,s=t("../common/asinz"),r=Math.PI/2;i.init=function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},i.forward=function(t){var e,i,s,r,o,h,l,u=t.x,c=t.y;return s=n(u-this.long0),e=Math.sin(c),i=Math.cos(c),r=Math.cos(s),1,((o=this.sin_p14*e+this.cos_p14*i*r)>0||Math.abs(o)<=a)&&(h=1*this.a*i*Math.sin(s),l=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*r)),t.x=h,t.y=l,t},i.inverse=function(t){var e,i,o,h,l,u,c;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),i=s(e/this.a),o=Math.sin(i),h=Math.cos(i),u=this.long0,Math.abs(e)<=a?(c=this.lat0,t.x=u,t.y=c,t):(c=s(h*this.sin_p14+t.y*o*this.cos_p14/e),l=Math.abs(this.lat0)-r,Math.abs(l)<=a?(u=n(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=u,t.y=c,t):(u=n(this.long0+Math.atan2(t.x*o,e*this.cos_p14*h-t.y*this.sin_p14*o)),t.x=u,t.y=c,t))},i.names=["ortho"]},{"../common/adjust_lon":5,"../common/asinz":6}],58:[function(t,e,i){var n=t("../common/e0fn"),a=t("../common/e1fn"),s=t("../common/e2fn"),r=t("../common/e3fn"),o=t("../common/adjust_lon"),h=t("../common/adjust_lat"),l=t("../common/mlfn"),u=1e-10,c=t("../common/gN");i.init=function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=n(this.es),this.e1=a(this.es),this.e2=s(this.es),this.e3=r(this.es),this.ml0=this.a*l(this.e0,this.e1,this.e2,this.e3,this.lat0)},i.forward=function(t){var e,i,n,a=t.x,s=t.y,r=o(a-this.long0);if(n=r*Math.sin(s),this.sphere)Math.abs(s)<=u?(e=this.a*r,i=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(s),i=this.a*(h(s-this.lat0)+(1-Math.cos(n))/Math.tan(s)));else if(Math.abs(s)<=u)e=this.a*r,i=-1*this.ml0;else{var f=c(this.a,this.e,Math.sin(s))/Math.tan(s);e=f*Math.sin(n),i=this.a*l(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+f*(1-Math.cos(n))}return t.x=e+this.x0,t.y=i+this.y0,t},i.inverse=function(t){var e,i,n,a,s,r,h,c,f;if(n=t.x-this.x0,a=t.y-this.y0,this.sphere)if(Math.abs(a+this.a*this.lat0)<=u)e=o(n/this.a+this.long0),i=0;else{var d;for(r=this.lat0+a/this.a,h=n*n/this.a/this.a+r*r,c=r,s=20;s;--s)if(c+=f=-1*(r*(c*(d=Math.tan(c))+1)-c-.5*(c*c+h)*d)/((c-r)/d-1),Math.abs(f)<=u){i=c;break}e=o(this.long0+Math.asin(n*Math.tan(c)/this.a)/Math.sin(i))}else if(Math.abs(a+this.ml0)<=u)i=0,e=o(this.long0+n/this.a);else{var m,y,p,v,_;for(r=(this.ml0+a)/this.a,h=n*n/this.a/this.a+r*r,c=r,s=20;s;--s)if(_=this.e*Math.sin(c),m=Math.sqrt(1-_*_)*Math.tan(c),y=this.a*l(this.e0,this.e1,this.e2,this.e3,c),p=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),c-=f=(r*(m*(v=y/this.a)+1)-v-.5*m*(v*v+h))/(this.es*Math.sin(2*c)*(v*v+h-2*r*v)/(4*m)+(r-v)*(m*p-2/Math.sin(2*c))-p),Math.abs(f)<=u){i=c;break}m=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=o(this.long0+Math.asin(n*m/this.a)/Math.sin(i))}return t.x=e,t.y=i,t},i.names=["Polyconic","poly"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/gN":11,"../common/mlfn":14}],59:[function(t,e,i){var n=t("../common/adjust_lon"),a=t("../common/adjust_lat"),s=t("../common/pj_enfn"),r=t("../common/pj_mlfn"),o=t("../common/pj_inv_mlfn"),h=Math.PI/2,l=t("../common/asinz");i.init=function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=s(this.es)},i.forward=function(t){var e,i,a=t.x,s=t.y;if(a=n(a-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(s),h=20;h;--h){var l=(this.m*s+Math.sin(s)-o)/(this.m+Math.cos(s));if(s-=l,Math.abs(l)<1e-10)break}else s=1!==this.n?Math.asin(this.n*Math.sin(s)):s;e=this.a*this.C_x*a*(this.m+Math.cos(s)),i=this.a*this.C_y*s}else{var u=Math.sin(s),c=Math.cos(s);i=this.a*r(s,u,c,this.en),e=this.a*a*c/Math.sqrt(1-this.es*u*u)}return t.x=e,t.y=i,t},i.inverse=function(t){var e,i,s,r;return t.x-=this.x0,s=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,s/=this.C_x*(this.m+Math.cos(e)),this.m?e=l((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=l(Math.sin(e)/this.n)),s=n(s+this.long0),e=a(e)):(e=o(t.y/this.a,this.es,this.en),r=Math.abs(e),h>r?(r=Math.sin(e),i=this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)),s=n(i)):h>r-1e-10&&(s=this.long0)),t.x=s,t.y=e,t},i.names=["Sinusoidal","sinu"]},{"../common/adjust_lat":4,"../common/adjust_lon":5,"../common/asinz":6,"../common/pj_enfn":17,"../common/pj_inv_mlfn":18,"../common/pj_mlfn":19}],60:[function(t,e,i){i.init=function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,n=1/this.rf,a=2*n-Math.pow(n,2),s=this.e=Math.sqrt(a);this.R=this.k0*i*Math.sqrt(1-a)/(1-a*Math.pow(e,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var r=Math.log(Math.tan(Math.PI/4+this.b0/2)),o=Math.log(Math.tan(Math.PI/4+t/2)),h=Math.log((1+s*e)/(1-s*e));this.K=r-this.alpha*o+this.alpha*s/2*h},i.forward=function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+i)+this.K,a=2*(Math.atan(Math.exp(n))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),r=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(a)+Math.cos(this.b0)*Math.cos(s))),o=Math.asin(Math.cos(this.b0)*Math.sin(a)-Math.sin(this.b0)*Math.cos(a)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(o))/(1-Math.sin(o)))+this.y0,t.x=this.R*r+this.x0,t},i.inverse=function(t){for(var e=t.x-this.x0,i=t.y-this.y0,n=e/this.R,a=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(a)+Math.sin(this.b0)*Math.cos(a)*Math.cos(n)),r=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(a))),o=this.lambda0+r/this.alpha,h=0,l=s,u=-1e3,c=0;Math.abs(l-u)>1e-7;){if(++c>20)return;h=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(l))/2)),u=l,l=2*Math.atan(Math.exp(h))-Math.PI/2}return t.x=o,t.y=l,t},i.names=["somerc"]},{}],61:[function(t,e,i){var n=Math.PI/2,a=1e-10,s=t("../common/sign"),r=t("../common/msfnz"),o=t("../common/tsfnz"),h=t("../common/phi2z"),l=t("../common/adjust_lon");i.ssfn_=function(t,e,i){return e*=i,Math.tan(.5*(n+t))*Math.pow((1-e)/(1+e),.5*i)},i.init=function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=a&&(this.k0=.5*(1+s(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=a&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=a&&(this.k0=.5*this.cons*r(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/o(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=r(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-n,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},i.forward=function(t){var e,i,s,r,h,u,c=t.x,f=t.y,d=Math.sin(f),m=Math.cos(f),y=l(c-this.long0);return Math.abs(Math.abs(c-this.long0)-Math.PI)<=a&&Math.abs(f+this.lat0)<=a?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*d+this.coslat0*m*Math.cos(y)),t.x=this.a*e*m*Math.sin(y)+this.x0,t.y=this.a*e*(this.coslat0*d-this.sinlat0*m*Math.cos(y))+this.y0,t):(i=2*Math.atan(this.ssfn_(f,d,this.e))-n,r=Math.cos(i),s=Math.sin(i),Math.abs(this.coslat0)<=a?(h=o(this.e,f*this.con,this.con*d),u=2*this.a*this.k0*h/this.cons,t.x=this.x0+u*Math.sin(c-this.long0),t.y=this.y0-this.con*u*Math.cos(c-this.long0),t):(Math.abs(this.sinlat0)<a?(e=2*this.a*this.k0/(1+r*Math.cos(y)),t.y=e*s):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*s+this.cosX0*r*Math.cos(y))),t.y=e*(this.cosX0*s-this.sinX0*r*Math.cos(y))+this.y0),t.x=e*r*Math.sin(y)+this.x0,t))},i.inverse=function(t){t.x-=this.x0,t.y-=this.y0;var e,i,s,r,o,u=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var c=2*Math.atan(u/(.5*this.a*this.k0));return e=this.long0,i=this.lat0,a>=u?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(c)*this.sinlat0+t.y*Math.sin(c)*this.coslat0/u),e=l(Math.abs(this.coslat0)<a?this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(c),u*this.coslat0*Math.cos(c)-t.y*this.sinlat0*Math.sin(c))),t.x=e,t.y=i,t)}if(Math.abs(this.coslat0)<=a){if(a>=u)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,s=u*this.cons/(2*this.a*this.k0),i=this.con*h(this.e,s),e=this.con*l(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(u*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a>=u?o=this.X0:(o=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/u),e=l(this.long0+Math.atan2(t.x*Math.sin(r),u*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),i=-1*h(this.e,Math.tan(.5*(n+o)));return t.x=e,t.y=i,t},i.names=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"]},{"../common/adjust_lon":5,"../common/msfnz":15,"../common/phi2z":16,"../common/sign":21,"../common/tsfnz":24}],62:[function(t,e,i){var n=t("./gauss"),a=t("../common/adjust_lon");i.init=function(){n.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},i.forward=function(t){var e,i,s,r;return t.x=a(t.x-this.long0),n.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),s=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*s),t.x=r*i*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*i*s),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},i.inverse=function(t){var e,i,s,r,o;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,o=Math.sqrt(t.x*t.x+t.y*t.y)){var h=2*Math.atan2(o,this.R2);e=Math.sin(h),i=Math.cos(h),r=Math.asin(i*this.sinc0+t.y*e*this.cosc0/o),s=Math.atan2(t.x*e,o*this.cosc0*i-t.y*this.sinc0*e)}else r=this.phic0,s=0;return t.x=s,t.y=r,n.inverse.apply(this,[t]),t.x=a(t.x+this.long0),t},i.names=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"]},{"../common/adjust_lon":5,"./gauss":46}],63:[function(t,e,i){var n=t("../common/e0fn"),a=t("../common/e1fn"),s=t("../common/e2fn"),r=t("../common/e3fn"),o=t("../common/mlfn"),h=t("../common/adjust_lon"),l=Math.PI/2,u=t("../common/sign"),c=t("../common/asinz");i.init=function(){this.e0=n(this.es),this.e1=a(this.es),this.e2=s(this.es),this.e3=r(this.es),this.ml0=this.a*o(this.e0,this.e1,this.e2,this.e3,this.lat0)},i.forward=function(t){var e,i,n,a=t.x,s=t.y,r=h(a-this.long0),l=Math.sin(s),u=Math.cos(s);if(this.sphere){var c=u*Math.sin(r);if(Math.abs(Math.abs(c)-1)<1e-10)return 93;i=.5*this.a*this.k0*Math.log((1+c)/(1-c)),e=Math.acos(u*Math.cos(r)/Math.sqrt(1-c*c)),0>s&&(e=-e),n=this.a*this.k0*(e-this.lat0)}else{var f=u*r,d=Math.pow(f,2),m=this.ep2*Math.pow(u,2),y=Math.tan(s),p=Math.pow(y,2);e=1-this.es*Math.pow(l,2);var v=this.a/Math.sqrt(e),_=this.a*o(this.e0,this.e1,this.e2,this.e3,s);i=this.k0*v*f*(1+d/6*(1-p+m+d/20*(5-18*p+Math.pow(p,2)+72*m-58*this.ep2)))+this.x0,n=this.k0*(_-this.ml0+v*y*(d*(.5+d/24*(5-p+9*m+4*Math.pow(m,2)+d/30*(61-58*p+Math.pow(p,2)+600*m-330*this.ep2)))))+this.y0}return t.x=i,t.y=n,t},i.inverse=function(t){var e,i,n,a,s,r;if(this.sphere){var o=Math.exp(t.x/(this.a*this.k0)),f=.5*(o-1/o),d=this.lat0+t.y/(this.a*this.k0),m=Math.cos(d);e=Math.sqrt((1-m*m)/(1+f*f)),s=c(e),0>d&&(s=-s),r=0===f&&0===m?this.long0:h(Math.atan2(f,m)+this.long0)}else{var y=t.x-this.x0,p=t.y-this.y0;for(i=e=(this.ml0+p/this.k0)/this.a,a=0;i+=n=(e+this.e1*Math.sin(2*i)-this.e2*Math.sin(4*i)+this.e3*Math.sin(6*i))/this.e0-i,!(Math.abs(n)<=1e-10);a++)if(a>=6)return 95;if(Math.abs(i)<l){var v=Math.sin(i),_=Math.cos(i),M=Math.tan(i),b=this.ep2*Math.pow(_,2),g=Math.pow(b,2),x=Math.pow(M,2),k=Math.pow(x,2);e=1-this.es*Math.pow(v,2);var w=this.a/Math.sqrt(e),C=w*(1-this.es)/e,j=y/(w*this.k0),E=Math.pow(j,2);s=i-w*M*E/C*(.5-E/24*(5+3*x+10*b-4*g-9*this.ep2-E/30*(61+90*x+298*b+45*k-252*this.ep2-3*g))),r=h(this.long0+j*(1-E/6*(1+2*x+b-E/20*(5-2*b+28*x-3*g+8*this.ep2+24*k)))/_)}else s=l*u(p),r=this.long0}return t.x=r,t.y=s,t},i.names=["Transverse_Mercator","Transverse Mercator","tmerc"]},{"../common/adjust_lon":5,"../common/asinz":6,"../common/e0fn":7,"../common/e1fn":8,"../common/e2fn":9,"../common/e3fn":10,"../common/mlfn":14,"../common/sign":21}],64:[function(t,e,i){var n=t("./tmerc");i.dependsOn="tmerc",i.init=function(){this.zone&&(this.lat0=0,this.long0=.017453292519943295*(6*Math.abs(this.zone)-183),this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,n.init.apply(this),this.forward=n.forward,this.inverse=n.inverse)},i.names=["Universal Transverse Mercator System","utm"]},{"./tmerc":63}],65:[function(t,e,i){var n=t("../common/adjust_lon"),a=Math.PI/2,s=1e-10,r=t("../common/asinz");i.init=function(){this.R=this.a},i.forward=function(t){var e,i,o=t.x,h=t.y,l=n(o-this.long0);Math.abs(h)<=s&&(e=this.x0+this.R*l,i=this.y0);var u=r(2*Math.abs(h/Math.PI));(Math.abs(l)<=s||Math.abs(Math.abs(h)-a)<=s)&&(e=this.x0,i=h>=0?this.y0+Math.PI*this.R*Math.tan(.5*u):this.y0+Math.PI*this.R*-Math.tan(.5*u));var c=.5*Math.abs(Math.PI/l-l/Math.PI),f=c*c,d=Math.sin(u),m=Math.cos(u),y=m/(d+m-1),p=y*y,v=y*(2/d-1),_=v*v,M=Math.PI*this.R*(c*(y-_)+Math.sqrt(f*(y-_)*(y-_)-(_+f)*(p-_)))/(_+f);0>l&&(M=-M),e=this.x0+M;var b=f+y;return M=Math.PI*this.R*(v*b-c*Math.sqrt((_+f)*(f+1)-b*b))/(_+f),i=h>=0?this.y0+M:this.y0-M,t.x=e,t.y=i,t},i.inverse=function(t){var e,i,a,r,o,h,l,u,c,f,d,m;return t.x-=this.x0,t.y-=this.y0,d=Math.PI*this.R,o=(a=t.x/d)*a+(r=t.y/d)*r,d=3*(r*r/(u=-2*(h=-Math.abs(r)*(1+o))+1+2*r*r+o*o)+(2*(l=h-2*r*r+a*a)*l*l/u/u/u-9*h*l/u/u)/27)/(c=(h-l*l/3/u)/u)/(f=2*Math.sqrt(-c/3)),Math.abs(d)>1&&(d=d>=0?1:-1),m=Math.acos(d)/3,i=t.y>=0?(-f*Math.cos(m+Math.PI/3)-l/3/u)*Math.PI:-(-f*Math.cos(m+Math.PI/3)-l/3/u)*Math.PI,e=Math.abs(a)<s?this.long0:n(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(a*a-r*r)+o*o))/2/a),t.x=e,t.y=i,t},i.names=["Van_der_Grinten_I","VanDerGrinten","vandg"]},{"../common/adjust_lon":5,"../common/asinz":6}],66:[function(t,e,i){var n=.017453292519943295,a=57.29577951308232,s=1,r=2,o=t("./datum_transform"),h=t("./adjust_axis"),l=t("./Proj"),u=t("./common/toPoint");e.exports=function t(e,i,c){function f(t,e){return(t.datum.datum_type===s||t.datum.datum_type===r)&&"WGS84"!==e.datumCode}var d;return Array.isArray(c)&&(c=u(c)),e.datum&&i.datum&&(f(e,i)||f(i,e))&&(t(e,d=new l("WGS84"),c),e=d),"enu"!==e.axis&&h(e,!1,c),"longlat"===e.projName?(c.x*=n,c.y*=n):(e.to_meter&&(c.x*=e.to_meter,c.y*=e.to_meter),e.inverse(c)),e.from_greenwich&&(c.x+=e.from_greenwich),c=o(e.datum,i.datum,c),i.from_greenwich&&(c.x-=i.from_greenwich),"longlat"===i.projName?(c.x*=a,c.y*=a):(i.forward(c),i.to_meter&&(c.x/=i.to_meter,c.y/=i.to_meter)),"enu"!==i.axis&&h(i,!0,c),c}},{"./Proj":2,"./adjust_axis":3,"./common/toPoint":23,"./datum_transform":31}],67:[function(t,e,i){function n(t,e,i){t[e]=i.map(function(t){var e={};return a(t,e),e}).reduce(function(t,e){return l(t,e)},{})}function a(t,e){var i;return Array.isArray(t)?("PARAMETER"===(i=t.shift())&&(i=t.shift()),void(1===t.length?Array.isArray(t[0])?(e[i]={},a(t[0],e[i])):e[i]=t[0]:t.length?"TOWGS84"===i?e[i]=t:(e[i]={},["UNIT","PRIMEM","VERT_DATUM"].indexOf(i)>-1?(e[i]={name:t[0].toLowerCase(),convert:t[1]},3===t.length&&(e[i].auth=t[2])):"SPHEROID"===i?(e[i]={name:t[0],a:t[1],rf:t[2]},4===t.length&&(e[i].auth=t[3])):["GEOGCS","GEOCCS","DATUM","VERT_CS","COMPD_CS","LOCAL_CS","FITTED_CS","LOCAL_DATUM"].indexOf(i)>-1?(t[0]=["name",t[0]],n(e,i,t)):t.every(function(t){return Array.isArray(t)})?n(e,i,t):a(t,e[i])):e[i]=!0)):void(e[t]=!0)}function s(t){return t*h}function r(t){function e(e){var i=t.to_meter||1;return parseFloat(e,10)*i}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==o(t.PROJECTION)?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=parseFloat(t.UNIT.convert,10)*t.DATUM.SPHEROID.a):t.to_meter=parseFloat(t.UNIT.convert,10))),t.GEOGCS&&(t.GEOGCS.DATUM?t.datumCode=t.GEOGCS.DATUM.name.toLowerCase():t.datumCode=t.GEOGCS.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),t.GEOGCS.DATUM&&t.GEOGCS.DATUM.SPHEROID&&(t.ellps=t.GEOGCS.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=t.GEOGCS.DATUM.SPHEROID.a,t.rf=parseFloat(t.GEOGCS.DATUM.SPHEROID.rf,10)),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36")),t.b&&!isFinite(t.b)&&(t.b=t.a);[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",s],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",s],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",s],["lat0","latitude_of_origin",s],["lat0","standard_parallel_1",s],["lat1","standard_parallel_1",s],["lat2","standard_parallel_2",s],["alpha","azimuth",s],["srsCode","name"]].forEach(function(e){return function(t,e){var i=e[0],n=e[1];!(i in t)&&n in t&&(t[i]=t[n],3===e.length&&(t[i]=e[2](t[i])))}(t,e)}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=s(t.lat1>0?90:-90),t.lat_ts=t.lat1)}var h=.017453292519943295,l=t("./extend");e.exports=function(t,e){var i=JSON.parse((","+t).replace(/\\s*\\,\\s*([A-Z_0-9]+?)(\\[)/g,\',["$1",\').slice(1).replace(/\\s*\\,\\s*([A-Z_0-9]+?)\\]/g,\',"$1"]\').replace(/,\\["VERTCS".+/,"")),n=i.shift(),s=i.shift();i.unshift(["name",s]),i.unshift(["type",n]),i.unshift("output");var o={};return a(i,o),r(o.output),l(e,o.output)}},{"./extend":34}],68:[function(t,e,i){function n(t){return t*(Math.PI/180)}function a(t){return t/Math.PI*180}function s(t){var e=t.northing,i=t.easting,n=t.zoneLetter,r=t.zoneNumber;if(0>r||r>60)return null;var o,h,l,u,c,f,d,m,y,p=6378137,v=.00669438,_=(1-Math.sqrt(1-v))/(1+Math.sqrt(1-v)),M=i-5e5,b=e;"N">n&&(b-=1e7),d=6*(r-1)-180+3,o=v/(1-v),y=(m=b/.9996/6367449.145945056)+(3*_/2-27*_*_*_/32)*Math.sin(2*m)+(21*_*_/16-55*_*_*_*_/32)*Math.sin(4*m)+151*_*_*_/96*Math.sin(6*m),h=p/Math.sqrt(1-v*Math.sin(y)*Math.sin(y)),l=Math.tan(y)*Math.tan(y),u=o*Math.cos(y)*Math.cos(y),c=p*(1-v)/Math.pow(1-v*Math.sin(y)*Math.sin(y),1.5),f=M/(.9996*h);var g=y-h*Math.tan(y)/c*(f*f/2-(5+3*l+10*u-4*u*u-9*o)*f*f*f*f/24+(61+90*l+298*u+45*l*l-252*o-3*u*u)*f*f*f*f*f*f/720);g=a(g);var x,k=(f-(1+2*l+u)*f*f*f/6+(5-2*u+28*l-3*u*u+8*o+24*l*l)*f*f*f*f*f/120)/Math.cos(y);if(k=d+a(k),t.accuracy){var w=s({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});x={top:w.lat,right:w.lon,bottom:g,left:k}}else x={lat:g,lon:k};return x}function r(t,e){var i="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+function(t,e,i){var n=o(i),a=Math.floor(t/1e5),s=Math.floor(e/1e5)%20;return function(t,e,i){var n=i-1,a=d.charCodeAt(n),s=m.charCodeAt(n),r=a+t-1,o=s+e,h=!1;return r>M&&(r=r-M+y-1,h=!0),(r===p||p>a&&r>p||(r>p||p>a)&&h)&&r++,(r===v||v>a&&r>v||(r>v||v>a)&&h)&&++r===p&&r++,r>M&&(r=r-M+y-1),o>_?(o=o-_+y-1,h=!0):h=!1,(o===p||p>s&&o>p||(o>p||p>s)&&h)&&o++,(o===v||v>s&&o>v||(o>v||v>s)&&h)&&++o===p&&o++,o>_&&(o=o-_+y-1),String.fromCharCode(r)+String.fromCharCode(o)}(a,s,n)}(t.easting,t.northing,t.zoneNumber)+i.substr(i.length-5,e)+n.substr(n.length-5,e)}function o(t){var e=t%f;return 0===e&&(e=f),e}function h(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,i=t.length,n=null,a="",s=0;!/[A-Z]/.test(e=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;a+=e,s++}var r=parseInt(a,10);if(0===s||s+3>i)throw"MGRSPoint bad conversion from: "+t;var h=t.charAt(s++);if("A">=h||"B"===h||"Y"===h||h>="Z"||"I"===h||"O"===h)throw"MGRSPoint zone letter "+h+" not handled: "+t;n=t.substring(s,s+=2);for(var f=o(r),d=l(n.charAt(0),f),m=u(n.charAt(1),f);m<c(h);)m+=2e6;var y=i-s;if(y%2!=0)throw"MGRSPoint has to have an even number \\nof digits after the zone letter and two 100km letters - front \\nhalf for easting meters, second half for \\nnorthing meters"+t;var p,v,_,M=y/2,b=0,g=0;return M>0&&(p=1e5/Math.pow(10,M),v=t.substring(s,s+M),b=parseFloat(v)*p,_=t.substring(s+M),g=parseFloat(_)*p),{easting:b+d,northing:g+m,zoneLetter:h,zoneNumber:r,accuracy:p}}function l(t,e){for(var i=d.charCodeAt(e-1),n=1e5,a=!1;i!==t.charCodeAt(0);){if(++i===p&&i++,i===v&&i++,i>M){if(a)throw"Bad character: "+t;i=y,a=!0}n+=1e5}return n}function u(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=m.charCodeAt(e-1),n=0,a=!1;i!==t.charCodeAt(0);){if(++i===p&&i++,i===v&&i++,i>_){if(a)throw"Bad character: "+t;i=y,a=!0}n+=1e5}return n}function c(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}var f=6,d="AJSAJS",m="AFAFAF",y=65,p=73,v=79,_=86,M=90;i.forward=function(t,e){return e=e||5,r(function(t){var e,i,a,s,r,o,h,l=t.lat,u=t.lon,c=6378137,f=.00669438,d=n(l),m=n(u);h=Math.floor((u+180)/6)+1,180===u&&(h=60),l>=56&&64>l&&u>=3&&12>u&&(h=32),l>=72&&84>l&&(u>=0&&9>u?h=31:u>=9&&21>u?h=33:u>=21&&33>u?h=35:u>=33&&42>u&&(h=37)),o=n(6*(h-1)-180+3),e=f/(1-f),i=c/Math.sqrt(1-f*Math.sin(d)*Math.sin(d)),a=Math.tan(d)*Math.tan(d),s=e*Math.cos(d)*Math.cos(d);var y=.9996*i*((r=Math.cos(d)*(m-o))+(1-a+s)*r*r*r/6+(5-18*a+a*a+72*s-58*e)*r*r*r*r*r/120)+5e5,p=.9996*(c*(.9983242984503243*d-.002514607064228144*Math.sin(2*d)+2639046602129982e-21*Math.sin(4*d)-35*f*f*f/3072*Math.sin(6*d))+i*Math.tan(d)*(r*r/2+(5-a+9*s+4*s*s)*r*r*r*r/24+(61-58*a+a*a+600*s-330*e)*r*r*r*r*r*r/720));return 0>l&&(p+=1e7),{northing:Math.round(p),easting:Math.round(y),zoneNumber:h,zoneLetter:function(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}(l)}}({lat:t[1],lon:t[0]}),e)},i.inverse=function(t){var e=s(h(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},i.toPoint=function(t){var e=s(h(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}},{}],69:[function(t,e,i){e.exports={name:"proj4",version:"2.3.15",description:"Proj4js is a JavaScript library to transform point coordinates from one coordinate system to another, including datum transformations.",main:"lib/index.js",directories:{test:"test",doc:"docs"},scripts:{test:"./node_modules/istanbul/lib/cli.js test ./node_modules/mocha/bin/_mocha test/test.js"},repository:{type:"git",url:"git://github.com/proj4js/proj4js.git"},author:"",license:"MIT",jam:{main:"dist/proj4-2.3.15.min.js",include:["dist/proj4-2.3.15.min.js","README.md","AUTHORS","LICENSE.md"]},devDependencies:{"grunt-cli":"~0.1.13",grunt:"~0.4.2","grunt-contrib-connect":"~0.6.0","grunt-contrib-jshint":"~0.8.0",chai:"~1.8.1",mocha:"~1.17.1","grunt-mocha-phantomjs":"~0.4.0",browserify:"~12.0.1","grunt-browserify":"~4.0.1","grunt-contrib-uglify":"~0.11.1",curl:"git://github.com/cujojs/curl.git",istanbul:"~0.2.4",tin:"~0.4.0"},dependencies:{mgrs:"~0.0.2"}}},{}]},{},[36])(36)})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(i(8)),a=s(i(0));function s(t){return t&&t.__esModule?t:{default:t}}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.location,this.isStart=!1}return function(t,e,i){e&&r(t.prototype,e),i&&r(t,i)}(t,[{key:"start",value:function(){window._native&&(this.isStart=!0,window._native.startTracker("place"))}},{key:"stop",value:function(){window._native&&(window._native.stopTracker("place"),this.isStart=!1)}},{key:"refresh",value:function(){this.location&&this.updateLocation(this.location,!0)}},{key:"updateLocation",value:function(t,e){this.location=t,n.default.dispatchEvent("locationchange",{location:t})}},{key:"updateRotation",value:function(t){var e=(new a.default).fromArray(t.matrix);n.default.dispatchEvent("rotationchange",{matrix:e})}}]),t}();e.default=o,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(i(10)),a=i(5);function s(t){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function h(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=function(t){function e(t){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(h(i=function(t,e){return!e||"object"!==s(e)&&"function"!=typeof e?h(t):e}(this,o(e).call(this))),"type","GeoRenderable"),i.headingAutoUpdate=!0,i.transCoords,i.location={latitude:0,longitude:0,altitude:0},t instanceof HTMLElement?(i.element=t,i.element.style.position="absolute",i.element.style.display="none",i.track=!0,i.addEventListener("added",function(t){for(var e=t.target;;){if(null===e.parent){e.isScene&&LetseeEngine.renderer.appendElement(i.element);break}e=e.parent}}),i.addEventListener("removed",function(){i.element.parentNode&&i.element.parentNode.removeChild&&i.element.parentNode.removeChild(i.element)})):console.log("parameter is not html element"),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,n.default),function(t,e,i){e&&r(t.prototype,e),i&&r(t,i)}(e,[{key:"setLocation",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.location.latitude=t,this.location.longitude=e,this.location.altitude=i;var n=(0,a.transformCoords)(t,e);if(this.transCoords){var s=.01*-this.position.x+this.transCoords.x,r=.01*this.position.z+this.transCoords.y,o=s-n.x,h=r-n.y;this.position.x=100*-o,this.position.z=100*h}this.position.y=i,this.transCoords=n,LetseeEngine.place.tracker.refresh()}},{key:"latitude",get:function(){return this.location.latitude},set:function(t){this.setLocation(t,this.longitude,this.altitude)}},{key:"longitude",get:function(){return this.location.longitude},set:function(t){this.setLocation(this.latitude,t,this.altitude)}},{key:"altitude",get:function(){return this.location.altitude},set:function(t){this.setLocation(this.latitude,this.longitude,t)}}]),e}();e.default=u,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(2),a=i(5);function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=function(){function t(){var e=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!window.THREE)throw new Error("THREE is not definded. please import three.js library.");this.hasPlace=!1,this.MAX_DIST=50,this.objects={},this.camera=new THREE.PerspectiveCamera,this.scene=new THREE.Scene,this.scene.add(this.camera),this.renderer=new THREE.WebGLRenderer({alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio);var i=function(t){e.camera.projectionMatrix.copy(t),e.renderer.setSize(LetseeEngine.renderer.width,LetseeEngine.renderer.height)};i(LetseeEngine.camera._projectionMatrix),LetseeEngine.addEventListener("configurationchange",function(t){i(t.projectionMatrix)});var s=this.renderer.domElement;s.className="ar-renderer",s.style.position="absolute",s.style.top=0,s.style.left=0,s.style.margin=0,s.style.padding=0,document.body.insertBefore(s,document.body.firstChild),LetseeEngine.addEventListener("trackstart",function(t){if(e.objects[t.target.uri]){var i=e.objects[t.target.uri];t.matrix.decompose(i.position,i.quaternion,i.scale),i.scale.setScalar(t.scale),i.visible=!0,e.onTrackStartCallback(t),e.render(t)}}),LetseeEngine.addEventListener("trackmove",function(t){if(e.objects[t.target.uri]){var i=e.objects[t.target.uri],n=t.matrix;if(e.hasPlace){var a=e.camera.matrixWorld.clone();n.multiplyMatrices(a,n)}n.decompose(i.position,i.quaternion,i.scale),i.scale.setScalar(t.scale),e.onTrackMoveCallback(t),e.render(t)}}),LetseeEngine.addEventListener("trackend",function(t){if(e.objects[t.target.uri]){var i=e.objects[t.target.uri];t.matrix.decompose(i.position,i.quaternion,i.scale),i.scale.setScalar(t.scale),i.visible=!1,e.onTrackEndCallback(t),e.render(t)}}),LetseeEngine.addEventListener("rotationchange",function(t){if(e.hasPlace){var i=t.matrix.clone(),a=(new THREE.Matrix4).makeRotationY((0,n.degToRad)(180));i.multiply(a);var s=(new THREE.Matrix4).makeRotationZ((0,n.degToRad)(-90));i.multiply(s),e.camera.quaternion.setFromRotationMatrix(i),e.render(t)}}),LetseeEngine.addEventListener("locationchange",function(t){if(e.hasPlace){var i=e.objects.geolocation.children;if(i.length>0){var n=t.latitude,s=t.longitude,r=(0,a.transformCoords)(n,s),o=e.MAX_DIST;i.forEach(function(t){if(t.location){var e=t.location,i=e.latitude,h=e.longitude;if((0,a.getDistance)(n,s,i,h)<o){var l=(0,a.transformCoords)(i,h),u=r.x-l.x,c=r.y-l.y;t.position.x=100*-u,t.position.z=100*c,t.visible=!0}else t.visible=!1}})}e.render(t)}})}return function(t,e,i){e&&s(t.prototype,e),i&&s(t,i)}(t,[{key:"onTrackStart",value:function(t){this.onTrackStartCallback=t}},{key:"onTrackMove",value:function(t){this.onTrackMoveCallback=t}},{key:"onTrackEnd",value:function(t){this.onTrackEndCallback=t}},{key:"onRender",value:function(t){this.onRenderCallback=t}},{key:"render",value:function(t){this.renderer.render(this.scene,this.camera),this.onRenderCallback(t)}},{key:"onTrackStartCallback",value:function(t){}},{key:"onTrackMoveCallback",value:function(t){}},{key:"onTrackEndCallback",value:function(t){}},{key:"onRenderCallback",value:function(t){}},{key:"addObjectToEntity",value:function(t,e){this.objects[t]||(this.objects[t]=new THREE.Object3D,this.objects[t].visible=!1,this.scene.add(this.objects[t])),this.objects[t].add(e)}},{key:"removeObjectFromEntity",value:function(t,e){this.objects[t]&&(this.objects[t].remove(e),0===this.objects[t].children.length&&delete this.objects[t])}},{key:"addObjectToGeoLocation",value:function(t,e){this.objects.geolocation||(this.objects.geolocation=new THREE.Object3D,this.scene.add(this.objects.geolocation),this.hasPlace=!0),t.location=e,t.position.x=e.latitude,t.position.y=e.longitude,t.position.z=e.altitude,this.objects.geolocation.add(t)}},{key:"removeObjectToGeoLocation",value:function(t){this.objects.geolocation&&(this.objects.geolocation.remove(t),0===this.objects.geolocation.children.length&&(this.hasPlace=!1,delete this.objects.geolocation))}},{key:"setObjectLocation",value:function(t,e){t.location=e,t.position.x=e.latitude,t.position.y=e.longitude,t.position.z=e.altitude}}]),t}();e.default=r,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=l(i(7)),a=(l(i(4)),l(i(18)),l(i(28))),s=(l(i(0)),l(i(15))),r=i(2),o=l(i(11)),h=l(i(16));function l(t){return t&&t.__esModule?t:{default:t}}function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t){return Math.abs(t)<1e-10?0:t}var f=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cachedStyles={};var e=document.createElement("div");e.style.overflow="hidden",e.style.WebkitTransformStyle="preserve-3d",e.style.transformStyle="preserve-3d",e.className="ar-renderer",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.margin="0",e.style.padding="0";var i=document.createElement("div");i.style.WebkitTransformStyle="preserve-3d",i.style.transformStyle="preserve-3d",e.appendChild(i),this.domElement=e,this.cameraElement=i,this.scene=new a.default,this.camera,this.setSize(n.default.width,n.default.height),this.render(),window.addEventListener("load",function(){document.body.insertBefore(e,document.body.firstChild)})}return function(t,e,i){e&&u(t.prototype,e),i&&u(t,i)}(t,[{key:"setSize",value:function(t,e){var i=n.default.isPortrait?t:e,a=n.default.isPortrait?e:t;this.domElement.style.width="".concat(i,"px"),this.cameraElement.style.width="".concat(i,"px"),this.domElement.style.height="".concat(a,"px"),this.cameraElement.style.height="".concat(a,"px")}},{key:"add",value:function(t){this.scene.add(t)}},{key:"remove",value:function(t){this.scene.remove(t)}},{key:"appendElement",value:function(t){this.cameraElement.appendChild(t)}},{key:"removeElement",value:function(t){this.cameraElement.removeChild(t)}},{key:"render",value:function(){if(this.camera){var t=n.default.isPortrait?n.default.width:n.default.height,e=n.default.isPortrait?n.default.height:n.default.width,i=.5/Math.tan((0,r.degToRad)(.5*this.camera.effectiveFOV))*e;this.domElement.style.WebkitPerspective="".concat(i,"px"),this.domElement.style.perspective="".concat(i,"px");var a="translateZ(".concat(i,"px)").concat(this.getCameraCSSMatrix()),s="".concat(a,"translate(").concat(.5*t,"px,").concat(.5*e,"px)");this.cameraElement.style.WebkitTransform=s,this.cameraElement.style.transform=s,this.renderObject(this.scene)}}},{key:"getDOMCSSMatrix",value:function(){var t,e=n.default.orientation;if(0===e)t="";else if(180===e)t="rotateZ(180deg)";else{var i=(n.default.width-n.default.height)/2;90!==e&&(i*=-1),t="rotateZ(".concat(90===e?"-":"","90deg) translateX(").concat(i,"px) translateY(").concat(i,"px)")}return t}},{key:"getCameraCSSMatrix",value:function(){var t=this.camera.matrixWorldInverse.elements.map(function(t,e){return c(1===e||5===e||9===e||13===e?-t:t)});return"matrix3d(".concat(t.join(","),")")}},{key:"renderObject",value:function(t){var e=this;t.traverseRenderable(function(t){if(t.element){var i=t.element,n=e.getObjectCSSMatrix(t),a=e.cachedStyles[t.id];void 0!==a&&a===n||(i.style.WebkitTransform=n,i.style.transform=n,e.cachedStyles[t.id]=n),i.parentNode!==e.cameraElement&&e.cameraElement.appendChild(i)}})}},{key:"getObjectCSSMatrix",value:function(t){var e=t.matrixWorld;if(s.default.tracker.isStart){if(t instanceof h.default)t.headingAutoUpdate&&(t.lookAt(this.camera.position),e.elements[4]=0,e.elements[5]=1,e.elements[6]=0);else if(t instanceof o.default){var i=this.camera.matrixWorld.clone();e.multiplyMatrices(i,e.toCSS3D())}}else e=e.toCSS3D();var n=e.elements.map(function(t,e){return c(e>3&&e<8?-t:t)}),a="matrix3d(".concat(n.join(","),")");return"translate(-50%,-50%)".concat(a)}},{key:"orientation",get:function(){return n.default.orientation},set:function(t){n.default.orientation=t;var e=n.default.width,i=n.default.height;this.setSize(e,i)}},{key:"width",get:function(){return n.default.isPortrait?n.default.width:n.default.height}},{key:"height",get:function(){return n.default.isPortrait?n.default.height:n.default.width}}]),t}();e.default=f,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(i(4)),a=r(i(0)),s=r(i(1));function r(t){return t&&t.__esModule?t:{default:t}}function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var f=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(u(t=function(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?u(t):e}(this,l(e).call(this))),"isCamera",!0),t.type="Camera",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(e,n.default),function(t,e,i){e&&h(t.prototype,e),i&&h(t,i)}(e,[{key:"lookAt",value:function(t){var e=new a.default;e.lookAt(this.position,t,this.up),this.quaternion.setFromRotationMatrix(e)}},{key:"matrixWorldInverse",get:function(){return(new a.default).getInverse(this.matrixWorld)}},{key:"projectionMatrix",get:function(){return new a.default}},{key:"worldZ",get:function(){return new s.default(0,0,-1).applyQuaternion(this.worldQuaternion)}}]),e}();e.default=f,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(i(4));function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var l=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),h(r(t=function(t,e){return!e||"object"!==a(e)&&"function"!=typeof e?r(t):e}(this,s(e).call(this))),"type","Scene"),h(r(t),"isScene",!0),t.track=!0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,n.default),e}();e.default=l,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=c(i(6)),a=c(i(0)),s=c(i(1)),r=c(i(3)),o=c(i(14)),h=c(i(9)),l=c(i(17)),u=c(i(8));function c(t){return t&&t.__esModule?t:{default:t}}function f(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var d=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.targets={}}return function(t,e,i){e&&f(t.prototype,e),i&&f(t,i)}(t,[{key:"isTracking",value:function(t){if(t){if(this.targets[t])return!0}else if(Object.keys(this.targets).length>0)return!0;return!1}},{key:"getTarget",value:function(t){return this.targets[t]}},{key:"addTarget",value:function(t){var e=t.uri;this.targets[e]=t}},{key:"removeTarget",value:function(t){var e=t.uri;delete this.targets[e]}},{key:"clear",value:function(){for(var t=Object.values(this.targets),e=0;e<t.length;e++){var i=t[e];this.onTrackEnd(new h.default("trackend",i),!0)}this.targets={},LetseeEngine.renderer.render()}},{key:"start",value:function(){window._native&&window._native.startTracker("object")}},{key:"stop",value:function(){window._native&&window._native.stopTracker("object")}},{key:"autoFocus",value:function(){window._native&&window._native.autoFocus()}},{key:"setContinuousAutoFocus",value:function(t){window._native&&window._native.setContinuousAutoFocus(t)}},{key:"updateState",value:function(t){if(void 0!==t&&0!==t.length)for(var e=0,i=t.length;e<i;e+=1){var s=t[e],r=s.entity,u=o.default.getEntity(r.uri);u||(u=new n.default(r.uri,r)),u.setData(r);var c=(new a.default).fromArray(s.matrix),f=new h.default(s.type,u,c,s.pixelSize,s.scale);f&&(s.type===l.default.TRACK_START?this.onTrackStart(f):s.type===l.default.TRACK_MOVE?this.onTrackMove(f):s.type===l.default.TRACK_END&&this.onTrackEnd(f))}else this.clear()}},{key:"onTrackStart",value:function(t){var e=t.target;e.track=!0,this.addTarget(e),"unknown"===e.uri?(LetseeEngine.loading&&LetseeEngine.loading.start&&LetseeEngine.loading.start(t),u.default.dispatchEvent("recognize",t)):(e.scale=t.scale,u.default.dispatchEvent("trackstart",t))}},{key:"onTrackMove",value:function(t){var e=t.target;e.position=(new s.default).setFromMatrixPosition(t.matrix),e.quaternion=(new r.default).setFromRotationMatrix(t.matrix),"unknown"!==e.uri&&u.default.dispatchEvent("trackmove",t)}},{key:"onTrackEnd",value:function(t){var e=t.target;e.track=!1,this.removeTarget(e),"unknown"===e.uri?LetseeEngine.loading&&LetseeEngine.loading.stop&&LetseeEngine.loading.stop():u.default.dispatchEvent("trackend",t)}},{key:"count",get:function(){return Object.keys(this.targets).length}}]),t}();e.default=d,t.exports=e.default},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;r(i(9));var n,a=r(i(0)),s=i(2);function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var h=function(){function t(e,i,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n=this;var s=e.domElement.style;s.position="absolute",s.top=0,s.left=0,this.renderer=e,this.scene=i,this.camera=a,this.onConfigurationChanged({projectionMatrix:LetseeEngine.camera.projectionMatrix}),LetseeEngine.addEventListener("configurationchange",this.onConfigurationChanged),LetseeEngine.addEventListener("trackstart",this.onTrackStart),LetseeEngine.addEventListener("trackmove",this.onTrackMove),LetseeEngine.addEventListener("trackend",this.onTrackEnd),LetseeEngine.addEventListener("rotationchange",this.onRotationChanged)}return function(t,e,i){e&&o(t.prototype,e),i&&o(t,i)}(t,[{key:"onConfigurationChanged",value:function(t){t.projectionMatrix&&n.camera.projectionMatrix.fromArray(t.projectionMatrix.toArray()),n.renderer.setSize(LetseeEngine.renderer.width,LetseeEngine.renderer.height),n.render()}},{key:"setVisibility",value:function(t,e){var i=this.scene;i.traverse(function(n){n!==i&&n.uri&&n.uri===t&&(n.visible=e)}),this.render()}},{key:"onTrackStart",value:function(t){var e=t.target,i=n.scene;i.traverse(function(n){n!==i&&n.uri&&n.uri===e.uri&&(n.scale.setScalar(t.scale),n.visible=!0)}),n.render()}},{key:"onTrackMove",value:function(t){var e=n.scene,i=t.target,a=t.matrix,s=n.camera.matrixWorld.clone();a.multiplyMatrices(s,a),e.traverse(function(t){t!==e&&t.uri&&t.uri===i.uri&&(t.position.setFromMatrixPosition(a),t.quaternion.setFromRotationMatrix(a))}),n.render()}},{key:"onTrackEnd",value:function(t){var e=t.target;n.setVisibility(e.uri,!1)}},{key:"onRotationChanged",value:function(t){var e=t.matrix.clone(),i=(new a.default).makeRotationY((0,s.degToRad)(180));e.multiply(i);var r=(new a.default).makeRotationZ((0,s.degToRad)(-90));e.multiply(r),n.camera.quaternion.setFromRotationMatrix(e),n.render()}},{key:"onLocationChanged",value:function(t){console.log(t)}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}}]),t}();e.default=h,t.exports=e.default}])});'}])});